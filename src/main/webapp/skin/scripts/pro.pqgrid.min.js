/**
 * ParamQuery Pro
 * 
 * Copyright (c) 2012-2015 Paramvir Dhindsa (http://paramquery.com)
 * Released under Evaluation license
 * http://paramquery.com/pro/license/evaluate
 * 
 */
(function(l){var p=l.ui.autocomplete.prototype,h=p._renderMenu,a=p._renderItem;p._renderMenu=function(b,c){h.call(this,b,c);var a=this.options.selectItem;if(a&&a.on){var a=a.cls,a=void 0===a?"ui-state-highlight":a,d=this.element.val();d&&a&&l("a",b).filter(function(){return l(this).text()===d}).addClass(a)}};p._renderItem=function(b,c){var e=a.call(this,b,c),d=this.options.highlightText;if(d&&d.on){var f=this.element.val();if(f){var f=new RegExp("("+f+")","i"),g=c.label;if(f.test(g)){var q=d.style,
d=d.cls,g=g.replace(f,"<span style='"+(void 0===q?"font-weight:bold;":q)+"' class='"+(void 0===d?"":d)+"'>$1</span>");e.find("a").html(g)}}}return e};p=l.paramquery=l.paramquery||{};p._trigger=function(b,c,a){var d,f=this.listeners[b],g=this.options,q=g.allEvents,n=g.bubble,k=this.element,m=g[b];a=a||{};c=l.Event(c);c.type=this.widgetName+":"+b;c.target=k[0];if(b=c.originalEvent)for(d in b)d in c||(c[d]=b[d]);q&&"function"==typeof q&&q.call(this,c,a);if(f&&f.length){d=c;q=a;f=f.slice();b=[];for(var F=
0,s=f.length;F<s;F++){var u=f[F],r=u.cb,v=u.one;if(v){if(u._oncerun)continue;u._oncerun=!0}!1===r.call(this,d,q)&&(d.preventDefault(),d.stopPropagation());v&&b.push(F);if(d.isImmediatePropagationStopped())break}if(b.length)for(F=b.length-1;0<=F;F--)f.splice(b[F],1);if(c.isImmediatePropagationStopped())return!c.isDefaultPrevented()}if(g.trigger&&(k[n?"trigger":"triggerHandler"](c,a),c.isImmediatePropagationStopped()))return!c.isDefaultPrevented();m&&!1===m.call(this,c,a)&&(c.preventDefault(),c.stopPropagation());
return!c.isDefaultPrevented()};p.on=function(b,c,a){b=b.split(" ");for(var d=0;d<b.length;d++){var f=b[d];if(f){var g=c,q=a,n=this.listeners[f];n||(n=this.listeners[f]=[]);n.push({cb:g,one:q})}}return this};p.one=function(b,c){return this.on(b,c,!0)};p.off=function(b,c){for(var a=b.split(" "),d=0;d<a.length;d++){var f=a[d];if(f){var g=f;if(f=c){if(g=this.listeners[g]){for(var q=[],n=0,k=g.length;n<k;n++)f==g[n].cb&&q.push(n);if(q.length)for(n=q.length-1;0<=n;n--)g.splice(q[n],1)}}else delete this.listeners[g]}}return this};
l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var b=l(this),c=b.closest(".pq-grid").pqGrid("getInstance").grid,a=c.getCellIndices({$td:b});return(c=c.data({rowIndx:a.rowIndx,dataIndx:a.dataIndx,data:"pq_valid"}).data)?(b=c.icon,c=c.msg,(""==b?"":"<span class='ui-icon "+b+" pq-tooltip-icon'></span>")+(null!=c?c:"")):b.attr("title")}},_create:function(){this._super();var b=this.element,c=this.eventNamespace;
b.on("pqtooltipopen"+c,function(c,b){var a=l(c.target),g=l(c.originalEvent.target);g.on("remove",function(k){a.pqTooltip("close",k,!0)});b.tooltip.css("zIndex",g.zIndex()+5);if(a.is(".pq-grid")){var q=a.pqGrid("getCellIndices",{$td:g}),n=q.dataIndx,k;(k=a.pqGrid("getRowData",{rowIndx:q.rowIndx}))&&(k=k.pq_celldata)&&(k=k[n])&&(k=k.pq_valid)&&(n=k,q=n.style,b.tooltip.addClass(n.cls),n=b.tooltip.attr("style"),b.tooltip.attr("style",n+";"+q));a.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",
function(k,F){k.currentTarget=g[0];a.pqTooltip("close",k,!0)})}});b.on("pqtooltipclose"+c,function(c,b){var a=l(c.target);l(c.originalEvent.target).off("remove");a.is(".pq-grid")&&a.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var p=l.paramquery=l.paramquery||{};p.uniqueArray=function(b){for(var c=[],a=l.inArray,d=0,f=b.length;d<f;d++){var g=b[d];-1==a(g,c)&&c.push(g)}return c};p.select=function(b){var c=b.options,a=b.groupIndx,d=b.labelIndx,f=b.valueIndx,g=null!=d&&null!=f,q=null!=a,n=b.prepend,k=b.dataMap,m,F,s;b=["<select ",b.attr," >"];if(n)for(var u in n)b.push('<option value="',u,'">',n[u],"</option>");if(c&&c.length){for(var n=0,r=c.length;n<r;n++){var v=c[n];if(g){var B=v[f],l=v.pq_disabled?'disabled="disabled" ':
"",h=v.pq_selected?'selected="selected" ':"";if(null!=B){if(k){m={};for(s=0;s<k.length;s++){var p=k[s];m[p]=v[p]}m="data-map='"+JSON.stringify(m)+"'"}else m="";s=m;q&&(p=v.pq_disabled_group?'disabled="disabled" ':"",m=v[a],F!=m&&(null!=F&&b.push("</optgroup>"),b.push('<optgroup label="',m,'" ',p," >"),F=m));d==f?b.push("<option ",h,l,s,">",B,"</option>"):b.push("<option ",h,l,s,' value="',B,'">',v[d],"</option>")}}else if("object"==typeof v)for(u in v)b.push('<option value="',u,'">',v[u],"</option>");
else b.push("<option>",v,"</option>")}q&&b.push("</optgroup>")}b.push("</select>");return b.join("")};l.fn.pqval=function(a){if(a){if(a.incr)return a=this.data("pq_value"),this.prop("indeterminate",!1),a?(a=!1,this.prop("checked",!1)):!1===a?(a=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(a=!0,this.prop("checked",!0)),this.data("pq_value",a),a;a=a.val;this.data("pq_value",a);this.prop("indeterminate",!1);null==a?(this.prop("indeterminate",!0),this.prop("checked",!1)):a?this.prop("checked",
!0):this.prop("checked",!1);return this}return this.data("pq_value")};p.xmlToArray=function(a,c){var e=c.itemParent,d=c.itemNames,f=[];l(a).find(e).each(function(c,a){var b=l(a),k=[];l(d).each(function(m,F){k.push(b.find(F).text().replace(/\r|\n|\t/g,""))});f.push(k)});return f};p.xmlToJson=function(a,c){var e=c.itemParent,d=c.itemNames,f=[];l(a).find(e).each(function(c,a){for(var b=l(a),k={},m=0,F=d.length;m<F;m++){var s=d[m];k[s]=b.find(s).text().replace(/\r|\n|\t/g,"")}f.push(k)});return f};p.tableToArray=
function(a){var c=[],e=[];a=l(a).children("tbody").children("tr");var d=a.length?l(a[0]):l(),f=1<a.length?l(a[1]):l();d.children("th,td").each(function(a,b){var e=l(b),k=e.html(),e=e.width(),m="left";if(f.length)var F=f.find("td:eq("+a+")").attr("align"),m=F?F:m;c.push({title:k,width:e,dataType:"string",align:m,dataIndx:a})});a.each(function(c,a){if(0!=c){var b=[];l(a).children("td").each(function(k,m){b.push(l.trim(l(m).html()))});e.push(b)}});return{data:e,colModel:c}};p.formatCurrency=function(a){if(isNaN(a))return a;
a=Math.round(100*a)/100;a+="";-1==a.indexOf(".")?a+=".00":a.indexOf(".")+2==a.length&&(a+="0");var c=a.length,e=a.substring(0,c-3);a=a.substring(c-3,c);for(var e=e.match(/\d/g).reverse(),c=[],d=0;d<e.length;d++)0<d&&0==d%3&&c.push(","),c.push(e[d]);c=c.reverse();e=c.join("");return e+a};p.validation={is:function(a,c){if("string"==a||!a)return!0;a=a.substring(0,1).toUpperCase()+a.substring(1,a.length);return this["is"+a](c)},isFloat:function(a){var c=parseFloat(a);return isNaN(c)||c!=a?!1:!0},isInteger:function(a){var c=
parseInt(a);return isNaN(c)||c!=a?!1:!0},isDate:function(a){a=Date.parse(a);return isNaN(a)?!1:!0}};var h=[],a=p.toLetter=function(b){var c=h[b];if(!c){b++;var e=b%26,c=b/26|0,e=e?String.fromCharCode(64+e):(--c,"Z"),c=c?a(c-1)+e:e;b--;h[b]=c}return c};p.generateData=function(b,c){for(var e=[],d=0;d<c;d++)e[d]=a(d);for(var f=[],d=0;d<b;d++)for(var g=f[d]=[],l=0;l<c;l++)g[l]=e[l]+(d+1);return f}})(jQuery);
(function(l){function p(c,a,b){return c?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+a+"' class='panel panel-default "+b+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+a+"'><span class='ui-icon ui-icon-"+b+"'></span></span>")}function h(c,a){c.bind("click keydown",function(c){if("keydown"!=c.type||c.keyCode==l.ui.keyCode.ENTER)return a.call(this,c)})}function a(c,a,b){a[b?"addClass":"removeClass"]("disabled").css("pointer-events",
b?"none":"").attr("tabindex",b?"":"0")}var b={options:{bootstrap:{on:!1,pager:"panel panel-default",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",
strNextPage:"Next Page",strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(b.options,b._regional);b._create=function(){var c=this,a=this.options,b=a.bootstrap,g=b.on;this.listeners={};this.element.addClass("pq-pager "+(g?b.pager:""));this.first=p(g,a.strFirstPage,g?b.firstIcon:"seek-first").appendTo(this.element);h(this.first,function(a){1<c.options.curPage&&c._onChange(a,1)});this.prev=p(g,a.strPrevPage,g?b.prevIcon:"seek-prev").appendTo(this.element);
h(this.prev,function(a){1<c.options.curPage&&c._onChange(a,c.options.curPage-1)});l("<span class='pq-separator'></span>").appendTo(this.element);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(this.element);l("<span class='pq-separator'></span>").appendTo(this.element);this.next=p(g,a.strNextPage,g?b.nextIcon:"seek-next").appendTo(this.element);h(this.next,function(a){c.options.curPage<c.options.totalPages&&c._onChange(a,c.options.curPage+1)});this.last=p(g,a.strLastPage,g?
b.lastIcon:"seek-end").appendTo(this.element);h(this.last,function(a){c.options.curPage!==c.options.totalPages&&c._onChange(a,c.options.totalPages)});l("<span class='pq-separator'></span>").appendTo(this.element);this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(this.element);this.$refresh=p(g,a.strRefresh,g?b.refreshIcon:"refresh").appendTo(this.element);h(this.$refresh,function(a){if(!1===c._trigger("beforeRefresh",a))return!1;c._trigger("refresh",a)});l("<span class='pq-separator'></span>").appendTo(this.element);
this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(this.element);this._refresh()};b._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};b._setOption=function(c,a){if("curPage"==c||"totalPages"==c)a=parseInt(a);this._super(c,a)};b._setOptions=function(){this._super.apply(this,arguments);this._refresh()};l.widget("paramquery.pqPager",b);window.pqPager=function(c,a){return l(c).pqPager(a).data("paramqueryPqPager")};var c=l.paramquery;c.pqPager.regional={};c.pqPager.regional.en=
b._regional;b=l.paramquery.pqPager.prototype;b._refreshPage=function(){var c=this;this.pageHolder.empty();for(var a=this.options,b=a.bootstrap,g=a.strPage.split(" "),q=[],n=0,k=g.length;n<k;n++){var m=g[n];"{0}"==m?q.push("<input type='text' tabindex='0' class='",b.on?"":"ui-corner-all","' />"):"{1}"==m?q.push("<span class='total'></span>"):q.push("<span>",m,"</span>")}b=q.join("");b=l(b).appendTo(this.pageHolder);this.page=b.filter("input").bind("change",function(k){var m=l(this),b=m.val();if(isNaN(b)||
1>b)return m.val(a.curPage),!1;b=parseInt(b);if(b>a.totalPages||!1===c._onChange(k,b))return m.val(a.curPage),!1});this.$total=b.filter("span.total")};b._onChange=function(c,a){if(!1===this._trigger("beforeChange",c,{curPage:a})||!1===this._trigger("change",c,{curPage:a}))return!1;this.option({curPage:a})};b._refresh=function(){this._refreshPage();var c=this,b=this.options,f=b.bootstrap;this.rPPHolder.empty();if(b.strRpp){var g=b.rPPOptions,q=b.strRpp;if(-1!=q.indexOf("{0}")){for(var f=["<select class='",
f.on?"":"ui-corner-all","'>"],n=0,k=g.length;n<k;n++){var m=g[n];f.push('<option value="',m,'">',m,"</option>")}f.push("</select>");g=f.join("");q=q.replace("{0}","</span>"+g);q="<span>"+q+"<span class='pq-separator'></span>"}else q="<span>"+q+"</span><span class='pq-separator'></span>";this.$rPP=l(q).appendTo(this.rPPHolder).filter("select").val(b.rPP).change(function(k){var m=l(this),a=m.val();if(!1===c._trigger("beforeChange",k,{rPP:a}))return m.val(c.options.rPP),!1;!1!==c._trigger("change",k,
{rPP:a})&&(c.options.rPP=a)})}q=b.bootstrap.on;g=b.curPage>=b.totalPages;a(q,this.next,g);a(q,this.last,g);g=1>=b.curPage;a(q,this.first,g);a(q,this.prev,g);this.page.val(b.curPage);this.$total.text(b.totalPages);0<this.options.totalRecords?(q=b.rPP,g=b.curPage,f=b.totalRecords,n=g*q,n>f&&(n=f),b=b.strDisplay,b=b.replace("{0}",(g-1)*q+1),b=b.replace("{1}",n),b=b.replace("{2}",f),this.$msg.html(b)):this.$msg.html("")};b.getInstance=function(){return{pager:this}};b._trigger=l.paramquery._trigger;b.on=
c.on;b.one=c.one;b.off=c.off})(jQuery);
(function(l){function p(a,c){return a?"<div class='"+c+"'></div>":"<div class='ui-icon ui-icon-"+c+"'></div>"}var h={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();
this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(a,c){"disabled"==a?(this._super(a,c),!0==c?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==a?(this._super(a,c),this._createLayout()):"ratio"==a?0<=c&&1>=c&&this._super(a,c):this._super(a,c)},_setOptions:function(){this._super.apply(this,arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",h);window.pqScrollBar=function(a,c){return l(a).pqScrollBar(c).data("paramqueryPqScrollBar")};
h=l.paramquery.pqScrollBar.prototype;h._createLayout=function(){var a=this,c=this.options,e=c.bootstrap,d=e.on,f=c.direction,g=this.eventNamespace,q=c.theme,n=this.element.empty();"vertical"==f?(n.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),q?(n.addClass("pq-sb-vert-t"),n[0].innerHTML=["<div class='top-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-top","'>",p(d,d?e.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",d?e.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",
d?"":"ui-state-default ui-corner-bottom","'>",p(d,d?e.down:"triangle-1-s"),"</div>"].join("")):(n.addClass("pq-sb-vert-wt"),n[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):(n.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),
q?(n.addClass("pq-sb-horiz-t"),n[0].innerHTML=["<div class='left-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-left","'>",p(d,d?e.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",d?e.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",d?"":"ui-state-default ui-corner-right","'>",p(d,d?e.right:"triangle-1-e"),"</div>"].join("")):(n.addClass("pq-sb-horiz-wt"),n.width(this.width),n[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));
n.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(k){if(!c.disabled&&!a.$slider.is(":hidden"))if(l(document).off("."+g).on("mouseup."+g,function(k){a._mouseup(k)}),"vertical"==f){var m=k.pageY,F=a.element.offset().top,s=F+c.length,e=a.$slider,d=e.offset().top,n=e.height(),e=d+n;m<d&&m>F+17?a._setTimerPageLeft(m,n,k,0):m>e&&m<s-17&&a._setTimerPageRight(m,n,k,0)}else m=k.pageX,F=a.element.offset().left,s=F+c.length,d=a.$slider.offset().left,e=d+a.$slider.width(),m<d&&
m>F+17?(a.$slider.css("left",m-a.element.offset().left),a._updateCurPosAndTrigger(k)):m>e&&m<s-17&&(a.$slider.css("left",m-a.element.offset().left-a.$slider.width()),a._updateCurPosAndTrigger(k))});e=this.$slider=l("div.pq-sb-slider",this.element);e.attr("tabindex","0");this._bindSliderEvents(e);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(k){if(!a.options.disabled)return a.decr_cur_pos(k),!1}).mousedown(function(k){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=
setInterval(function(){a.decr_cur_pos(k)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(k){a._mouseup(k)});this.$bottom_btn=l("div.bottom-btn,div.right-btn",this.element).click(function(k){if(!a.options.disabled)return a.incr_cur_pos(k),!1}).mousedown(function(k){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.incr_cur_pos(k)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(k){a._mouseup(k)});this.refresh()};
var a=0;h._setTimerPageLeft=function(b,c,e,d){var f=this,g=f.options;this.mousedownTimeout=window.setTimeout(function(){if(b>=f.$slider.offset().top)f._mouseup();else{f._pageLeft(e);var d=a?0:g.timeout;a++;f._setTimerPageLeft(b,c,e,d)}},d)};h._setTimerPageRight=function(b,c,e,d){var f=this;this.mousedownTimeout=window.setTimeout(function(){if(b<=f.$slider.offset().top+c)f._mouseup();else{f._pageRight(e);var d=a?0:f.options.timeout;a++;f._setTimerPageRight(b,c,e,d)}},d)};h._bindSliderEvents=function(a){var c=
this,e="x";"vertical"==this.options.direction&&(e="y");a.draggable({axis:e,helper:function(a,b){c._setDragLimits();return this},start:function(a){c.topWhileDrag=null;c.dragging=!0},drag:function(a){c.dragging=!0;var b=c.options.pace;"optimum"==b?c._setNormalPace(a):"fast"==b&&c._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=c.options.pace&&c._updateCurPosAndTrigger(a);c.dragging=!1;c.refresh()}}).on("keydown.pq-scrollbar",function(a){var b=a.keyCode,e=c.options,h=e.cur_pos,n=e.ratio,k=e.num_eles,
m=l.ui.keyCode;null==c.keydownTimeout&&(c.keydownTimeout=window.setTimeout(function(){b==m.DOWN||b==m.RIGHT?c.incr_cur_pos(a):b==m.UP||b==m.LEFT?c.decr_cur_pos(a):b==m.HOME?e.steps?0<h&&(e.cur_pos=0,c.updateSliderPos(),c.scroll(a)):0<n&&(e.ratio=0,c.updateSliderPos(),c.drag(a)):b==m.END?e.steps?h<k&&(e.cur_pos=k,c.updateSliderPos(),c.scroll(a)):1>n&&(e.ratio=1,c.updateSliderPos(),c.drag(a)):"vertical"==e.direction&&(b==m.PAGE_DOWN?c._pageRight(a):b==m.PAGE_UP&&c._pageLeft(a));c.keydownTimeout=null},
0));if(b==m.DOWN||b==m.RIGHT||b==m.UP||b==m.LEFT||b==m.PAGE_DOWN||b==m.PAGE_UP||b==m.HOME||b==m.END)return a.preventDefault(),!1})};h.decr_cur_pos=function(a){var c=this.options;if(c.steps)0<c.cur_pos&&(c.cur_pos--,this.updateSliderPos(),this.scroll(a));else if(0<c.ratio){var e=c.ratio-1/(c.num_eles-1);0>e&&(e=0);c.ratio=e;this.updateSliderPos();this.drag(a)}};h.incr_cur_pos=function(a){var c=this.options;if(c.steps)c.cur_pos<c.num_eles-1&&c.cur_pos++,this.updateSliderPos(),this.scroll(a);else{if(1>
c.ratio){var e=c.ratio+1/(c.num_eles-1);1<e&&(e=1);c.ratio=e}this.updateSliderPos();this.drag(a)}};h._mouseup=function(b){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};h._setDragLimits=function(){var a=this.options;if("vertical"==a.direction){var c=this.element.offset().top+17,a=c+a.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,c,0,a])}else c=
this.element.offset().left+17,a=c+a.length-34-this.slider_length,this.$slider.draggable("option","containment",[c,0,a,0])};h._validateCurPos=function(){var a=this.options;a.cur_pos>=a.num_eles&&(a.cur_pos=a.num_eles-1);0>a.cur_pos&&(a.cur_pos=0)};h._updateSliderPosRatio=function(){var a=this.options,c=a.direction,e=a.ratio,d=this.$slider[0],a=a.length-34-this.slider_length;if(null==e)throw"updateSliderPosRatio ratio N/A";e=e*a+17;"vertical"==c?d.style.top=e+"px":d.style.left=e+"px"};h._updateSliderPosCurPos=
function(){var a=this.options,c=this.$slider[0],e=this.scroll_space*a.cur_pos/(a.num_eles-1);"vertical"==a.direction?c.style.top=17+e+"px":c.style.left=17+e+"px"};h.updateSliderPos=function(){var a=this.options;if(void 0===a.steps)throw"updateSliderPos. steps N/A";a.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};h.scroll=function(a){var c=this.options;this._trigger("scroll",a,{cur_pos:c.cur_pos,num_eles:c.num_eles})};h.drag=function(a){this._trigger("drag",a,{ratio:this.options.ratio})};
h._pageRight=function(a){this._trigger("pageRight",a,null)};h._pageLeft=function(a){this._trigger("pageLeft",a,null)};h._setSliderBgLength=function(){var a=this.options,c=a.theme,e=this.$slider,d=a.length,d=Math.round(((d-34)*d/(40*a.num_eles+d)-14)/2);1>d&&(d=1);var f=14+2*d;this.scroll_space=a.length-34-f;if(f!==this.slider_length)if(this.slider_length=f,a="vertical"===a.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},c)e[a.dim](f-2);else l(a.cls,this.element)[a.dim](d),
e[a.dim](f)};h._updateCurPosAndTrigger=function(a,c){var e=this.options,d=e.direction,f=this.$slider;null==c&&(c=parseInt(f[0].style["vertical"===d?"top":"left"]));d=(c-17)/(e.length-34-this.slider_length);if(e.steps){if(d*=e.num_eles-1,d=Math.round(d),e.cur_pos!=d){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<c&&e.cur_pos>d||this.topWhileDrag>c&&e.cur_pos<d))return;this.topWhileDrag=c}this.options.cur_pos=d;this.scroll(a)}}else e.ratio=d,this.drag(a)};h._setNormalPace=function(a){this.timer&&
(window.clearInterval(this.timer),this.timer=null);var c=this,e=this.options.direction;c.timer=window.setInterval(function(){var d=parseInt(c.$slider[0].style["vertical"===e?"top":"left"]);c.prev_top===d&&(c._updateCurPosAndTrigger(a,d),window.clearInterval(c.timer),c.timer=null);c.prev_top=d},20)};h.refresh=function(){var a=this.options,c=this.$slider[0],e=this.element;1>=a.num_eles?e[0].style.display="none":(e[0].style.display="",this._validateCurPos(),this.dragging||(e["vertical"===a.direction?
"height":"width"](a.length),this._setSliderBgLength(),c.style.display=4>this.scroll_space||1>=a.num_eles?"none":""),this.updateSliderPos())};h._trigger=l.paramquery._trigger})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(p,h){var a=l(p);"static"===a.css("position")&&a.css("position","relative");var b=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(a);b[0].data="about:blank";b.css("opacity","0");for(var c=0;c<a.length;c++)l(b[c].contentWindow).on("resize",function(a){h()})}})(jQuery);
(function(l){function p(k){return"<span class='panel panel-default glyphicon glyphicon-"+k+"' ></span>"}function h(k){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+k+"'></span></span>"}var a=function(){};a.prototype.belongs=function(k){if(k.target==this.that.element[0])return!0};var b=l.paramquery;b.cClass=a;var c=function(k){this.that=k;var m=this;if(null!=(this.options=k.options).postRenderInterval)k.on("refresh",function(){m.prColDef.length&&m.postRenderAll()}).on("refreshRow",
function(k,a){m.prColDef.length&&m.postRenderRow(a)}).on("refreshCell",function(k,a){a.column.postRender&&m.postRenderRow(a)}).on("refreshColumn",function(k,a){a.column.postRender&&m.setTimerPostRender(0,a.colIndx,a.column)})};b.cGenerateView=c;a=c.prototype=new a;a.generateView=function(k){k=k||{};var m=this.that,a=m.options,c=a.scrollModel.smooth,e="flex"===a.width,d="flex"===a.height,f=a.cls,g=f.cont_inner,f=f.cont_inner_b,n,l,h=m.initH,q=m.finalH,p=a.groupModel,z=m.pqpanes;if(k.$cont)n=this._generateTables(null,
null,k),n=n.replace("%style%",""),p=k.$cont,p.empty(),p[0].innerHTML=z.v?["<div class='",g,"'>",n,"</div><div class='",g,"'>",n,"</div>"].join(""):["<div class='",g,"'>",n,"</div>"].join(""),a=p.children("div").children("table"),m.tables[0]={$tbl:a,$cont:p};else{n=m.initV;l=m.finalV;var D=p?m.dataGM:m.pdata,p=m.$cont;null!=a.editModel.indices&&m.blurEditor({force:!0});h={pageData:D,initV:n,finalV:l,initH:h,finalH:q,source:k.source};m._trigger("beforeTableView",null,h);n=this._generateTables(n,l,k);
p.empty();0===m.totalVisibleRows?p.append("<div class='"+g+" pq-grid-norows' >"+a.strNoRows+"</div>"):(k=d||e?"style='position:relative;'":"",e="",a.virtualY&&c&&(e="style='"+m.iMouseSelection.getBorderStyle(!0)+"'"),n=n.replace("%style%",e),p[0].innerHTML=z.h&&z.v?["<div class='",g,"'>",n,"</div><div class='",g,"'>",n,"</div><div class='",g," ",f,"'>",n,"</div><div class='",g," ",f,"'>",n,"</div>"].join(""):z.v?["<div class='",g,"' ",k," >",n,"</div><div class='",g,"' >",n,"</div>"].join(""):z.h?
["<div class='",g,"' style='position:static;' >",n,"</div><div class='",g," ",f,"' style='position:static;' >",n,"</div>"].join(""):["<div class='",g,"' ",k," >",n,"</div>"].join(""));m.$tbl=p.children("div").children("table");if(a.scrollModel.flexContent&&m.$tbl[0])b.onResize(m.$tbl[0],function(){var k=m.iRefresh;k.ignoreTResize||k.softRefresh()});this.setPaneEvents();m._trigger("refresh",null,h)}this.setPanes()};a.postRenderRow=function(k){var m=this.that,a=this.prColDef,c=m.iMerge,b=k.rowIndx,
e;null!=k.colIndx&&(a=[{colIndx:k.colIndx,column:k.column}]);for(var d=0,f=a.length;d<f;d++)k=a[d],e=k.column.postRender,k=k.colIndx,c.ismergedCell(b,k)?c.isRootCell(b,k,!0)&&(k=c.getRootCell(b,k),e.call(m,k)):(k=m.normalize({rowIndx:b,colIndx:k}),e.call(m,k))};a.setTimerPostRender=function(k,m,a){var c=this.that,b=this,e=c.pdata,d=function(k){return-1==c.options.postRenderInterval?k():setTimeout(k,0)};e&&e.length&&(b.postRenderTimeoutID=d(function(){var d=c.initV,f=c.options.freezeRows;k<d&&k>=f&&
(k=d);e[k].pq_hidden||b.postRenderRow({column:a,colIndx:m,rowIndx:k+c.rowIndxOffset});k++;k<=c.finalV&&b.setTimerPostRender(k)}))};a.postRenderAll=function(){var k=this.that,m=this,a=k.pdata,c=k.options.postRenderInterval,k=function(k){return-1==c?k():setTimeout(k,c)};a&&a.length&&(clearTimeout(m.postRenderTimeoutID),m.postRenderTimeoutID=k(function(){m.setTimerPostRender(0)}))};a.scrollView=function(){var k=this.that,m=this.options,a=m.virtualY;m.virtualX||"flex"===m.width||k.hscroll.drag();a||k.vscroll.drag()};
a.setPaneEvents=function(){var k=this.that,m=k.pqpanes,a=k.$cont.children("div"),c=k.iMouseSelection;if((k=k.$tbl)&&k.length)if(m.h&&m.v){var m=l(a[0]),k=l(a[1]),b=l(a[2]),a=l(a[3]);m.on("scroll",function(k){this.scrollLeft=this.scrollTop=0});k.on("scroll",function(k){this.scrollTop=0;this.scrollLeft=c.getScrollLeft(!0)});b.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)})}else if(m.v)m=
l(a[0]),a=l(a[1]),m.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)});else if(m.h)m=l(a[0]),a=l(a[1]),m.on("scroll",function(k){this.scrollTop=0;this.scrollLeft=c.getScrollLeft(!0)}),a.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)});else a.on("scroll",function(k){this.scrollTop=c.getScrollTop(!0);this.scrollLeft=c.getScrollLeft(!0)})};
a.setPanes=function(){var k=this.that,m=k.pqpanes,a=k.$cont.children("div"),c=k.iRefresh,b=k.$tbl,e=k.options,d=parseInt(e.freezeCols),d=k.calcWidthCols(-1,d)+1,f="flex"===e.width?"":c.getEContWd();if(k.tables.length){var n=k.tables[0].$tbl,g=k.tables[0].$cont,h=n.parent("div");m.v?(l(h[0]).css({width:d}),l(h[1]).css({left:d,width:f-d}),l(n[1]).css({left:-1*d})):l(h[0]).css({width:f});g.height(n[0].scrollHeight-1);c.setContHeight()}if(b&&b.length)if(c="flex"!==e.height||e.maxHeight?c.getEContHt():
"",m.h&&m.v){var n=l(a[0]),g=l(a[1]),h=l(b[1]),q=l(a[2]),p=l(b[2]),a=l(a[3]),z=l(b[3]),b=k.calcHeightFrozenRows();n.css({width:d,height:b});g.css({left:d,width:f-d,height:b});h.css({left:-1*d});q.css({width:d,top:b,height:c-b});p.css({marginTop:-(b+1)});a.css({left:d,width:f-d,top:b,height:c-b});z.css({marginTop:-(b+1),left:-1*d})}else m.v?(n=l(a[0]),a=l(a[1]),b=l(b[1]),n.css({width:d,height:c}),a.css({left:d,width:f-d,height:c}),b.css({left:-1*d})):m.h?(n=l(a[0]),a=l(a[1]),g=l(b[1]),b=k.calcHeightFrozenRows(),
n.css({height:b,width:f}),a.css({width:f,top:b,height:c-b}),g.css({marginTop:-(b+1)})):a.css({width:f,height:c});e.showHeader&&(m.vH?(k.$header_left.css({width:d}),k.$header_right.css({left:d,width:f-d}),k.$header_right_inner.css({left:-d})):k.$header_left.css({width:f}))};a.createColDefs=function(){for(var k=this.that,m=k.colModel,a=k.initH,c=k.finalH,k=k.options.freezeCols,b=[],e=[],d=0;d<=c;d++){if(d<a&&d>=k&&(d=a,d>c))throw"initH>finalH";var f=m[d];f.hidden||(b.push({column:f,colIndx:d}),f.postRender&&
"function"==typeof f.postRender&&e.push({column:f,colIndx:d}))}this.colDef=b;this.prColDef=e};a._generateTables=function(k,m,a){a=a||{};var c=this.that,b=c.options,e=b.bootstrap,d=b.numberCell,f=b.columnBorders,n=b.rowBorders,g=b.wrap,l=b.groupModel,b=parseInt(b.freezeRows),h=!1,q=0,p=a.other;m=p?a.data.length-1:m;var D=l?!0:!1;a=p?a.data:D?c.dataGM:c.pdata;var C=c.rowIndxOffset;if(p||null!=k&&null!=m){h=(e.on?e.tbody:"")+" pq-grid-table ";f&&(h+="pq-td-border-right ");n&&(h+="pq-td-border-bottom ");
f=["<table %style% class='"+(g?h+"pq-wrap ":h+"pq-no-wrap ")+"' >"];f.push("<tr class='pq-row-hidden'>");d.show&&(g=d.width,f.push("<td style='width:"+g+"px;' ></td>"));h=this.colDef;q=0;for(d=h.length;q<d;q++)g=h[q],n=g.colIndx,g=g.column.outerWidth,f.push("<td style='width:",g,"px;' pq-col-indx='",n,"'></td>");f.push("</tr>");for(q=0;q<=m;q++)q<k&&q>=b&&(q=k),d=a[q],n=D?d.rowIndx-C:q,d&&d.pq_hidden||(h=c.lastFrozenRow===n,l&&null!=d.groupTitle?this._generateTitleRow(l,d,f,h):l&&d.groupSummary?this._generateSummaryRow(l,
d,f,h):(g=d.pq_detail&&d.pq_detail.show,this._generateRow(d,n,f,p,h,g),g&&this._generateDetailRow(d,n,f,p,h)));c.scrollMode=!1;f.push("</table>");return f.join("")}};a.appendRow=function(k){var m=this.that,a=m.pdata,c=m.colModel,b=m.finalV;b+k>a.length&&(k=a.length-b);if(k){if(1<k)throw"noRows > 1";m._trigger("beforeTableView",null,{pageData:a,initV:b,finalV:b,initH:m.initH,finalH:m.finalH,colModel:c});m.refreshRow({rowIndx:b,refresh:!1})}return k};a.prependRow=function(k){var m=this.that,a=m.options.freezeRows,
c=m.calcVisibleRows(m.pdata,0,a),b=m.pdata,e=m.initV,d=m.colModel;if(m._mergeCells){if(c)for(c=0;c<a;c++)m.refreshRow({rowIndxPage:c,refresh:!1});m.refreshRow({rowIndxPage:e+1,refresh:!1})}m._trigger("beforeTableView",null,{pageData:b,initV:e,finalV:e,initH:m.initH,finalH:m.finalH,colModel:d});m.refreshRow({rowIndxPage:e,refresh:!1});return k};a.removeTopRow=function(k){for(var m=this.that,a=m.options.freezeRows,c=m.calcVisibleRows(m.pdata,0,a),b=m.$tbl,e=l([]),d=0;d<b.length;d++)var f=l(b[d]).children("tbody").children("tr:gt(0)").slice(c,
k+c),e=e.add(f);e.remove();if(m._mergeCells){if(c)for(d=0;d<a;d++)m.refreshRow({rowIndxPage:d,refresh:!1});m.refreshRow({rowIndxPage:m.initV,refresh:!1})}};a.removeBottomRow=function(k){var m=this.that.$tbl;if(k)for(var a=0;a<m.length;a++)l(m[a]).children("tbody").children("tr:gt(0)").slice(-k).remove()};a._renderCell=function(k,m){var a=this.options,c=k.rowData,b=k.column,e=b.type,d=this.that.readCell(c,b);if(c){void 0!=m?d=m:"checkbox"==e?d="<input type='checkbox' "+(b.cb.check===d?"checked":"")+
" />":"detail"==e&&(a=a.detailModel,d="<div class='ui-icon "+(d&&d.show?a.expandIcon:a.collapseIcon)+"'></div>");if(""===d||void 0==d)d="&nbsp;";return d}};a.renderCell=function(k){var m=this.that,a="",c="",b=this.options;if(m._mergeCells){k=m.iMerge.renderCell(k);if(null==k)return"";a=k.rowspan?" rowspan='"+k.rowspan+"' colspan='"+k.colspan+"' ":"";c=k.style?c+k.style:c}var e=k.rowData,d=k.rowIndxPage,f=k.column,n=k.colIndx,g=f.dataIndx,l=b.freezeCols,h=b.columnBorders,b="pq-grid-cell ",a=a+(" pq-col-indx='"+
n+"' ");"right"==f.align?b+=" pq-align-right":"center"==f.align&&(b+=" pq-align-center");n==l-1&&h&&(b+=" pq-last-frozen-col");(n=f.cls)&&(b=b+" "+n);(n=m.iSelection.dirty?null:e.pq_cellselect)&&n[g]&&(b+=m.iCells.hclass);var p;f.render&&(k.dataIndx=g,k.cellData=e[g],(p=f.render.call(m,k))&&"string"!=typeof p&&(f=p.attr,n=p.cls,l=p.style,a=f?a+f:a,b=n?b+n:b,c=l?c+l:c,p=p.text));(f=e.pq_cellcls)&&(f=f[g])&&(b+=" "+f);if(e=e.pq_cellattr)if(g=e[g]){var m=q(g,m.initV==d),z;for(z in m)a+=" "+z+'="'+m[z]+
'"'}return["<td class='",b,"' ",a,c?" style='"+c+"' ":""," >",this._renderCell(k,p),"</td>"].join("")};a.refreshRow=function(k,m){var a=this.that,c=a.pdata[k];this._generateRow(c,k,m,null,a.lastFrozenRow===k,c.pq_detail&&c.pq_detail.show)};a._generateRow=function(k,m,a,c,b,e){var d="pq-grid-row ";b&&(d+=" pq-last-frozen-row");e&&(d+=" pq-detail-master");var f=this.that,n=this.options;b=n.bootstrap;var g=n.rowInit;e=n.numberCell;var l="",h="",p=f.rowIndxOffset;g&&(g=g.call(f,{rowData:k,rowIndxPage:m,
rowIndx:m+p}))&&(d+=g.cls?" "+g.cls:"",l+=g.attr?" "+g.attr:"",h+=g.style?g.style:"");n.stripeRows&&m/2==parseInt(m/2)&&(d+=" pq-grid-oddRow");k.pq_rowselect&&(d+=f.iRows.hclass);f=k.pq_rowcls;null!=f&&(d+=" "+f);if(f=k.pq_rowattr){var f=q(f),z;for(z in f)l+=" "+z+'="'+f[z]+'"'}a.push("<tr pq-row-indx='",m,"' class='",d,"' ",l," ",h?"style='"+h+"'":""," >");e.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell ",b.on?"":"ui-state-default","'>",c?"&nbsp;":m+1,"</td>"].join(""));k={rowIndx:m+
p,rowIndxPage:m,rowData:k};m=this.colDef;c=0;for(d=m.length;c<d;c++)z=m[c],b=z.colIndx,k.column=z.column,k.colIndx=b,a.push(this.renderCell(k));a.push("</tr>");return a};a={widgetEventPrefix:"pqgrid",_create:function(){var k=this,m=this.options,a=m.dataModel,s=m.bootstrap,e=s.on,d=m.roundCorners&&!e,g=m.ui,h=m.sortModel;m.collapsible||(m.collapsible={on:!1,collapsed:!1});m.flexHeight&&(m.height="flex");m.flexWidth&&(m.width="flex");if(a.sortIndx){h.on=m.sortable;h.type=a.sorting;var q=[],t=a.sortIndx,
a=a.sortDir;if(l.isArray(t)){for(var p=0;p<t.length;p++){var x=a&&a[p]?a[p]:"up";q.push({dataIndx:t[p],dir:x})}h.single=!1}else q.push({dataIndx:t,dir:a?a:"up"}),h.single=!0;h.sorter=q}!1===m.virtualXHeader&&(m.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new c(this);this.iRefresh=new b.cRefresh(this);this.iKeyNav=new n(this);this.iIsValid=new f(this);this.tables=[];this.$tbl=null;this._calcThisColModel();this.iSort=new b.cSort(this);this.iHeader=new b.cHeader(this);this._initTypeColumns();
h=this.element;h.on("scroll"+this.eventNamespace,function(){this.scrollTop=this.scrollLeft=0});s=e?s.grid:g.grid;q=e?"":g.header_o;t=e?"":g.bottom;e=e?"":g.top;h.empty().addClass("pq-grid "+s+" "+(d?" ui-corner-all":"")).html(["<div class='pq-grid-top ",e," ",d?" ui-corner-top":"","'><div class='pq-grid-title",d?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",q,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",
t," ",d?" ui-corner-bottom":"","'><div class='pq-grid-footer'>&nbsp;</div></div>"].join(""));this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",h);m.showTop||this.$top.css("display","none");this.$title=l("div.pq-grid-title",h);m.showTitle||this.$title.css("display","none");this.$toolbar=l("div.pq-grid-toolbar",h);d=this.$grid_center=l("div.pq-grid-center",h).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",
this.$grid_center).on("scroll",function(){this.scrollLeft=this.scrollTop=0});this.$bottom=l("div.pq-grid-bottom",h);this.$footer=l("div.pq-grid-footer",h);this.$cont_o=l(".pq-grid-cont-outer",d);e=this.$cont=l("div.pq-grid-cont",d);l(window).bind("resize"+k.eventNamespace+" orientationchange"+k.eventNamespace,function(m,a){k.onWindowResize(m,a)});e.on("click",".pq-grid-cell,.pq-grid-number-cell",function(m){if(!0!==l.data(m.target,k.widgetName+".preventClickEvent")&&l(m.target).closest(".pq-grid")[0]==
k.element[0])return k._onClickCell(m)});e.on("click","tr.pq-grid-row",function(m){if(!0!==l.data(m.target,k.widgetName+".preventClickEvent")&&l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onClickRow(m)});e.on("contextmenu","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onRightClickCell(m)});e.on("contextmenu","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onRightClickRow(m)});e.on("dblclick","td.pq-grid-cell",
function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onDblClickCell(m)});e.on("dblclick","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onDblClickRow(m)});e.on("blur",function(){k.onblur()});e.on("focus",function(){k.onfocus()});e.on("mousedown",function(m){var a=l(m.target);if(a.closest(".pq-grid")[0]==k.element[0]){var c;c=a.closest(".pq-grid-cell");if(c.length&&(m.currentTarget=c[0],c=k._onCellMouseDown(m),!1===c))return!1;a=a.closest(".pq-grid-row");
return a.length&&(m.currentTarget=a[0],c=k._onRowMouseDown(m),!1===c)?!1:k._onContMouseDown(m)}});e.on("mouseenter","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onCellMouseEnter(m,l(this))});e.on("mouseenter","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onRowMouseEnter(m,l(this))});e.on("mouseleave","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onCellMouseLeave(m,
l(this))});e.on("mouseleave","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==k.element[0])return k._onRowMouseLeave(m,l(this))});d.bind("mousewheel DOMMouseScroll",function(m){return k._onMouseWheel(m)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(d);g=l("<div class='pq-vscroll'></div>").appendTo(d);this.prevVScroll=0;e=m.scrollModel;void 0===e.lastColumn&&m.virtualX&&(e.lastColumn="auto");this.vscroll=pqScrollBar(g,{pace:e.pace,theme:e.theme,
bootstrap:m.bootstrap,steps:m.virtualY&&!e.smooth,direction:"vertical",cur_pos:0,pageRight:function(){k.iKeyNav.pageDown()},pageLeft:function(){k.iKeyNav.pageUp()},drag:function(m,a){k.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(m,a){k.iRefresh.refreshVscroll(a)}});g=l("<div class='pq-hscroll'></div>").appendTo(d);"flex"===m.height&&g.css("position","relative");this.hscroll=pqScrollBar(g,{direction:"horizontal",pace:e.pace,bootstrap:m.bootstrap,theme:e.theme,steps:m.virtualX&&
!e.smooth,cur_pos:0,drag:function(m,a){k.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){m.virtualX&&!m.scrollModel.smooth&&k.refresh()}});m.selectionModel["native"]||this.disableSelection();d.bind("keydown.pq-grid",function(m){l(m.target).closest(".pq-grid")[0]==k.element[0]&&k._onKeyPressDown(m)});this._refreshTitle();this.iRows=new b.cRows(this);this.iCells=new b.cCells(this);this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=
new b.cResizeColumns(this);this._mouseInit()},_mouseDown:function(k){var m=this;if(l(k.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){m._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(k){return m._mousePQUp(k)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(k)},destroy:function(){this._trigger("destroy");this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&
clearTimeout(this.autoResizeTimeout);for(var k in this)delete this[k];l.fragments={}},_setOption:function(k,m){var a=this.options,c=a.dataModel;if("height"===k)"flex"===m?(c=this.vscroll,m&&c&&c.widget().hasClass("pq-sb-vert")&&(a.virtualY?c.option("cur_pos",0):c.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),this._super(k,m);else if("width"===k&&"flex"==m)this._super(k,m),c=this.hscroll,m&&c&&c.widget().hasClass("pq-sb-horiz")&&
(a.virtualX?c.option("cur_pos",0):c.option("ratio",0));else if("title"==k)this._super(k,m),this._refreshTitle();else if("roundCorners"==k)this._super(k,m),m?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==k)this._super(k,m),this.hscroll.option("steps",m);else if("virtualY"==k)this._super(k,
m),this.vscroll.option("steps",m);else if("freezeCols"==k)m=parseInt(m),!isNaN(m)&&0<=m&&m<=this.colModel.length-2&&this._super(k,m);else if("freezeRows"==k)m=parseInt(m),!isNaN(m)&&0<=m&&this._super(k,m);else if("resizable"==k)this._super(k,m),this._refreshResizable();else if("draggable"==k)this._super(k,m),this._refreshDraggable();else if("scrollModel"==k)this._super(k,m);else if("dataModel"==k)m.data!==c.data&&c.dataUF&&c.dataUF.length&&(c.dataUF.length=0),this._super(k,m);else if("groupModel"==
k){if(null==m)for(var a=c.data,c=0,b=a.length;c<b;c++)a[c].pq_hidden=!1;this._super(k,m)}else"pageModel"==k?this._super(k,m):"selectionModel"===k?this._super(k,m):"colModel"===k||"columnTemplate"==k?(this._super(k,m),this._calcThisColModel()):"disabled"===k?(this._super(k,m),!0===m?this._disable():this._enable()):"numberCell"===k?(this._super(k,m),this.iRefresh.decidePanes()):"strLoading"===k?(this._super(k,m),this._refreshLoadingString()):"showTop"===k?(this._super(k,m),!0===m?this.$top.css("display",
""):this.$top.css("display","none")):"showTitle"===k?(this._super(k,m),!0===m?this.$title.css("display",""):this.$title.css("display","none")):"showToolbar"===k?(this._super(k,m),!0===m?this.$toolbar.css("display",""):this.$toolbar.css("display","none")):"toolbar"==k?(this._super(k,m),this.$toolbar.remove(),this._super(k,m),this._createToolbar()):"collapsible"===k?(this._super(k,m),this._createCollapse()):"showBottom"===k?(this._super(k,m),!0===m?this.$bottom.css("display",""):this.$bottom.css("display",
"none")):this._super(k,m)}};a.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-striped table-condensed table-bordered",grid:"panel panel-default",header_active:"active"},ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",
cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,
onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"100%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",
resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!1},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,
virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};l.extend(a.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strLoading:"Loading",strNextResult:"Next Result",strNoRows:"No rows to display.",strNothingFound:"Nothing found",strPrevResult:"Previous Result",strSearch:"Search",strSelectedmatches:"Selected {0} of {1} match(es)"});l.widget("paramquery._pqGrid",l.ui.mouse,a);a=b._pqGrid.prototype;a.readCell=function(k,m,a,c,b){var e=m.dataIndx;if(!a||!a.isHidden(c,b)){if(m.nested){e=e.split(".");
m=0;for(a=e.length;m<a&&(k=k[e[m]],k);m++);return k}return k[e]}};a.saveCell=function(k,m,a){var c=m.dataIndx;if(m.nested){m=c.split(".");for(var c=k,b=0,e=m.length;b<e;b++){var d=m[b];b==e-1?c[d]=a:c=k[d]=k[d]||{}}}else k[c]=a};a._destroyResizable=function(){this.element.data("resizable")&&this.element.resizable("destroy")};a._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};a._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};a._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};a.collapse=function(k){var m=this,a=this.element,c=this.options.collapsible,
b=c.$collapse.children("span"),e=function(){a.css("overflow","hidden");b.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");m.$toolbar.pqToolbar("disable");c.collapsed=!0;c._collapsed=!0;c.animating=!1;m._trigger("collapse")};k=k?k:{};if(c._collapsed)return!1;c.htCapture=a.height();!1===k.animate?(a.height(23),e()):(c.animating=!0,a.animate({height:"23px"},function(){e()}))};a.expand=function(k){var m=this,a=this.element,
c=this.options.collapsible,b=c.htCapture,e=c.$collapse.children("span"),d=function(){a.css("overflow","");c._collapsed=!1;c.collapsed=!1;m._refreshResizable();c.refreshAfterExpand&&m.refresh();e.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");m.$toolbar.pqToolbar("enable");c.animating=!1;m._trigger("expand")};k=k?k:{};if(!1===c._collapsed)return!1;!1===k.animate?(a.height(b),d()):(c.animating=!0,a.animate({height:b},function(){d()}))};a._createCollapse=function(){var k=
this,m=this.$top,a=this.options,c=a.collapsible;c.$stripe||(m=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(m),c.$stripe=m);c.on?c.$collapse||(c.$collapse=l(a.bootstrap.on?p("collapse-down"):h("circle-triangle-n")).appendTo(c.$stripe).click(function(m){c.collapsed?k.expand():k.collapse()})):c.$collapse&&(c.$collapse.remove(),delete c.$collapse);c.collapsed&&!c._collapsed?k.collapse({animate:!1}):!c.collapsed&&c._collapsed&&k.expand({animate:!1});c.toggle?c.$toggle||(c.$toggle=l(a.bootstrap.on?
p("fullscreen"):h("arrow-4-diag")).prependTo(c.$stripe).click(function(m){k.toggle()})):c.$toggle&&(c.$toggle.remove(),delete c.$toggle)};a.toggle=function(){var k=this.options,m=k.collapsible,a=this.element,c,b=this._maxim;c=b?"min":"max";var e=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:c}))return!1;"min"==c?(k=b.eleObj,m=b.docObj,this.option({height:k.height,width:k.width,maxHeight:k.maxHeight}),a.css({position:k.position,left:k.left,top:k.top,margin:k.margin,zIndex:k.zIndex}),
e.css({height:"",width:"",overflow:m.overflow,position:m.position}),l("html").css({overflow:"visible"}),window.scrollTo(m.scrollLeft,m.scrollTop),this._maxim=null):(k={height:k.height,width:k.width,position:a.css("position"),left:a.css("left"),top:a.css("top"),margin:a.css("margin"),zIndex:a.css("zIndex"),maxHeight:k.maxHeight},this.option({height:"100%",width:"100%",maxHeight:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},m.css)),m={overflow:e.css("overflow"),scrollLeft:l(window).scrollLeft(),
scrollTop:l(window).scrollTop(),position:e.css("position")},l(document.body).css({height:0,width:0,overflow:"hidden",position:"static"}),l("html").css({overflow:"hidden"}),window.scrollTo(0,0),this._maxim={eleObj:k,docObj:m});this._trigger("toggle",null,{state:c});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:c})};a._mouseCapture=function(k){var m=this.options;return m.virtualX&&m.virtualY&&!m.scrollModel.smooth||!k.target?!1:l(k.target).closest(".pq-grid")[0]==
this.element[0]?(k=m.swipeModel,!1==k.on||"touch"==k.on&&!l.support.touch?!1:!0):!1};a._saveDims=function(){var k=this.$tbl,m=this.$tbl_header;if(k)for(var a=0;a<k.length;a++){var c=k[a],b=l(c);b.data("offsetHeight",Math.round(c.offsetHeight)-1);b.data("scrollWidth",Math.round(c.scrollWidth))}if(m)for(a=0;a<m.length;a++)c=m[a],k=l(c).parent(),k.data("offsetHeight",Math.round(c.offsetHeight)),k.data("scrollWidth",Math.round(c.scrollWidth))};a._mousePQUp=function(k){l(document).unbind("mouseup"+this.eventNamespace,
this._mousePQUpDelegate);this._trigger("mousePQUp",k,null)};a._mouseStart=function(k){this.blurEditor({force:!0});return!0};a._mouseDrag=function(k){return!1==this._trigger("mouseDrag",k,null)?!1:!0};a._mouseStop=function(k){return!1==this._trigger("mouseStop",k,null)?!1:!0};var e,d;a.onWindowResize=function(k,m){var a=this.options,c=this.element,b=c.parent();if(m){var f=m.$grid;if(f&&(f==c||0==c.closest(f).length))return}if(b.length&&(b[0]==document.body||"fixed"==c.css("position")?(c=window.innerHeight?
window.innerHeight:l(window).height(),b=l(window).width()):(c=b.height(),b=b.width()),null==e||c!=e||b!=d)&&(e=c,d=b,!(l.support.touch&&a.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")))){var g=this,a=a.autoSizeInterval,a=void 0===a?0:a;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=window.setTimeout(function(){g._refreshAfterResize();delete g.autoResizeTimeout},a)}};a._onMouseWheel=function(k){this._saveDims();
var m=this.options,a=0,c=!1;k=k.originalEvent;var b=k.wheelDeltaX,e=k.wheelDeltaY,d=k.wheelDelta;if(b&&Math.abs(b)>Math.abs(e)){if("flex"==m.width)return!0;c=!0;a=b/120}else if(d){if(!this.iRefresh.vscroll)return!0;a=d/120}else if(k.detail){if(!this.iRefresh.vscroll)return!0;a=-1*k.detail/3}a*=3;k=c?this.hscroll:this.vscroll;e=parseInt(k.option("cur_pos"));b=parseInt(k.option("num_eles"));if(!m.scrollModel.smooth&&(c&&m.virtualX||!c&&m.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":
"floor"](a);m=e-a;0>m?m=0:m>b-1&&(m=b-1);if(m==e)return!0;k.option("cur_pos",e-a);k.scroll()}else{m=k.option("ratio");a=m-a/(b-1);1<a?a=1:0>a&&(a=0);if(m==a)return!0;k.option("ratio",a);k.drag()}return!1};a._onDblClickCell=function(k){var m=l(k.currentTarget),a=this.getCellIndices({$td:m}),c=a.rowIndxPage,b=c+this.rowIndxOffset,a=a.colIndx;if(null!=a){if(!1==this._trigger("cellDblClick",k,{$td:m,rowIndxPage:c,rowIndx:b,colIndx:a,column:this.colModel[a],rowData:this.pdata[c]}))return!1;1<this.options.editModel.clicksToEdit&&
this.isEditableRow({rowIndx:b})&&this.isEditableCell({colIndx:a,rowIndx:b})&&this.editCell({rowIndxPage:c,colIndx:a})}};a._onClickCont=function(k){};a._onClickRow=function(k){var m=l(k.currentTarget),a=parseInt(m.attr("pq-row-indx")),c=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowClick",k,{$tr:m,rowIndxPage:a,rowIndx:c,rowData:this.pdata[a]}))return!1};a._onRightClickRow=function(k){var m=l(k.currentTarget),a=parseInt(m.attr("pq-row-indx")),c=a+this.rowIndxOffset;if(!isNaN(a)&&!1==this._trigger("rowRightClick",
k,{$tr:m,rowIndxPage:a,rowIndx:c,rowData:this.pdata[a]}))return!1};a._onDblClickRow=function(k){var m=l(k.currentTarget),a=parseInt(m.attr("pq-row-indx")),c=this.getRowIndxOffset();if(!1==this._trigger("rowDblClick",k,{$tr:m,rowIndxPage:a,rowIndx:a+c,rowData:this.pdata[a]}))return!1};a.getValueFromDataType=function(k,m,a){if("date"==m)return m=Date.parse(k),isNaN(m)?"":a?m:k;if("object"==m)return k;if("integer"==m)m=parseInt(k);else if("float"==m)m=parseFloat(k);else return"bool"==m?(m=l.trim(k).toLowerCase(),
0==m.length?null:"true"==m||"yes"==m||"1"==m?!0:"false"==m||"no"==m||"0"==m?!1:Boolean(m)):l.trim(k);return isNaN(m)||null==m?null==k?k:null:m};var f=function(k){this.that=k},g=f.prototype;g._isValidCell=function(k){var m=this.that,a=k.column,c=a.validations;if(!c||!c.length)return{valid:!0};var b=k.value,e=a.dataType,d=function(k){return m.getValueFromDataType(k,e,!0)};k=k.rowData;if(!k)throw"rowData required.";for(var f=0;f<c.length;f++){var g=c[f],n=g.type,h=!1,l=g.msg,q=g.value;if(!1!==g.on&&
(null==b&&"function"!=typeof n?h=!1:"minLen"==n?(b=d(b),q=d(q),b.length>=q&&(h=!0)):"nonEmpty"==n?null!=b&&""!==b&&(h=!0):"maxLen"==n?(b=d(b),q=d(q),b.length<=q&&(h=!0)):"gt"==n?(b=d(b),q=d(q),b>q&&(h=!0)):"gte"==n?(b=d(b),q=d(q),b>=q&&(h=!0)):"lt"==n?(b=d(b),q=d(q),b<q&&(h=!0)):"lte"==n?(b=d(b),q=d(q),b<=q&&(h=!0)):"neq"==n?(b=d(b),q=d(q),b!==q&&(h=!0)):"regexp"==n?(new RegExp(q)).test(b)&&(h=!0):"function"==typeof n?(q={column:a,value:b,rowData:k,msg:l},!1==n.call(m,q)?(h=!1,q.msg!=l&&(l=q.msg)):
h=!0):h=!0,!h))return{valid:!1,msg:l,column:a,warn:g.warn,dataIndx:a.dataIndx,validation:g}}return{valid:!0}};g.isValidCell=function(k){var m=this.that,a=k.rowData,c=k.rowIndx,b=k.value,e=k.valueDef,d=k.column,f=k.focusInvalid,g=m.options,n=g.bootstrap,h=k.allowInvalid,q=d.dataIndx,p=g.validation,z=g.warning,D=g.editModel,C=D.invalidClass,E=D.warnClass,D=document.activeElement;if(k.checkEditable&&!1==m.isEditableCell({rowIndx:c,dataIndx:q}))return{valid:!0};k=this._isValidCell({column:d,value:b,rowData:a});
var b=k.valid,d=k.warn,H=k.msg;if(b)m.data({rowData:a,dataIndx:q,data:"pq_valid"})&&(m.removeClass({rowData:a,rowIndx:c,dataIndx:q,cls:E+" "+C}),m.removeData({rowData:a,dataIndx:q,data:"pq_valid"}));else var p=l.extend({},d?z:p,k.validation),I=p.css,J=p.cls,M=p.icon,P=p.style;if(h||d){if(b)return{valid:!0};m.addClass({rowData:a,rowIndx:c,dataIndx:q,cls:d?E:C});m.data({rowData:a,dataIndx:q,data:{pq_valid:{css:I,icon:M,style:P,msg:H,cls:J}}});return k}if(!b){if(null==c&&(a=m.getRowIndx({rowData:a,dataUF:!0}),
c=a.rowIndx,null==c||a.uf))return k.uf=a.uf,k;if(f){var L;if(!e)m.goToPage({rowIndx:c}),c={rowIndx:c,dataIndx:q},c=m.normalize(c),L=m.getCell(c),m["cell"==g.selectionModel.type?"setSelection":"scrollCell"](c),m.focus(c);else if(l(D).hasClass("pq-editor-focus")&&(e=g.editModel.indices)){g=e.rowIndx;e=e.dataIndx;if(null!=c&&c!=g)throw"incorrect usage of isValid rowIndx: "+c;if(q!=e)throw"incorrect usage of isValid dataIndx: "+q;m.editCell({rowIndx:g,dataIndx:q})}var G;if(L||(G=m.getEditCell())&&G.$cell){m=
L||G.$cell;m.attr("title",H);L="tooltip";G="open";n.on&&n.tooltip&&(L=n.tooltip,G="show");try{m[L]("destroy")}catch(K){}m[L]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==M?"":"<span class='ui-icon "+M+" pq-tooltip-icon'></span>")+H},open:function(k,m){var a=m.tooltip;J&&a.addClass(J);if(P){var c=a.attr("style");a.attr("style",c+";"+P)}I&&a.tooltip.css(I)}})[L](G)}}return k}if(e&&(G=m.getEditCell())&&G.$cell){m=G.$cell;m.removeAttr("title");try{m.tooltip("destroy")}catch(O){}}return{valid:!0}};
a.isValid=function(k){return this.iIsValid.isValid(k)};g.isValid=function(k){k=k||{};var m=this.that,a=k.allowInvalid,c=k.focusInvalid,b=k.checkEditable,a=null==a?!1:a,e=k.dataIndx;if(null!=e){var d=m.columns[e],f=k.rowData||m.getRowData(k),g=k.hasOwnProperty("value"),m=g?k.value:f[e],m=this.isValidCell({rowData:f,checkEditable:b,rowIndx:k.rowIndx,value:m,valueDef:g,column:d,allowInvalid:a,focusInvalid:c});return m.valid||m.warn?{valid:!0}:m}if(null!=k.rowIndx||null!=k.rowIndxPage||null!=k.rowData)for(var f=
k.rowData||m.getRowData(k),n=m.colModel,g=[],h=0,q=n.length;h<q;h++){if(d=n[h],!d.hidden&&(e=d.dataIndx,m=f[e],m=this.isValidCell({rowData:f,value:m,column:d,rowIndx:k.rowIndx,checkEditable:b,allowInvalid:a,focusInvalid:c}),!m.valid&&!m.warn))if(a)g.push({rowData:f,dataIndx:e,column:d});else return m}else{k=k.data?k.data:m.options.dataModel.data;g=[];if(!k)return null;h=0;for(q=k.length;h<q;h++){f=k[h];if(b&&(d=this.getRowIndx({rowData:f}).rowIndx,null==d||!1==m.isEditableRow({rowData:f,rowIndx:d})))continue;
f=this.isValid({rowData:f,rowIndx:d,checkEditable:b,allowInvalid:a,focusInvalid:c});e=f.cells;if(!1===a){if(!f.valid)return f}else e&&e.length&&(g=g.concat(e))}}return a&&g.length?{cells:g,valid:!1}:{valid:!0}};a.isValidChange=function(k){k=k||{};var m=this.getChanges(),m=m.updateList.concat(m.addList);k.data=m;return this.isValid(k)};a.isEditableRow=function(k){var m=this.options.editable;return null!=m?"function"==typeof m?m.call(this,this.normalize(k)):m:!0};a.isEditableCell=function(k){k=this.normalize(k);
var m=k.rowIndx,a=k.colIndx,c=this.iMerge;c.ismergedCell(m,a)&&(k=c.getRootCell(m,a));m=k.column;a=m.editable;return k.checkVisible&&m.hidden?!1:null!=a?"function"==typeof a?a.call(this,k):a:!0};a._onContMouseDown=function(k){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",k,null))return!1;var m=l(k.target);k=m.closest(".pq-grid-cell,.pq-grid-number-cell");m=m.closest(".pq-grid-row");k.length||m.length||(k=this.$cont[0],k.setAttribute("tabindex",0),k.focus());return!0};a._onCellMouseDown=
function(k){var m=l(k.currentTarget),a=this.getCellIndices({$td:m});a.$td=m;return!1==this._trigger("cellMouseDown",k,a)?!1:!0};a._onRowMouseDown=function(k){var m=l(k.currentTarget),a=this.getRowIndx({$tr:m});a.$tr=m;return!1==this._trigger("rowMouseDown",k,a)?!1:!0};a._onCellMouseEnter=function(k,m){var a=this.options,c=this.getCellIndices({$td:m});if(null!=c.rowIndx&&null!=c.colIndx){if(!1===this._trigger("cellMouseEnter",k,c))return!1;"cell"==a.hoverMode&&this.highlightCell(m);return!0}};a._onRowMouseEnter=
function(k,m){var a=this.options,c=this.getRowIndx({$tr:m}),b=c.rowIndxPage;if(!1===this._trigger("rowMouseEnter",k,c))return!1;"row"==a.hoverMode&&this.highlightRow(b);return!0};a._onCellMouseLeave=function(k,m){"cell"==this.options.hoverMode&&this.unHighlightCell(m);return!0};a._onRowMouseLeave=function(k,m){var a=this.getRowIndx({$tr:m}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(a);return!0};a.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+
this.eventNamespace)};a.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+this.eventNamespace,function(k){if(k.target){var m=l(k.target);if(m.is("input,textarea,select")||m.closest(".pq-native-select").length)return!0;k.preventDefault()}})};a._onClickCell=function(k){var m=this.colModel,a=this.options.editModel,c=l(k.currentTarget),b=this.getCellIndices({$td:c}),e=b.rowIndxPage,d=e+this.rowIndxOffset,f,g,n=b.colIndx;b.rowIndx=d;null!=n&&(0<=n&&(f=m[n],g=f.dataIndx,
b.dataIndx=g),b.evt=k);if(!1==this._trigger("cellClick",k,{$td:c,rowIndxPage:e,rowIndx:d,colIndx:n,dataIndx:g,column:f,rowData:this.pdata[e]}))return!1;null==n||0>n||1==a.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:n,rowIndx:d})&&this.editCell(b)};a._onRightClickCell=function(k){var m=l(k.currentTarget),a=this.getCellIndices({$td:m}),c=a.rowIndxPage,b=c+this.rowIndxOffset,a=a.colIndx,e=this.colModel;if(null!=a&&(e=e[a],!1==this._trigger("cellRightClick",k,{$td:m,rowIndxPage:c,
rowIndx:b,colIndx:a,dataIndx:e.dataIndx,column:e,rowData:this.pdata[c]})))return!1};a.highlightCell=function(k){k.addClass("pq-grid-cell-hover ui-state-hover")};a.unHighlightCell=function(k){k.removeClass("pq-grid-cell-hover ui-state-hover")};a.highlightRow=function(k){isNaN(k)||(k=this.getRow({rowIndxPage:k}))&&k.addClass("pq-grid-row-hover ui-state-hover")};a.unHighlightRow=function(k){isNaN(k)||(k=this.getRow({rowIndxPage:k}))&&k.removeClass("pq-grid-row-hover ui-state-hover")};a._getCreateEventData=
function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};a._findCellFromEvt=function(k){k=l(k.target).closest(".pq-grid-cell");if(null==k||0==k.length)return{rowIndxPage:null,colIndx:null,$td:null};var a=this.getCellIndices({$td:k});a.$td=k;return a};a._initPager=function(){var k=this,a=k.options,c=a.pageModel,a={bootstrap:a.bootstrap,change:function(a,m){k.blurEditor({force:!0});var c=k.options.pageModel;void 0!=m.curPage&&(c.prevPage=c.curPage,c.curPage=
m.curPage);void 0!=m.rPP&&(c.rPP=m.rPP);"remote"==c.type?k.remoteRequest({callback:function(){k._onDataAvailable({apply:!0,header:!1})}}):k.refreshView({header:!1,source:"pager"})},refresh:function(a){k.refreshDataAndView()}};c.type&&(this.pagerW=pqPager(c.appendTo?c.appendTo:this.$footer,a))};a.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",
this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};a._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};a.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};a.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};
a.refreshDataFromDataModel=function(k){k=k||{};var a=this._queueATriggers,c;for(c in a){var b=a[c];this._trigger(c,b.evt,b.ui)}this._queueATriggers={};this._trigger("beforeRefreshData",null,{});var e=this.options,a=e.pageModel,b=e.dataModel.data,d=a.type,f=e.groupModel?!0:!1;this.rowIndxOffset=0;if(null==b||0==b.length)d&&(a.curPage=0,a.totalPages=0,a.totalRecords=0),this.pdata=b;if(d&&"local"==d){a.totalRecords=b.length;a.totalPages=Math.ceil(b.length/a.rPP);a.curPage>a.totalPages&&(a.curPage=a.totalPages);
1>a.curPage&&0<a.totalPages&&(a.curPage=1);var e=(a.curPage-1)*a.rPP,g=a.curPage*a.rPP;g>b.length&&(g=b.length);this.pdata=b.slice(e,g)}else"remote"==d?(e=Math.ceil(a.totalRecords/a.rPP),(a.totalPages=e)&&!a.curPage&&(a.curPage=1),g=a.rPP,g>b.length&&(g=b.length),this.pdata=b.slice(0,g)):this.pdata=e.backwardCompat?b.slice(0):b;if("local"==d||"remote"==d)this.rowIndxOffset=a.rPP*(a.curPage-1);a=this._queueBTriggers;for(c in a)b=a[c],this._trigger(c,b.evt,b.ui);this._queueBTriggers={};this._trigger("dataReady",
null,{source:k.source});f&&this.iGroupView.refreshDataFromDataModel()};a.getQueryStringCRUD=function(){return""};a.remoteRequest=function(k){this.loading&&this.xhr.abort();k=k||{};var a=this,c="",b="",e=this.options,d=!1,f=this.colModel,g=e.dataModel,n=e.sortModel,h=e.filterModel,q=e.pageModel;if("function"==typeof g.getUrl)(e=g.getUrl.call(this,{colModel:f,dataModel:g,sortModel:n,groupModel:e.groupModel,pageModel:q,filterModel:h}))&&e.url&&(c=e.url),e&&e.data&&(b=e.data);else if("string"==typeof g.url){var c=
g.url,b={},e={},p={};"remote"==n.type&&(k.initBySort||this.sort({initByRemote:!0}),(n=this.iSort.getQueryStringSort())&&(b={pq_sort:n}));"remote"==q.type&&(p={pq_curpage:q.curPage,pq_rpp:q.rPP});"local"!=h.type&&(n=this.iFilterData.getQueryStringFilter())&&(d=!0,e={pq_filter:n});var n=g.postData,y=g.postDataOnce;n&&"function"==typeof n&&(n=n.call(this,{colModel:f,dataModel:g}));b=l.extend({pq_datatype:g.dataType},e,p,b,n,y)}c&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:c,dataType:g.dataType,
async:null==g.async?!0:g.async,cache:g.cache,contentType:g.contentType,type:g.method,data:b,beforeSend:function(k,c){if("function"==typeof g.beforeSend)return g.beforeSend.call(a,k,c)},success:function(c,b,e){"function"==typeof g.getData&&(c=g.getData.call(a,c,b,e));g.data=c.data;q.type&&"remote"==q.type&&(c.curPage&&(q.curPage=c.curPage),c.totalRecords&&(q.totalRecords=c.totalRecords));a.hideLoading();a.loading=!1;a._queueBTriggers.load={ui:{dataModel:g,colModel:f}};k.callback&&k.callback();d&&(a._queueATriggers.filter=
{ui:{type:"remote",filterModel:h}})},error:function(k,c,b){a.hideLoading();a.loading=!1;if("function"==typeof g.error)g.error.call(a,k,c,b);else if("abort"!=b)throw"Error : "+b;}}))};a._refreshTitle=function(){this.$title.html(this.options.title)};a._destroyDraggable=function(){var k=this.element,a=k.parent(".pq-wrapper");a.length&&a.data("draggable")&&(a.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),k.unwrap(".pq-wrapper"))};a._refreshDraggable=function(){var k=this.element,
a=this.$title;this.options.draggable?(a.addClass("pq-draggable pq-no-capture"),k.parent(".pq-wrapper").length||k.wrap("<div class='pq-wrapper' />"),k.parent(".pq-wrapper").draggable({handle:a})):this._destroyDraggable()};a._refreshResizable=function(){var k=this,a=this.element,c=this.options,b=-1<(c.width+"").indexOf("%"),e=-1<(c.height+"").indexOf("%"),d="auto"==c.width,f="flex"==c.width,g="flex"==c.height;if(!c.resizable||(g||e)&&(f||b||d))this._destroyResizable();else{var n="e,s,se";if(g||e)n=
"e";else if(f||b||d)n="s";b=!0;a.hasClass("ui-resizable")&&(e=a.resizable("option","handles"),n==e?b=!1:this._destroyResizable());b&&a.resizable({helper:"ui-state-default",handles:n,minWidth:c.minWidth,minHeight:c.minHeight?c.minHeight:100,delay:0,start:function(k,a){l(a.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(k,a){},stop:function(a,m){var b=k.element,e=c.width,d=c.height,f=-1<(e+"").indexOf("%"),s=-1<(d+"").indexOf("%"),g="auto"==e,e="flex"==e,n=
!1;s||"flex"==d||(n=!0,c.height=b.height());f||g||e||(n=!0,c.width=b.width());k.refresh();b.css("position","relative");n&&l(window).trigger("resize")}})}};a._refreshAfterResize=function(){var k=this.options,a=k.width,c=k.height,k=-1!=(a+"").indexOf("%")?!0:!1,a="auto"===a,c=-1!=(c+"").indexOf("%")?!0:!1;(k||a||c)&&this.refresh()};a.refresh=function(k){this.iRefresh.refresh(k)};a._refreshDataIndices=function(){for(var k="JSON"==this.getDataType()?!0:!1,a={},c={},b={},e=this.colModel,d=e.length,f=0;f<
d;f++){var g=e[f],n=g.dataIndx;null==n&&(n="detail"==g.type?"pq_detail":k?"dataIndx_"+f:f,"pq_detail"==n&&(g.dataType="object"),g.dataIndx=n);a[n]=g;c[n]=f;g.validations&&(b[n]=b)}this.columns=a;this.colIndxs=c;this.validations=b};a.refreshView=function(k){null!=this.options.editModel.indices&&this.blurEditor({force:!0});this.refreshDataFromDataModel(k);this.refresh(k)};a._refreshPager=function(){var k=this.options,a=k.pageModel,c=a.rPP,b=a.totalRecords;a.type?(a=k.pageModel,this.pagerW||this._initPager(),
this.pagerW.option(a),b>c?this.$bottom.css("display",""):k.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),k.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};a.getInstance=function(){return{grid:this}};a.refreshDataAndView=function(k){if("remote"==this.options.dataModel.location){var a=this;this.remoteRequest({callback:function(){a._onDataAvailable(k)}})}else this._onDataAvailable(k)};a.getColIndx=function(k){var a=
k.dataIndx;k=k.column;var c;if(k)c=!0;else if(void 0===a)throw"dataIndx / column NA";var b=this.colModel,e=b.length;if(c)for(a=0;a<e;a++){if(b[a]==k)return a}else if(a=this.colIndxs[a],null!=a)return a;return-1};a.getColumn=function(k){if(null==k.dataIndx)throw"dataIndx N/A";return this.columns[k.dataIndx]};a._generateCellRowOutline=function(){var k=this.options,a=k.editModel;if(this.$div_focus){if(k.debug)throw"this.$div_focus already present assert failed";}else k=this.element,a.inline&&(k=this.getCell(a.indices),
k.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(k),this.$div_focus.css("zIndex",k.zIndex()+5),a=l.extend({all:!0},a.indices),a=this.getCell(a),a.css("height",a[0].offsetHeight),a.empty(),this.refreshEditorPos()};a._removeEditOutline=function(k){if(this.$div_focus){k=this.$div_focus.find(".pq-editor-focus");k.hasClass("hasDatepicker")&&k.datepicker("hide").datepicker("destroy");if(k[0]==document.activeElement){var a=this._blurEditMode;
this._blurEditMode=!0;k.blur();this._blurEditMode=a}this.$div_focus.remove();delete this.$div_focus;k=this.options.editModel;a=l.extend({},k.indices);k.indices=null;a.rowData=void 0;this.refreshCell(a)}};a.refreshEditorPos=function(){var k=this.options.editModel,a=k.cellBorderWidth,c=this.$div_focus,b=this.getCell(k.indices);if(!b||!b.length)return!1;var k=b[0].offsetWidth,e=b[0].offsetHeight,d=this.element.offset(),b=b.offset();c.css({height:e,width:k,borderWidth:a,left:b.left-d.left,top:b.top-d.top-
1})};a.setEditorPosTimer=function(){var k=this,a=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){a.editModel.indices&&k.refreshEditorPos()},200)};a.get$Tbl=function(k,a){var c=this.$tbl,b=[];if(c&&c.length){var e=this.pqpanes,d=this.options,f=d.freezeRows,d=d.freezeCols;e.h&&e.v?null==a?k>=f?b.push(c[2],c[3]):b.push(c[0],c[1]):b=a>=d&&k>=f?c[3]:a<d&&k>=f?c[2]:a>=
d&&k<f?c[1]:c[0]:b=e.v?null==a?c:a>=d?c[1]:c[0]:e.h?k>=f?c[1]:c[0]:c[0];if(b)return l(b)}};a.scrollCell=function(k){this.scrollRow(k);this.scrollColumn(k)};a.scrollY=function(k){this.vscroll.option("cur_pos",k);this.vscroll.scroll()};a.scrollRow=function(k){if(!this.pdata||k.rowIndxPage>=this.pdata.length)return!1;this.options.virtualY?this._scrollRowVirtual(k):this.iMouseSelection.scrollRowNonVirtual(k)};a._scrollRowVirtual=function(k){var a=this.options,c=k.rowIndxPage,b=this.iHierarchy?!0:!1,e=
k.rowIndx;k=this.vscroll;var d=this.scrollCurPos,c=null==c?e-this.rowIndxOffset:c,f=parseInt(a.freezeRows);if(!(c<f)&&(e=this._calcCurPosFromRowIndxPage(c),null!=e)){e<d&&(k.option("cur_pos",e),k.scroll());var g=this.get$Tbl(c);if(!g||!g.length)return null;var n=g.children("tbody").children("tr[pq-row-indx="+c+"]"),h=c=n.last();1<n.length&&(h=n.first());var q=c[0],n=parseInt(g.css("marginTop"));if(void 0==q)a.scrollModel.smooth?k.option("ratio",e/this.totalVisibleRows).vscroll.drag():(k.option("cur_pos",
e),k.scroll());else{var a=q.offsetTop+q.offsetHeight,q=this.$cont[0].offsetHeight,l=this._getSBHeight(),h=h.prev("tr");if(!h.hasClass("pq-row-hidden")&&!h.hasClass("pq-last-frozen-row")&&a>q-l-n){a-=q-l-n;n=g.children().children("tr");h=g=0;f?(f=n.filter("tr.pq-last-frozen-row").last().next(),0==f.length&&(f=n.filter("tr.pq-row-hidden").next())):f=n.filter("tr.pq-row-hidden").next();do{if(!f.length)break;g+=f[0].offsetHeight;if(f[0]==c[0])break;else if(b&&!1!=f.hasClass("pq-detail-child")||h++,g>=
a)break;f=f.next()}while(1);b=d+h;b>e&&(b=e);d=k.option("num_eles");d<b+1&&(d=b+1);k.option({num_eles:d,cur_pos:b});k.scroll()}}}};a.blurEditor=function(a){if(this.$div_focus){var c=this.$div_focus.find(".pq-editor-focus");if(a&&a.blurIfFocus)document.activeElement==c[0]&&c.blur();else return c.triggerHandler("blur",a)}};a._scrollColumnVirtual=function(a){var c=a.colIndx,b=this.hscroll,c=null==c?this.colIndxs[a.dataIndx]:c;a=this.options.freezeCols;var e=this._calcRightEdgeCol(c).width,d=this.iRefresh.getEContWd();
if(e>d){for(var e=this.calcWidthCols(-1,c+1)-d,d=this.colModel,f=d.length,g=0,n=0,h=a;h<f;h++){var q=d[h];q.hidden||(g+=q.outerWidth);if(h==c){n=h-a-this._calcNumHiddenUnFrozens(h);break}else if(g>=e){n=h-a-this._calcNumHiddenUnFrozens(h)+1;break}}b.option("cur_pos",n);b.scroll();return!0}return c>=a&&c<this.initH?(c=c-a-this._calcNumHiddenUnFrozens(c),b.option("cur_pos",c),b.scroll(),!0):!1};a.scrollColumn=function(a){var c=this.options;return"flex"===c.width?!1:c.virtualX?this._scrollColumnVirtual(a):
this.iMouseSelection.scrollColumnNonVirtual(a)};a.selection=function(a){if(a){var c=a.method,b,e=a.type;"row"==e?b=this.iRows[c](a):"cell"==e&&(b=this.iCells[c](a));if("add"==c||"remove"==c||"removeAll"==c)this.iSelection.dirty=!0,this.iSelection._trigger();return b}a=this.iSelection;a.isDirty()&&a.refresh();return a};a.goToPage=function(a){var c=this.options.pageModel;if("local"==c.type||"remote"==c.type){var b=a.rowIndx,e=c.rPP;a=null==a.page?Math.ceil((b+1)/e):a.page;a!=c.curPage&&(c.curPage=a,
"local"==c.type?this.refreshView():this.refreshDataAndView())}};a.setSelection=function(a){if(null==a)return this.iSelection.removeAll(),!0;var c=this.pdata;if(!c||!c.length)return!1;a=this.normalize(a);var c=a.rowIndx,b=a.rowIndxPage,e=a.colIndx;a.rowData&&null==c&&(b=this.getRowIndx(a),a.rowIndx=c=b.rowIndx,a.rowIndxPage=b.rowIndxPage);if(null==c||0>c||0>e||e>=this.colModel.length)return!1;this.goToPage(a);b=c-this.rowIndxOffset;this.scrollRow({rowIndxPage:b});null==e?this.range({r1:c}).select():
(this.scrollColumn({colIndx:e}),this.range({r1:c,c1:e}).select());!1!==a.focus&&this.focus({rowIndxPage:b,colIndx:null==e?this.getFirstVisibleCI():e})};a.getColModel=function(){return this.colModel};a.saveEditCell=function(a){var c=this.options,b=c.editModel;if(!b.indices)return null;var e=l.extend({},b.indices);a=a?a.evt:null;var d=e.rowIndxPage,b=d+this.rowIndxOffset,f=this.colModel[e.colIndx],e=f.dataIndx,g=this.pdata[d],n=c.dataModel,h;if(null==g)return null;if(null!=d){c=this.getEditCellData();
if(l.isPlainObject(c)){h={};for(var q in c)h[q]=g[q]}else h=this.readCell(g,f);"<br>"==c&&(c="");null==h&&""===c&&(c=null);q={rowIndx:b,rowIndxPage:d,dataIndx:e,column:f,newVal:c,value:c,oldVal:h,rowData:g,dataModel:n};if(!1===this._trigger("cellBeforeSave",a,q))return!1;d={};f=!1;l.isPlainObject(c)?(d=c,f=!0):d[e]=c;if(!1===this.updateRow({row:d,rowIndx:b,refresh:f,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",a,q);return!0}};a._addInvalid=function(a){};a._digestData=
function(a){if(!1===this._trigger("beforeValidate",null,a))return!1;var c=this.options,b=c.editModel,e=c.dataModel,d=e.data,f=c.colModel,g=c.pageModel,n=c.historyModel,h=a.validate,h=null==h?b.validate:h,q=g.type,l=a.allowInvalid,l=null==l?b.allowInvalid:l,p=c.trackModel,b=a.track,b=null==b?null==c.track?p.on:c.track:b,y=a.history,y=null==y?n.on:y,z=a.checkEditable,z=null==z?!0:z,D=a.checkEditableAdd,D=null==D?z:D,n=this.saveCell,p=this.columns,C=this.colIndxs,E=a.source,H=this.rowIndxOffset,I=this.getValueFromDataType,
J=a.rowList,M=J.length;d||(d=c.dataModel.data=[]);for(var P=[],L=0;L<M;L++){var G=J[L],K=G.newRow,O=G.rowData,N=G.type,T=G.checkEditable,Q=G.rowIndx,V=G.oldRow;null==T&&("update"==N?T=z:"add"==N&&(T=D));if("update"==N){if(!V)throw"assert failed: oldRow required while update";if(T&&!0!==c.editable&&!1===this.isEditableRow({rowIndx:Q,rowData:O}))continue}else if("delete"==N){P.push(G);continue}if("add"==N)for(var R=0,W=f.length;R<W;R++){var U=f[R],S=U.dataIndx;K[S]=K[S]}for(S in K)if(U=p[S],R=C[S],
U)if(T&&null!=U.editable&&!1===this.isEditableCell({rowIndx:Q,colIndx:R,dataIndx:S}))delete K[S];else{var X=U.dataType,R=I(K[S],X),W=V?V[S]:void 0,W=void 0!==W?I(W,X):void 0;K[S]=R;if(h&&U.validations)if("edit"==E&&!1===l){if(U=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:Q,value:R}),!1==U.valid&&!U.warn)return!1}else U=this.iIsValid.isValidCell({column:U,rowData:"add"==N?K:O,allowInvalid:l,value:R}),!1===U.valid&&(!1!==l||U.warn||delete K[S]);"update"==N&&R===W&&(delete K[S],V&&delete V[S])}if(K)if("update"==
N)for(S in K){P.push(G);break}else P.push(G)}J=a.rowList=P;M=J.length;if(!M)return"edit"==E?null:!1;y&&(this.iHistory.increment(),this.iHistory.push({rowList:J}));for(L=0;L<M;L++)if(G=J[L],N=G.type,K=G.newRow,Q=G.rowIndx,c=G.rowIndxPage,O=G.rowData,"update"==N)for(S in b&&this.iUCData.update({rowData:O,row:K,refresh:!1}),K)U=p[S],R=K[S],n(O,U,R);else if("add"==N)b&&this.iUCData.add({rowData:K}),null==Q&&null==c?d.push(K):(c=Q-H,c="remote"==q?c:Q,d.splice(c,0,K)),"remote"==q&&g.totalRecords++;else if("delete"==
N){c=this.getRowIndx({rowData:O,dataUF:!0});f=c.uf;Q=c.rowIndx;if(b)this.iUCData["delete"]({rowIndx:Q,rowData:O});c=Q-H;c="remote"==q?c:Q;f?e.dataUF.splice(Q,1):(c=d.splice(c,1))&&c.length&&"remote"==q&&g.totalRecords--}this._trigger("change",null,a);return!0};a.refreshColumn=function(a){a=this.normalize(a);var c=this.initV,b=this.finalV,e=this.options.freezeRows,d=a.colIndx,f=a.dataIndx,g=a.column;a.skip=!0;for(var n=0;n<=b;n++)n<c&&n>=e&&(n=c),a.rowIndxPage=n,this.refreshCell(a);this._trigger("refreshColumn",
null,{column:g,colIndx:d,dataIndx:f});this.iRefresh.softRefresh()};a.refreshCell=function(a){a=this.normalize(a);if(this.pdata){var c=a.skip,b=a.rowIndx,e=a.rowIndxPage,d=a.colIndx,f=this.iMerge;if(a.rowData&&(!f.ismergedCell(b,d)||f.isRootCell(b,d,!0))&&(b=this.getCell({all:!0,rowIndxPage:e,colIndx:d}))&&0<b.length){var d=this.iGenerateView.renderCell(a),g;d&&(b.replaceWith(d),(g=this._focusElement)&&g.rowIndxPage==e&&this.focus(),c||(this._trigger("refreshCell",null,a),this.iRefresh.softRefresh()))}}};
a.refreshRow=function(a){a=this.normalize(a);if(this.pdata){var c=a.rowIndx,b=a.rowIndxPage,e=this.options,d=e.freezeRows,f=a.rowData;if(!f||f.pq_hidden||b>this.finalV||b<this.initV&&b>=d)return null;var g=this.getRow({all:!0,rowIndxPage:b}),n,h=[];this.iGenerateView.refreshRow(b,h);h=h.join("");if(g&&g.length)g.replaceWith(h);else if(e.virtualY)if(b==this.finalV)this.$tbl.append(h);else if(b==this.initV)for(e=this.$tbl,g=0;g<e.length;g++)l(e[g]).children("tbody").children(d?".pq-last-frozen-row":
"tr:first").after(h);else throw"refreshRow > rip not found";else return!1;(n=this._focusElement)&&n.rowIndxPage==b&&this.focus();this._trigger("refreshRow",null,{rowData:f,rowIndx:c,rowIndxPage:b});!1!==a.refresh&&this.iRefresh.softRefresh();return!0}};a.quitEditMode=function(a){if(!this._quitEditMode){var c=!1,b=!1,e=!1,d=this.options.editModel,f=d.indices,g=void 0;this._quitEditMode=!0;a&&(c=a.old,b=a.silent,e=a.fireOnly,g=a.evt);f&&(b||c||this._trigger("editorEnd",g,f),e||(this._removeEditOutline(a),
d.indices=null));this._quitEditMode=null}};a.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};a.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};a.getRowIndxOffset=function(){return this.rowIndxOffset};a.getEditCell=function(){var a=this.options.editModel;if(a.indices){var a=this.getCell(a.indices),c=this.$div_focus.children(".pq-editor-inner"),b=c.find(".pq-editor-focus");return{$td:a,$cell:c,$editor:b}}return{}};
a.editCell=function(a){a=this.normalize(a);var c=this.iMerge,b=a.rowIndx,e=a.colIndx;c.ismergedCell(b,e)&&(a=c.getRootCell(b,e));this.scrollRow(a);this.scrollColumn(a);if((c=this.getCell(a))&&c.length)return this._editCell(a)};a.getFirstEditableColIndx=function(a){if(null==a.rowIndx)throw"rowIndx NA";if(!this.isEditableRow(a))return-1;for(var c=this.colModel,b=0;b<c.length;b++)if(a.colIndx=b,this.isEditableCell(a)&&!c[b].hidden)return b;return-1};a.editFirstCellInRow=function(a){var c=this.rowIndxOffset,
b=a.rowIndx;a=a.rowIndxPage;b=null==b?a+c:b;a=null==a?b-c:a;c=this.getFirstEditableColIndx({rowIndx:b});-1!=c&&this.editCell({rowIndxPage:a,colIndx:c})};a._editCell=function(a){var c=this.normalize(a),e=this;a=c.evt;var d=c.rowIndxPage,f=c.colIndx,g=e.pdata;if(!g||d>=g.length)return!1;var g=g[d],n=c.rowIndx,h=this.colModel[f],q=h.dataIndx,p=e.readCell(g,h),w={rowIndx:n,rowIndxPage:d,cellData:p,rowData:g,dataIndx:q,colIndx:f,column:h},x=h.editor,x="function"==typeof x?x.call(this,w):x;if(!1!==x){var y=
this.options,z=y.editModel,D=y.editor,C=x?l.extend({},D,x):D,x=!1;if(z.indices){y=z.indices;if(y.rowIndxPage==d&&y.colIndx==f){this.refreshEditorPos();var E=this.$div_focus.find(".pq-editor-focus");window.setTimeout(function(){E.focus()},0);return!1}if(!1===this.blurEditor({evt:a}))return!1;this.quitEditMode({evt:a})}z.indices={rowIndxPage:d,rowIndx:n,colIndx:f,column:h,dataIndx:q};this._generateCellRowOutline();y=this.$div_focus.children(".pq-editor-inner");"right"==h.align?y.addClass("pq-align-right"):
"center"==h.align?y.addClass("pq-align-center"):y.addClass("pq-align-left");w.$cell=y;var H,I=C.type,c=null==c.select?C.select:c.select,J=C.init,M=C.valueIndx,P=C.dataMap,L=C.mapIndices,L=L?L:{},G=C.cls||"",G="function"===typeof G?G.call(this,w):G;H="pq-editor-focus "+G;var G=H+" pq-cell-editor ",K=C.attr||"",K="function"===typeof K?K.call(this,w):K,O=C.style||"",O=(O="function"===typeof O?O.call(this,w):O)?"style='"+O+"'":"";w.cls=H;w.attr=K;"function"==typeof I&&(H=I.call(this,w))&&(I=H);D._type=
I;"checkbox"==I?(C=C.subtype,y.html("<input "+(p?"checked='checked'":"")+" class='"+G+"' "+K+" "+O+" type=checkbox name='"+q+"' />"),D=y.children("input"),"triple"==C&&(D.pqval({val:p}),y.click(function(a){l(this).children("input").pqval({incr:!0})}))):"textarea"==I||"select"==I||"textbox"==I?("textarea"==I?H="<textarea class='"+G+"' "+K+" "+O+" name='"+q+"' ></textarea>":"select"==I?(D=C.options||[],"function"===typeof D&&(D=D.call(this,w)),G=[K," class='",G,"' ",O," name='",q,"'"].join(""),H=b.select({options:D,
attr:G,prepend:C.prepend,labelIndx:C.labelIndx,valueIndx:M,groupIndx:C.groupIndx,dataMap:P})):H="<input class='"+G+"' "+K+" "+O+" type=text name='"+q+"' />",l(H).appendTo(y).val("select"==I&&null!=M&&(L[M]||this.columns[M])?L[M]?g[L[M]]:g[M]:p)):I&&"contenteditable"!=I||(y.html("<div contenteditable='true' tabindx='0' "+O+" "+K+" class='"+G+"'></div>"),y.children().html(p),x=!0);"function"==typeof J&&J.call(this,w);var e=this,E=y.children(".pq-editor-focus"),N=z.filterKeys;(p=h.editModel)&&void 0!==
p.filterKeys&&(N=p.filterKeys);var T={$cell:y,$editor:E,dataIndx:q,column:h,colIndx:f,rowIndx:n,rowIndxPage:d,rowData:g};z.indices=T;E.data({FK:N}).on("click",function(a){l(this).focus()}).on("keydown",function(a){e.iKeyNav._keyDownInEdit(a)}).on("keypress",function(a){return e.iKeyNav._keyPressInEdit(a,{FK:N})}).on("keyup",function(a){return e.iKeyNav._keyUpInEdit(a,{FK:N})}).on("blur",function(a,c){var k=e.options.editModel,m=k.onBlur,b="save"==m,d="validate"==m,f=k.cancelBlurCls,g=c?c.force:!1;
if(!e._quitEditMode&&!e._blurEditMode&&k.indices){k=l(a.target);if(!g){if(!1===e._trigger("editorBlur",a,T)||!m||f&&k.hasClass(f))return;if(k.hasClass("hasDatepicker")){if(k.datepicker("widget").is(":visible"))return!1}else if(k.hasClass("ui-autocomplete-input")){if(k.autocomplete("widget").is(":visible"))return}else if(k.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(k.hasClass("pq-select-button")&&
(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}e._blurEditMode=!0;if(!e.saveEditCell({evt:a,silent:g||b||!d})&&!g&&d)return e._deleteBlurEditMode(),!1;e.quitEditMode({evt:a});e._deleteBlurEditMode()}}).on("focus",function(a){e._trigger("editorFocus",a,T)});e._trigger("editorBegin",a,T);E.focus();window.setTimeout(function(){!1===l(document.activeElement).hasClass("pq-editor-focus")&&(e.element?e.element.find(".pq-editor-focus"):l()).focus()},
0);if(c)if(x)try{var Q=E[0],V=document.createRange();V.selectNodeContents(Q);var R=window.getSelection();R.removeAllRanges();R.addRange(V)}catch(W){}else E.select()}};a._deleteBlurEditMode=function(a){var c=this;a=a?a:{};c._blurEditMode&&(a.timer?window.setTimeout(function(){delete c._blurEditMode},0):delete c._blurEditMode)};a.getRow=function(a){var c=this.normalize(a);a=c.rowIndxPage;var c=c.all?this.$tbl:this.get$Tbl(a),b=l();if(c&&c.length){var e=c.children("tbody");null!=a&&(b=e.children("tr[pq-row-indx="+
a+"]"),b.length>c.length&&(b=b.filter(".pq-detail-master")))}return b};a.getCell=function(a){var c=this.normalize(a);a=c.rowIndxPage;var b=a+this.rowIndxOffset,e=c.colIndx;if((c=c.all?this.$tbl:this.get$Tbl(a,e))&&c.length){var d=this.iMerge;d.ismergedCell(b,e)&&(a=d.getRootCell(b,e,!0),b=d.getRootCell(b,e),a=a.rowIndxPage,e=b.colIndx);a=c.children().children("tr[pq-row-indx="+a+"]").children("[pq-col-indx="+e+"]")}else a=l();return a};a.getCellHeader=function(a){var c=a.colIndx;a=a.dataIndx;c=null==
c?this.colIndxs[a]:c;a=this.$tbl_header;var b,e=this.options.freezeCols;void 0!=a&&(1<a.length&&(a=c>=e?l(a[1]):l(a[0])),b=a.find("[pq-col-indx="+c+"].pq-grid-col-leaf"));return 0==b.length||"hidden"==b[0].style.visibility?l():b};a.getEditorIndices=function(){var a=this.options.editModel.indices;return a?l.extend({},a):null};a.getEditCellData=function(){var a=this.options,c=a.editModel.indices;if(!c)return null;var b=c.colIndx,e=c.rowIndxPage,d=c.rowIndx,f=this.colModel[b],g=f.editor,n=a.editor,a=
g?l.extend({},n,g):n,h=a.valueIndx,q=a.labelIndx,g=(g=a.mapIndices)?g:{},p=f.dataIndx,x=this.$div_focus.children(".pq-editor-inner"),y;if("function"==typeof a.getData)y=a.getData.call(this,{$cell:x,rowData:c.rowData,dataIndx:p,rowIndx:d,rowIndxPage:e,column:f,colIndx:b});else if(c=n._type,"checkbox"==c)y=x.children(),y="triple"==a.subtype?y.pqval():y.is(":checked")?!0:!1;else if("contenteditable"==c)y=x.children().html();else if((b=x.find('*[name="'+p+'"]'))&&b.length)if("select"==c&&null!=h)if(g[h]||
this.columns[h]){if(y={},y[g[h]?g[h]:h]=b.val(),y[g[q]?g[q]:q]=b.find("option:selected").text(),a=a.dataMap)if(c=b.find("option:selected").data("map"))for(b=0;b<a.length;b++)e=a[b],y[g[e]?g[e]:e]=c[e]}else y=b.val();else y=b.val();else(b=x.find(".pq-editor-focus"))&&b.length&&(y=b.val());return y};a.getCellIndices=function(a){var c=a.$td;if(null==c||0==c.length||c.closest(".pq-grid")[0]!=this.element[0])return{rowIndxPage:null,colIndx:null};a=c.parent("tr").attr("pq-row-indx");var b;null!=a&&(a=parseInt(a),
b=a+this.rowIndxOffset);var c=c.attr("pq-col-indx"),e;null!=c&&(c=parseInt(c),0<=c&&(e=this.colModel[c].dataIndx));return{rowIndxPage:a,rowIndx:b,colIndx:c,dataIndx:e}};a.getRowsByClass=function(a){var c=this.options,b="remote"==c.pageModel.type,e=this.rowIndxOffset,c=c.dataModel.data,d=[];if(null==c)return d;for(var f=0,g=c.length;f<g;f++){var n=c[f];if(n.pq_rowcls&&(a.rowData=n,this.hasClass(a))){var n={rowData:n},h=b?f+e:f,q=h-e;n.rowIndx=h;n.rowIndxPage=q;d.push(n)}}return d};a.getCellsByClass=
function(a){var c=this.options,b="remote"==c.pageModel.type,e=this.rowIndxOffset,c=c.dataModel.data,d=[];if(null==c)return d;for(var f=0,g=c.length;f<g;f++){var n=c[f],h=b?f+e:f,q=n.pq_cellcls;if(q)for(var l in q)q={rowData:n,rowIndx:h,dataIndx:l,cls:a.cls},this.hasClass(q)&&(q=this.normalize(q),d.push(q))}return d};a.data=function(a){var c=a.dataIndx,b=a.colIndx,c=null!=b?this.colModel[b].dataIndx:c,b=a.data,e=null==b||"string"==typeof b?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};
if(null==c){c=a.pq_rowdata;if(e){var d;null!=c&&(d=null==b?c:c[b]);return{data:d}}b=l.extend(!0,a.pq_rowdata,b);a.pq_rowdata=b}else{var f=a.pq_celldata;if(e)return null!=f&&(c=f[c],d=null==b||null==c?c:c[b]),{data:d};f||(a.pq_celldata={});b=l.extend(!0,a.pq_celldata[c],b);a.pq_celldata[c]=b}};a.attr=function(a){var c=a.rowIndx,b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,e=a.attr,d=null==e||"string"==typeof e?!0:!1,f=this.rowIndxOffset,g=a.refresh;a=a.rowData||this.getRowData(a);
if(!a)return{attr:null};d||!1===g||null!=c||(c=this.getRowIndx({rowData:a}).rowIndx);if(null==b){b=a.pq_rowattr;if(d){var n;null!=b&&(n=null==e?b:b[e]);return{attr:n}}e=l.extend(!0,a.pq_rowattr,e);a.pq_rowattr=e;!1!==g&&null!=c&&(c=this.getRow({rowIndxPage:c-f}))&&(b=q(e),c.attr(b))}else{var h=a.pq_cellattr;if(d)return null!=h&&(c=h[b],n=null==e||null==c?c:c[e]),{attr:n};h||(a.pq_cellattr={});e=l.extend(!0,a.pq_cellattr[b],e);a.pq_cellattr[b]=e;!1!==g&&null!=c&&(c=this.getCell({rowIndxPage:c-f,dataIndx:b}))&&
(b=q(e),c.attr(b))}};var q=function(a,c){var b={},e;for(e in a){var d=a[e];if(d)if("title"==e)d=d.replace(/\"/g,"&quot;"),b[e]=d;else if("style"==e&&"object"==typeof d){var f=[],g,n;for(n in d)g=d[n],c&&"display"==n&&"none"==g||g&&f.push(n+":"+g);(d=f.join(";")+(f.length?";":""))&&(b[e]=d)}else"object"==typeof d&&(d=JSON.stringify(d)),b[e]=d}return b};a.removeData=function(a){var c=a.dataIndx,b=a.colIndx,c=null!=b?this.colModel[b].dataIndx:c,b=a.data,b=null==b?[]:b,b="string"==typeof b?b.split(" "):
b,e=b.length,d=a.rowData||this.getRowData(a);if(d)if(null==c){if(c=d.pq_rowdata){if(e)for(a=0;a<e;a++){var f=b[a];delete c[f]}e&&!l.isEmptyObject(c)||delete d.pq_rowdata}}else if((d=d.pq_celldata)&&d[c]){var g=d[c];if(e)for(a=0;a<e;a++)f=b[a],delete g[f];e&&!l.isEmptyObject(g)||delete d[c]}};a.removeAttr=function(a){var c=a.rowIndx,b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,d=a.attr,d=null==d?[]:d,d="string"==typeof d?d.split(" "):d,f=d.length,e=c-this.rowIndxOffset,g=a.refresh,
n=a.rowData||this.getRowData(a);if(n)if(!1!==g&&null==c&&(c=this.getRowIndx({rowData:n}).rowIndx),null==b){if(b=n.pq_rowattr){if(f)for(a=0;a<f;a++){var h=d[a];delete b[h]}else for(h in b)d.push(h);f&&!l.isEmptyObject(b)||delete n.pq_rowattr}!1!==g&&null!=c&&d.length&&(d=d.join(" "),(c=this.getRow({rowIndxPage:e}))&&c.removeAttr(d))}else{if((n=n.pq_cellattr)&&n[b]){var q=n[b];if(f)for(a=0;a<f;a++)h=d[a],delete q[h];else for(h in q)d.push(h);f&&!l.isEmptyObject(q)||delete n[b]}!1!==g&&null!=c&&d.length&&
(d=d.join(" "),(c=this.getCell({rowIndxPage:e,dataIndx:b}))&&c.removeAttr(d))}};a.normalize=function(a){var c={},b;for(b in a)c[b]=a[b];var e=c.rowIndx,d=c.rowIndxPage;a=c.dataIndx;b=c.colIndx;if(null!=d||null!=e){var f=this.rowIndxOffset,e=null==e?parseInt(d,10)+f:e,d=null==d?parseInt(e,10)-f:d;c.rowIndx=e;c.rowIndxPage=d;c.rowData=c.rowData||this.getRowData(c)}if(null!=b||null!=a)e=this.colModel,a=null==a?e[b].dataIndx:a,b=null==b?this.colIndxs[a]:b,c.column=e[b],c.colIndx=b,c.dataIndx=a;return c};
a.addClass=function(a){var c=this.normalize(a),e=c.rowIndxPage,d=c.dataIndx,f=b.uniqueArray;a=c.cls;var g=c.refresh,n=c.rowData;if(n)if(!1!==g&&null==e&&(e=this.getRowIndx({rowData:n}).rowIndxPage),null==d){var d=n.pq_rowcls,h;h=f((d?d+" "+a:a).split(/\s+/)).join(" ");n.pq_rowcls=h;!1!==g&&null!=e&&(e=this.getRow({rowIndxPage:e}))&&e.addClass(a)}else{c=[];"function"!=typeof d.push?c.push(d):c=d;var q=n.pq_cellcls;q||(q=n.pq_cellcls={});for(var n=0,l=c.length;n<l;n++)d=c[n],h=(h=q[d])?h+" "+a:a,h=
f(h.split(/\s+/)).join(" "),q[d]=h,!1!==g&&null!=e&&(d=this.getCell({rowIndxPage:e,dataIndx:d}))&&d.addClass(a)}};a.removeClass=function(a){var c=this.normalize(a),b=c.rowIndx,e=c.rowData,d=c.dataIndx;a=c.cls;c=c.refresh;if(e){var f=e.pq_cellcls,g=e.pq_rowcls;!1!==c&&null==b&&(b=this.getRowIndx({rowData:e}).rowIndx);if(null==d)g&&(e.pq_rowcls=this._removeClass(g,a),null!=b&&!1!==c&&(b=this.getRow({rowIndx:b}))&&b.removeClass(a));else if(f){g=[];"function"!=typeof d.push?g.push(d):g=d;for(var n=0,
h=g.length;n<h;n++){var d=g[n],q=f[d];q&&(e.pq_cellcls[d]=this._removeClass(q,a),null!=b&&!1!==c&&(d=this.getCell({rowIndx:b,dataIndx:d}))&&d.removeClass(a))}}}};a.hasClass=function(a){var c=a.dataIndx,b=a.cls;a=this.getRowData(a);b=new RegExp("\\b"+b+"\\b");return a?null==c?(c=a.pq_rowcls)&&b.test(c)?!0:!1:(a=a.pq_cellcls)&&a[c]&&b.test(a[c])?!0:!1:null};a._removeClass=function(a,c){if(a&&c){for(var b=a.split(/\s+/),e=c.split(/\s+/),d=[],f=0,g=b.length;f<g;f++){for(var n=b[f],h=!1,q=0,l=e.length;q<
l;q++)if(n===e[q]){h=!0;break}h||d.push(n)}return 1<d.length?d.join(" "):1===d.length?d[0]:null}};a.getRowIndx=function(a){var c=a.$tr,b=a.rowData,e=this.rowIndxOffset;if(b){var c=this.options,d=c.dataModel,c="remote"==c.pageModel.type,f=d.data,g=!1;a=a.dataUF?d.dataUF:null;d=!1;if(f)for(var n=0,h=f.length;n<h;n++)if(f[n]==b){d=!0;break}if(!d&&a)for(g=!0,n=0,h=a.length;n<h;n++)if(a[n]==b){d=!0;break}return d?{rowIndxPage:g?void 0:c?n:n-e,uf:g,rowIndx:c?n+e:n,rowData:b}:{}}if(null==c||0==c.length)return{};
b=c.attr("pq-row-indx");if(null==b)return{};b=parseInt(b);return{rowIndxPage:b,rowIndx:b+e}};a.search=function(a){var c=this.options,b=a.row;a=a.first;for(var e=[],d=this.rowIndxOffset,f="remote"==c.pageModel.type,c=c.dataModel.data,g=0,n=c.length;g<n;g++){var h=c[g],q=!0,l;for(l in b)b[l]!==h[l]&&(q=!1);if(q&&(h=this.normalize({rowIndx:f?g+d:g}),e.push(h),a))break}return e};var n=function(a){this.options=a.options;this.that=a},g=n.prototype;g._incrRowIndx=function(a,c){var b=this.that,e=a;c=null==
c?1:c;for(var b=b.pdata,d=0,f=a+1,g=b.length;f<g&&(b[f].pq_hidden||(d++,e=f,d!=c));f++);return e};g._decrRowIndx=function(a,c){var b=a,e=this.that.pdata;c=null==c?1:c;for(var d=0,f=a-1;0<=f&&(e[f].pq_hidden||(d++,b=f,d!=c));f--);return b};a.addColumn=function(a,c){var b=this.options,e=b.dataModel.data;b.colModel.push(a);this._calcThisColModel();for(b=0;b<e.length;b++)e[b].push("")};g._incrIndx=function(a,c,b){var e=this.that,d=e[b?"getLastVisibleRIP":"getFirstVisibleRIP"](),e=e.colModel,f=e.length;
if(null==c){if(a==d)return null;a=this[b?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}var g;do{c=b?c+1:c-1;if(b&&c>=f||!b&&0>c){if(a==d)return null;a=this[b?"_incrRowIndx":"_decrRowIndx"](a);c=b?0:f-1}g=e[c]}while(g&&g.hidden);return{rowIndxPage:a,colIndx:c}};g._incrEditIndx=function(a,c,b){var e=this.that,d=e.colModel,f=d.length,g=e.iMerge,n,h=e.rowIndxOffset,q=e[b?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var l=a+h;if(n=g.ismergedCell(l,c)){if(l=g.getData(l,c,"proxy_edit_cell"))l=
l.rowIndx,a=l-h;c=b?c+n.colspan:c-1}else c=b?c+1:c-1;if(b&&c>=f||!b&&0>c){if(a==q)return null;do if(a=this[b?"_incrRowIndx":"_decrRowIndx"](a),c=e.isEditableRow({rowIndxPage:a}),a==q&&!1==c)return null;while(!1==c);c=b?0:f-1}l=a+h;if(n=g.ismergedCell(l,c))a=g.getRootCell(l,c),g.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:l,colIndx:c}}),l=a.rowIndx,c=a.colIndx;n=d[c];var p=e.isEditableCell({rowIndx:l,colIndx:c,checkVisible:!0}),y=n.editor,y="function"==typeof y?y.call(e,e.normalize({rowIndx:l,
colIndx:c})):y;a=l-h}while(n&&(n.hidden||!1==p||!1===y));return{rowIndxPage:a,colIndx:c}};g.getMergeCell=function(a,c){var b=this.that,e=b.iMerge;e.isHidden(a,c)?(b=e.getRootCell(a,c),e.setData(b.rowIndx,b.colIndx,{proxy_cell:{rowIndx:a,colIndx:c}})):(e.removeData(a,c,"proxy_cell"),b=b.normalize({rowIndx:a,colIndx:c}));return b};g._incrEditRowIndx=function(a,c,b){var e=this.that,d=e.iMerge,f=e.rowIndxOffset,g=e[b?"getLastVisibleRIP":"getFirstVisibleRIP"]();if(a==g)return null;do{var n=a+f,h=d.ismergedCell(n,
c);if(h){if(a=d.getData(n,c,"proxy_edit_cell"))n=a.rowIndx,c=a.colIndx;n=b?n+h.rowspan-1:n;a=n-f}a=this[b?"_incrRowIndx":"_decrRowIndx"](a);n=a+f;if(h=d.ismergedCell(n,c))h=d.getRootCell(n,c),d.setData(h.rowIndx,h.colIndx,{proxy_edit_cell:{rowIndx:n,colIndx:c}}),a=h.rowIndxPage,c=h.colIndx;var n=a+f,h=e.isEditableRow({rowIndx:n}),n=e.isEditableCell({rowIndx:n,colIndx:c}),n=h&&n;if(a==g&&!n)return null}while(!n);return{rowIndxPage:a,colIndx:c}};a._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==
this._trigger("headerKeyDown",a,null)?!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};g._saveAndMove=function(a,c){if(null==a)return c.preventDefault(),!1;var b=this.that,e=a.rowIndxPage,d=a.colIndx;b._blurEditMode=!0;if(!1===b.saveEditCell({evt:c})||!b.pdata)return b.pdata||b.quitEditMode(c),b._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),c.preventDefault(),!1;b.quitEditMode(c);if(a.incr)var f=this[a.edit?"_incrEditIndx":"_incrIndx"](e,
d,!c.shiftKey),e=f?f.rowIndxPage:e,d=f?f.colIndx:d;b.scrollRow({rowIndxPage:e});b.scrollColumn({colIndx:d});this.select({rowIndx:e+b.rowIndxOffset,colIndx:d,evt:c});a.edit&&b._editCell({rowIndxPage:e,colIndx:d});b._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});c.preventDefault();return!1};g._keyPressInEdit=function(a,c){var b=this.that,e=b.options.editModel.indices;c=c?c:{};var d=c.FK,f="Backspace Left Right Up Down Del Home End".split(" "),g=e.column.dataType;return a.key&&-1!==l.inArray(a.key,
f)?!0:!1===b._trigger("editorKeyPress",a,l.extend({},e))||d&&("float"==g||"integer"==g)&&(b="float"==g?"0123456789.-":"0123456789-",e=(e=a.charCode)?e:a.keyCode,(e=String.fromCharCode(e))&&-1==b.indexOf(e))?!1:!0};g.getValText=function(a){a=a[0].nodeName.toLowerCase();var c="text";-1!=l.inArray(a,["input","textarea","select"])&&(c="val");return c};g._keyUpInEdit=function(a,c){var b=this.that,e=b.options;c=c?c:{};var d=c.FK,e=e.editModel,f=e.indices;b._trigger("editorKeyUp",a,l.extend({},f));b=f.column.dataType;
if(d&&("float"==b||"integer"==b)){var d=l(a.target),f="integer"==b?e.reInt:e.reFloat,e=this.getValText(d),g=d.data("oldVal"),n=d[e]();if(!1==f.test(n))if(f.test(g))d[e](g);else if(b="float"==b?parseFloat(g):parseInt(g),isNaN(b))d[e](0);else d[e](b)}};g._keyDownInEdit=function(a){var c=this.that,b=c.options,e=b.editModel.indices;if(e){var d=l(a.target),f=l.ui.keyCode,g=b.editModel,n=l.extend({},e),e=n.rowIndxPage,b=n.colIndx,h=n.column.editModel,g=h?l.extend({},g,h):g,h=this.getValText(d);d.data("oldVal",
d[h]());if(!1==c._trigger("editorKeyDown",a,n))return!1;if(a.keyCode==f.TAB||a.keyCode==g.saveKey)return c=a.keyCode==f.TAB?g.onTab:g.onSave,n={rowIndxPage:e,colIndx:b,incr:c?!0:!1,edit:"nextEdit"==c},this._saveAndMove(n,a);if(a.keyCode==f.ESCAPE)return c.quitEditMode({evt:a}),c.focus({rowIndxPage:e,colIndx:b}),a.preventDefault(),!1;if(a.keyCode==f.PAGE_UP||a.keyCode==f.PAGE_DOWN)return a.preventDefault(),!1;if(g.keyUpDown){if(a.keyCode==f.DOWN)return n=this._incrEditRowIndx(e,b,!0),this._saveAndMove(n,
a);if(a.keyCode==f.UP)return n=this._incrEditRowIndx(e,b,!1),this._saveAndMove(n,a)}}};g.select=function(a){var c=this.that,b=this,e=a.rowIndx,d=a.colIndx,f=a.evt;a=this.getMergeCell(e,d);var e=a.rowIndx,d=a.colIndx,g=a.rowIndxPage;a=c.options;var n=c.iSelection,h=a.selectionModel,q=h.type,p="row"==q,x="cell"==q;(a.realFocus?function(a){clearTimeout(b.timeoutID);b.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){c.scrollCell({rowIndx:e,colIndx:d});var a=n.address();if(f.shiftKey&&
f.keyCode!==l.ui.keyCode.TAB&&h.type&&"single"!=h.mode&&a.length){var b=a[a.length-1],k=b.firstR,q=b.firstC,F=b.type;"column"==F?(b.c1=q,b.c2=d,b.r1=b.r2=b.type=void 0):"row"==F?(b.r1=k,b.r2=e,b.c1=b.c2=b.type=void 0):a={r1:k,r2:e,c1:q,c2:d,firstR:k,firstC:q};c.range(a).select()}else p?c.range({r1:e,firstR:e}).select():x&&c.range({r1:e,c1:d,firstR:e,firstC:d}).select();c.focus({rowIndxPage:g,colIndx:d})})};g._bodyKeyPressDown=function(a){var c=this.that,b=c.rowIndxOffset,e,d,f;f=this.options;var g=
c.iMerge,n=c._focusElement,h=c.colModel,q=f.selectionModel,p=f.editModel,x=a.ctrlKey||a.metaKey,y=l.ui.keyCode,z=a.keyCode;if(p.indices)c.$div_focus.find(".pq-cell-focus").focus();else{if(n){if(f=document.activeElement,"pq-grid-cont"!=f.className&&"TD"!=f.nodeName.toUpperCase()&&"pq-grid-excel"!=f.id)return}else{n=l(a.target);if(!n.hasClass("pq-grid-cell"))return;n=c.getCellIndices({$td:n})}var D=c.normalize(n);d=D.rowIndxPage;e=D.rowIndx;f=D.colIndx;n=!0;if(!1==c._trigger("cellKeyDown",a,{rowData:D.rowData,
rowIndx:e,rowIndxPage:d,colIndx:f,dataIndx:D.dataIndx,column:h[f]}))return!1;if(z==y.LEFT||z==y.RIGHT||z==y.UP||z==y.DOWN||q.onTab&&z==y.TAB){var q=g.ismergedCell(e,f),C;q&&(C=g.getData(e,f,"proxy_cell"));if(z==y.LEFT||z==y.TAB&&a.shiftKey){if(e=C?C.rowIndx:e,c=this._incrIndx(e-b,f,!1))e=c.rowIndxPage+b,this.select({rowIndx:e,colIndx:c.colIndx,evt:a})}else if(z==y.RIGHT||z==y.TAB&&!a.shiftKey){if(e=C?C.rowIndx:e,f+=q&&q.colspan?q.colspan-1:0,c=this._incrIndx(e-b,f,!0))e=c.rowIndxPage+b,this.select({rowIndx:e,
colIndx:c.colIndx,evt:a})}else z==y.UP?(q&&(e=g.getRootCell(e,f).rowIndx,d=e-b),d=this._decrRowIndx(d),e=d+b,f=C?C.colIndx:f,null!=d&&this.select({rowIndx:e,colIndx:f,evt:a})):z==y.DOWN&&(d+=q&&q.rowspan&&d+q.rowspan<c.pdata.length?q.rowspan-1:0,f=C?C.colIndx:f,d=this._incrRowIndx(d),null!=d&&(e=d+b,this.select({rowIndx:e,colIndx:f,evt:a})))}else if(z==y.PAGE_DOWN||z==y.SPACE){if(c=this.pageDown(d))d=c.rowIndxPage,null!=d&&(e=d+b,this.select({rowIndx:e,colIndx:f,evt:a}))}else if(z==y.PAGE_UP){if(c=
this.pageUp(d))d=c.rowIndxPage,null!=d&&(e=d+b,this.select({rowIndx:e,colIndx:f,evt:a}))}else z==y.HOME?(x?e=c.getFirstVisibleRIP()+b:f=c.getFirstVisibleCI(),this.select({rowIndx:e,colIndx:f,evt:a})):z==y.END?(x?e=c.getLastVisibleRIP()+b:f=c.getLastVisibleCI(),this.select({rowIndx:e,colIndx:f,evt:a})):z==y.ENTER?(g=c.getCell({rowIndxPage:d,colIndx:f}))&&0<g.length&&(e=d+b,b=c.isEditableRow({rowIndx:e}),q=c.isEditableCell({rowIndx:e,colIndx:f}),b&&q?c.editCell({rowIndxPage:d,colIndx:f}):(b=g.find("button"),
b.length&&l(b[0]).click())):x&&"65"==z?(b=c.iSelection,"row"==q.type&&"single"!=q.mode?b.selectAll({type:"row",all:q.all}):"cell"==q.type&&"single"!=q.mode&&b.selectAll({type:"cell",all:q.all})):p.pressToEdit&&(32<=z&&127>=z||189==z)&&!x?46==z?c.clear():((g=c.getCell({rowIndxPage:d,colIndx:f}))&&0<g.length&&(e=d+b,b=c.isEditableRow({rowIndx:e}),q=c.isEditableCell({rowIndx:e,colIndx:f}),b&&q&&c.editCell({rowIndxPage:d,colIndx:f,select:!0})),n=!1):n=!1;n&&a.preventDefault()}};g.incrPageSize=function(){for(var a=
this.that,c=a.$tbl,b=c.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),c=parseInt(c.css("marginTop")),c=a.iRefresh.getEContHt()-c,e=b.length-1;0<=e;e--){var d=b[e];if(d.offsetTop<c)break}return{rowIndxPage:a.getRowIndx({$tr:l(d)}).rowIndxPage}};g.pageNonVirtual=function(a,c){var b=this.that,e=b.$cont[0].offsetHeight-b._getSBHeight(),d=b.getRow({rowIndxPage:a}),f=0,g=0,n=l(d[0])[c]("tr.pq-grid-row"),h=n.length;if(0<h){do{d=n[g];f+=d.offsetHeight;if(f>=e)break;g++}while(g<
h);g=0<g?g-1:g;do if(d=l(n[g]),a=b.getRowIndx({$tr:d}).rowIndxPage,null!=a)break;else g--;while(0<=g)}return a};g.pageDown=function(a){var c=this.that,b=c.options,e=c.vscroll,d=e.option("cur_pos"),f=e.option("num_eles"),g=e.option("ratio");if(b.virtualY){if(d<f-1){a=this.incrPageSize().rowIndxPage;var n=c._calcCurPosFromRowIndxPage(a);if(null==n)return;e.option("cur_pos",n);e.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>g&&(b=c.iRefresh.getEContHt(),c=c.iMouseSelection,c.updateTableY(-1*
b),c.syncScrollBarVert());return{rowIndxPage:a,curPos:n}};g.pageUp=function(a){var c=this.that,b=c.options,e=c.vscroll,d=e.option("cur_pos"),f=e.option("ratio");if(b.virtualY){if(0<d){a=this.decrPageSize().rowIndxPage;var g=c._calcCurPosFromRowIndxPage(a);if(null==g)return;e.option("cur_pos",g);e.scroll()}}else null!=a?a=this.pageNonVirtual(a,"prevAll"):0<f&&(b=c.iRefresh.getEContHt(),c=c.iMouseSelection,c.updateTableY(b),c.syncScrollBarVert());return{rowIndxPage:a,curPos:g}};g.decrPageSize=function(){var a=
this.that,c=a.$tbl.children("tbody").children("tr.pq-grid-row").not(".pq-group-row,.pq-summary-row"),b=a.options.freezeRows,e=0;if(c.length){var d;b?(d=c.filter("tr.pq-last-frozen-row"),d.length&&(d=d.next())):2<=c.length&&(d=l(c[1]));d&&d.length&&(e=a.getRowIndx({$tr:d}).rowIndxPage,e=e-a.pageSize+3,0>e&&(e=0))}return{rowIndxPage:e}};a._calcNumHiddenFrozens=function(){for(var a=0,c=this.options.freezeCols,b=0;b<c;b++)this.colModel[b].hidden&&a++;return a};a._calcNumHiddenUnFrozens=function(a){var c=
0;a=null!=a?a:this.colModel.length;for(var b=this.options.freezeCols;b<a;b++)this.colModel[b].hidden&&c++;return c};a._getSBHeight=function(){return this.iRefresh.getSBHeight()};a._getSBWidth=function(){return this.iRefresh.getSBWidth()};a.getFirstVisibleRIP=function(a){var c=this.pdata;a=a?this.initV:0;for(var b=c.length;a<b;a++)if(!c[a].pq_hidden)return a};a.getLastVisibleRIP=function(){for(var a=this.pdata,c=a.length-1;0<=c;c--)if(!a[c].pq_hidden)return c;return null};a.getFirstVisibleCI=function(a){var c=
this.colModel,b=c.length;for(a=a?this.initH:0;a<b;a++)if(!c[a].hidden)return a;return null};a.getLastVisibleCI=function(){for(var a=this.colModel,c=a.length-1;0<=c;c--)if(!a[c].hidden)return c;return null};a.getTotalVisibleColumns=function(){for(var a=this.colModel,c=a.length,b=0,e=0;e<c;e++)a[e].hidden||b++;return b};a._calcCurPosFromRowIndxPage=function(a){var c=this.options,b=c.groupModel,e=b?this.dataGM:this.pdata,d=c.freezeRows;if(a<d)return 0;for(var c=0,f=d,g=e.length;d<g;d++){var n=e[d];if(!b||
!n.groupSummary&&!n.groupTitle){if(f==a)break;f++}n.pq_hidden||c++}return c>=g?null:c};a._calcCurPosFromColIndx=function(a){var c=this.colModel,b=this.options.freezeCols;if(a<b)return 0;for(var e=0,d=b,f=c.length;b<f;b++){var g=c[b];if(d==a)break;d++;g.hidden||e++}return e>=f?null:e};a.calcWidthCols=function(a,c,b){var e=0,d=this.options.numberCell,f=this.colModel;-1==a&&(d.show&&(e=b?e+(parseInt(d.width)+1):e+d.outerWidth),a=0);if(b)for(;a<c;a++){if((b=f[a])&&!b.hidden){if(!b._width)throw"assert failed";
e+=b._width+0}}else for(;a<c;a++)(b=f[a])&&!b.hidden&&(e+=b.outerWidth);return e};a.calcHeightFrozenRows=function(){var a=this.$tbl,c=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(c=a[0],c=c.offsetTop+c.offsetHeight);return c};a._calcRightEdgeCol=function(a){var c=0,b=0,e=this.colModel,d=this.initH,f=this.options,g=f.freezeCols,f=f.numberCell;f.show&&(c+=f.outerWidth,b++);for(f=0;f<=a;f++){f<d&&f>=g&&(f=d);var n=e[f];n.hidden||(c+=n.outerWidth,b++)}return{width:c,cols:b}};a.nestedCols=
function(a,c,b){var e=a.length,d=[];null==c&&(c=1);for(var f=c,g=0,n=0,h=0;h<e;h++){var q=a[h];if(!0===b||!1===b)q.hidden=b;if(null!=q.colModel&&0<q.colModel.length){var l=this.nestedCols(q.colModel,c+1,q.hidden),d=d.concat(l.colModel);0<l.colSpan?(l.depth>f&&(f=l.depth),q.colSpan=l.colSpan,g+=l.colSpan):(q.colSpan=0,q.hidden=!0);q.childCount=l.childCount;n+=l.childCount}else q.hidden?q.colSpan=0:(q.colSpan=1,g++),q.childCount=0,n++,d.push(q)}return{depth:f,colModel:d,colSpan:g,width:0,childCount:n}};
a.getHeadersCells=function(){for(var a=this.options.colModel,c=this.colModel.length,b=this.depth,e=[],d=0;d<b;d++){e[d]=[];for(var f=0,g=0,n=0;n<c;n++){var h;if(0==d)h=a[f];else{var q=e[d-1][n];h=q.colModel;if(null==h||0==h.length)h=q;else{for(var q=n-q.leftPos,l=0,p=0,y=0;y<h.length;y++)if(l+=0<h[y].childCount?h[y].childCount:1,q<l){p=y;break}h=h[p]}}q=h.childCount?h.childCount:1;n==g?(h.leftPos=n,e[d][n]=h,g+=q,a[f+1]&&f++):e[d][n]=e[d][n-1]}}return this.headerCells=e};a.getDataType=function(){var a=
this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY";throw"dataType unknown";};a.assignRowSpan=function(){for(var a=this.colModel.length,c=this.headerCells,b=this.depth,e=0;e<a;e++)for(var d=0;d<b;d++){var f=c[d][e];if(!(0<e&&f==c[d][e-1]||0<d&&f==c[d-1][e])){for(var g=1,n=d+1;n<b;n++)f==c[n][e]&&g++;f.rowSpan=g}}return c};a._autoGenColumns=function(){var a=this.options,c=a.columnTemplate||{},e=c.dataType,d=c.title,f=c.width,c=a.dataModel.data,g=b.validation,n=[];c&&c.length&&
l.each(c[0],function(a,c){var b="string";g.isInteger(c)?b=-1<c+-1?"float":"integer":g.isDate(c)?b="date":g.isFloat(c)&&(b="float");n.push({dataType:e?e:b,dataIndx:a,title:d?d:a,width:f?f:100})});a.colModel=n};a._calcThisColModel=function(){var a=this.options,c=a.columnTemplate,b=a.colModel;b||(this._autoGenColumns(),b=a.colModel);a=this.nestedCols(b);this.colModel=a.colModel;this.depth=a.depth;a=this.colModel;b=a.length;if(c)for(var e=0;e<b;e++){var d=a[e],f=l.extend({},c,d,!0);l.extend(d,f,!0)}this.getHeadersCells();
this.assignRowSpan();this._refreshDataIndices()};a._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};a.createTable=function(a){a.other=!0;var c=this.iGenerateView;c.generateView(a);c.scrollView()}})(jQuery);
(function(l){function p(a){this.that=a}function h(a,b,d){for(var f=0;b<d;b++)!0!==a[b].hidden&&f++;return f}function a(a){if(a.length)var b=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return b||l()}var b=l.paramquery._pqGrid.prototype;b.getHeaderColumnFromTD=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");var d;null!=b&&null!=a&&(b=parseInt(b),a=parseInt(a),d=this.headerCells[a][b]);
var f=!0;if(!d||d.colModel&&d.colModel.length)f=!1;return{column:d,colIndx:b,rowIndx:a,leaf:f}};b.flex=function(a){this.iResizeColumns.flex(a)};l.paramquery.cHeader=p;b=p.prototype;b.createHeader=function(){var a=this.that,b=this,d=a.options,f=d.bootstrap,g=(f.on?f.thead:"")+" pq-grid-header-table ",h=d.ui,n=f.on?"":h.header,k=d.hwrap,f=a.pqpanes,m=parseInt(d.freezeCols),F=d.numberCell,h=a.colModel,s=d.sortModel,p=a.depth,r=a.iGenerateView.colDef,v=a.initH,B=a.finalH,A=a.headerCells,t=a.$header_o;
if(null==B)throw"finalH required for _createHeader";if(!1===d.showHeader)t.empty().css("display","none");else{t.css("display","");d=["<table class='"+(k?g+"pq-wrap ":g+"pq-no-wrap ")+"' cellpadding=0 cellspacing=0 >"];if(1<=p){d.push("<tr class='pq-row-hidden'>");F.show&&d.push("<td style='width:"+F.width+"px;' ></td>");g=0;for(k=r.length;g<k;g++){var w=r[g],x=w.colIndx;d.push("<td style='width:"+w.column.outerWidth+"px;' pq-col-indx="+x+"></td>")}d.push("</tr>")}for(var y=0;y<p;y++){d.push("<tr class='pq-grid-title-row'>");
0==y&&F.show&&d.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",p,"'><div class='pq-td-div'>",F.title?F.title:"&nbsp;","</div></th>"].join(""));g=0;for(k=r.length;g<k;g++)w=r[g],x=w.colIndx,b.createHeaderCell(y,x,A,d,"pq-grid-col ",m,v,p,s);d.push("</tr>")}a.ovCreateHeader(d,"pq-grid-col ");d.push("</table>");m=d.join("");t.empty();t[0].innerHTML=f.vH?["<span class='pq-grid-header pq-grid-header-left ",n,"'><div class='pq-grid-header-inner'>",m,"</div></span><span class='pq-grid-header ",
n,"'><div class='pq-grid-header-inner'>",m,"</div></span>"].join(""):["<span class='pq-grid-header ",n,"'><div class='pq-grid-header-inner'>",m,"</div></span>"].join("");n=a.$header=t.children(".pq-grid-header");t=n.children(".pq-grid-header-inner");a.$tbl_header=t.children("table");a.$header_left=l(n[0]);a.$header_left_inner=l(t[0]);f.vH&&(a.$header_right=l(n[1]),a.$header_right_inner=l(t[1]));n.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(v,B,h);a._trigger("refreshHeader",
null,null)}};b._onHeaderClick=function(a){var b=this.that;if(!b.iDragColumns||"stop"==b.iDragColumns.status){var d=l(a.target);if(d.is("input,label"))return!0;d=d.closest(".pq-grid-col");if(d.length&&(a.stopImmediatePropagation(),d=b.getHeaderColumnFromTD(d),b=d.colIndx,!1!=d.leaf))return this._onHeaderCellClick(b,a)}};b.createHeaderCell=function(a,b,d,f,g,q,n,k,m){var l=this.that,s=d[a][b],p=this.that.colModel,r=s.colSpan;if(!(s.hidden||0<a&&s==d[a-1][b])){if(0<b&&s==d[a][b-1]){if(b>n)return;a:{d=
d[a];for(var v=0;v<d.length;v++)if(d[v]==s){d=v;break a}d=void 0}if(d<q)return;r-=h(p,d,b)}else q&&b<q&&b+r>q&&(r-=h(p,q,n),p=h(p,b,q),r=Math.max(r,p));d=s.halign;var v=s.align,p=s.title,B=s.type,p="function"==typeof p?p.call(l,{column:s,colIndx:b}):p,p=null!=p?p:"checkbox"==B&&s.cb.header?"<input type='checkbox'/>":s.dataIndx;s.pqtitle=p;null!=d?g+=" pq-align-"+d:null!=v&&(g+=" pq-align-"+v);b==q-1&&1==k&&(g+=" pq-last-frozen-col");b<=q-1?g+=" pq-left-col":b>=n&&(g+=" pq-right-col");(q=s.cls)&&(g=
g+" "+q);if(null==s.colModel||0==s.colModel.length)g+=" pq-grid-col-leaf";q=m.space?"pq-space":"";f.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",g,"' rowspan=",s.rowSpan," colspan=",r,"><div class='pq-td-div'>",p,"<span class='pq-col-sort-icon ",q,"'></span>",m.number?"<span class='pq-col-sort-count "+q+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b){var d=this.that,f=d.colModel[a],g=d.options,h=g.sortModel,n=f.dataIndx;!1!==d._trigger("headerCellClick",
b,{column:f,colIndx:a,dataIndx:n})&&(g.selectionModel.column?(g={c1:a,firstC:a},f=d.iSelection.address(),b.shiftKey&&((g=f.length)&&"column"==f[g-1].type&&(g=f[g-1],g.c1=g.firstC,g.c2=a,g.r1=g.r2=g.type=void 0),g=f),d.range(g).select(),d.focus({rowIndxPage:d.getFirstVisibleRIP(!0),colIndx:a})):h.on&&!1!=f.sortable&&(h.multiKey&&(h.single=!b[h.multiKey]),d.sort({sorter:[{dataIndx:n}],addon:!0,evt:b})))};b._refreshResizeColumn=function(a,b,d){a=this.that;d=a.options;b=d.filterModel.ficon?!0:!1;var f=
d.numberCell;d=parseInt(d.freezeCols);var g=[],h=[],n=a.pqpanes.vH,k=0,m=0;f.show&&(k=f.outerWidth,f.resizable&&g.push("<div pq-col-indx='-1' style='left:",k-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var f=a.iGenerateView.colDef,l=0,s=f.length;l<s;l++){var m=f[l],p=m.colIndx,m=m.column,r=m.ficon,v=r||null==r&&b,r=g,k=k+m.outerWidth;if(!1!==m.resizable||v)n&&p>=d&&(r=h),m=k-5,r.push("<div pq-col-indx='",p,"' style='left:",m,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}h.length&&
a.$header_right_inner.append(h.join(""));a.$header_left_inner.append(g.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,d=b.bootstrap,b=b.ui,f=a.$header;if(f){var g=a.iSort.getSorter(),h=g.length,n=!1;a.options.sortModel.number&&1<h&&(n=!0);for(var k=0;k<h;k++){var m=g[k],l=a.getColIndx({dataIndx:m.dataIndx}),s=m.dir,m=d.on?d.header_active:b.header_active+" pq-col-sort-"+("up"==s?"asc":"desc"),s=d.on?" glyphicon glyphicon-arrow-"+s:"ui-icon ui-icon-triangle-1-"+("up"==s?
"n":"s"),l=f.find(".pq-grid-col-leaf[pq-col-indx="+l+"]");l.addClass(m);l.find(".pq-col-sort-icon").addClass(s);n&&l.find(".pq-col-sort-count").html(k+1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var c=l(a.target);b.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);c.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var d=a.options.flex;if(d.on&&d.one)a.one("dataReady",function(){this.one("refresh",function(a){b.flex()})})};
l.paramquery.cResizeColumns=b;b=b.prototype=new l.paramquery.cClass;b.doubleClick=function(a){var b=this.that.options,d=b.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||d.on&&this.flex(d.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b.flex=function(c){c=c||{};var b=this.that,d=b.element,f=b.options.numberCell,g=c.colIndx,h,n=c.dataIndx;c=null==c.refresh?!0:c.refresh;var k=!1,m=b.$tbl,F=b.$tbl_header,s=m&&m.length?l(m[0]).clone():l(),p=b.tables&&b.tables.length?b.tables[0].$tbl:null,
p=p?l(p[0]).clone():l(),r=F&&F.length?l(F[0]).clone():l();if(null!=n)for(g=[],F=0,m=n.length;F<m;F++){var v=b.colIndxs[n[F]];null!=v&&g.push(v)}null!=g&&(g.sort(function(a,c){return a-c}),h=g.length);r.find("tr.pq-grid-header-search-row").remove();var n=a(s),v=a(p),B=a(r),s=l("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(r).append(p).append(s);s.addClass(d.attr("class"));d.parent().append(s);d=f.show?0:-1;f=b.iGenerateView.colDef;F=0;for(m=f.length;F<
m;F++){p=f[F];r=p.colIndx;p=p.column;d++;if(g)if(g.length)if(g[0]===r)g.splice(0,1);else continue;else break;var r=n[d],A=B[d],t=v[d],r=Math.max(r?r.offsetWidth:0,t?t.offsetWidth:0,A?A.offsetWidth:0)-0+1;p._width!==r&&(k=!0,p.width=r,1===h&&(p._resized=!0))}s.remove();k&&c&&b.refresh({source:"flex"})};b.setDraggables=function(a){var b=this,d,f,g;l(a.target).draggable({axis:"x",helper:function(a,c){var d=l(a.target),f=parseInt(d.attr("pq-col-indx"));b._setDragLimits(f);b._getDragHelper(a,c);return d},
start:function(a,c){d=c.position.left;g=parseInt(b.$cl[0].style.left)},drag:function(a,c){f=c.position.left;b.$cl[0].style.left=g+(f-d)+"px"},stop:function(a,c){return b.resizeStop(a,c,d)}})};b._getDragHelper=function(a){var b=this.that,d=parseInt(b.options.freezeCols);a=l(a.target);var f=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var g=f.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(f);this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(f);this.$cl.height(g);
this.$clleft.height(g);f=l("[pq-col-indx="+a+"]",b.$header)[0];g=f.offsetLeft;b.pqpanes.vH?a>=d&&(g-=b.$header[1].scrollLeft):(g+=b.$header[0].offsetLeft,g-=b.$header[0].scrollLeft);this.$clleft.css({left:g});g+=f.offsetWidth;this.$cl.css({left:g})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,d=b.colModel[a],f=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(f=b.$header_right);b=f.find("th[pq-col-indx='"+a+"']").offset().left+d._minWidth;d=b+d._maxWidth-d._minWidth;f.find("div.pq-grid-col-resize-handle[pq-col-indx="+
a+"]").draggable("option","containment",[b,0,d,0])}};b.resizeStop=function(a,b,d){var f=this.that,g=f.colModel,h=f.options.numberCell;this.$clleft.remove();this.$cl.remove();d=b.position.left-d;b=l(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var g=null,n=parseInt(h.width);h.width=n+d}else g=g[b],n=parseInt(g.width),g.width=n+d,g._resized=!0;f.refresh();f._trigger("columnResize",a,{colIndx:b,column:g,dataIndx:g?g.dataIndx:null,oldWidth:n,newWidth:g?g.width:h.width})};b=function(a){this.that=
a;this.$drag_helper=null;var b=a.options.dragColumns,d=b.topIcon,f=b.bottomIcon,g=this;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+d+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+f+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",function(a,c){if(!l(a.target).is("input,select,textarea")&&!a.pq_composed){g.setDraggables(a,c);a.pq_composed=!0;var b=l.Event("mousedown",a);
l(a.target).trigger(b)}})};l.paramquery.cDragColumns=b;b=b.prototype;b.showFeedback=function(a,b){var d=this.that,f=a[0],g=d.$grid_center[0].offsetTop,h=f.offsetLeft-f.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:f.offsetWidth)-8,d=g+d.$header[0].offsetHeight;this.$arrowTop.css({left:h,top:g+f.offsetTop-16,display:""});this.$arrowBottom.css({left:h,top:d,display:""})};b.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};
b.updateDragHelper=function(a){var b=this.that.options.dragColumns,d=b.acceptIcon,b=b.rejectIcon,f=this.$drag_helper;f&&(a?(f.children("span.pq-drag-icon").addClass(d).removeClass(b),f.removeClass("ui-state-error")):(f.children("span.pq-drag-icon").removeClass(d).addClass(b),f.addClass("ui-state-error")))};b.setDraggables=function(a,b){var d=l(a.currentTarget),f=this.that,g=f.options.dragColumns.rejectIcon,h=this;d.hasClass("ui-draggable")||!1!==f.getHeaderColumnFromTD(d).leaf&&d.draggable({distance:10,
cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:f.element,revert:"invalid",helper:function(){var a=l(this);h.status="helper";h.setDroppables(a);f.$header.find(".pq-grid-col-resize-handle").hide();var c=a.attr("pq-col-indx"),b=a.attr("pq-row-indx");a.droppable("destroy");a=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+g+" glyphicon glyphicon-remove'></span>"+f.headerCells[b][c].pqtitle+"</div>");h.$drag_helper=a;return a[0]},
drag:function(a,c){h.status="drag";var b=l(".pq-drop-hover",f.$header);if(0<b.length){h.showArrows();h.updateDragHelper(!0);var d=b.width();a.clientX-b.offset().left+l(document).scrollLeft()<d/2?(h.leftDrop=!0,h.showFeedback(b,!0)):(h.leftDrop=!1,h.showFeedback(b,!1))}else h.hideArrows(),f.$toolbar.hasClass("pq-drop-hover")?h.updateDragHelper(!0):h.updateDragHelper()},stop:function(a,c){h.status="stop";f.$header.find(".pq-grid-col-resize-handle").show();h.hideArrows()}})};b._columnIndexOf=function(a,
b){for(var d=0,f=a.length;d<f;d++)if(a[d]==b)return d;return-1};b.setDroppables=function(a){var b=this.that,d=this,f={hoverClass:"pq-drop-hover ui-state-highlight",tolerance:"pointer",drop:function(a,c){if(!d.dropPending){var k=parseInt(c.draggable.attr("pq-col-indx")),f=parseInt(c.draggable.attr("pq-row-indx")),g=l(this),h=parseInt(g.attr("pq-col-indx")),p=parseInt(g.attr("pq-row-indx")),r=b.options.colModel,v=b.headerCells,B=1<v.length,g=v[p][h],A=f?v[f-1][k].colModel:r,h=p?v[p-1][h].colModel:r,
f=d._columnIndexOf(A,v[f][k]),v=d.leftDrop?1:0,t=A.splice(f,1)[0],w=d._columnIndexOf(h,g)+1-v;h.splice(w,0,t);d.dropPending=!0;window.setTimeout(function(){b._calcThisColModel();!1!==b._trigger("columnOrder",null,{dataIndx:t.dataIndx,column:t,oldcolIndx:k,colIndx:B?b.getColIndx({column:t}):w})&&b.refresh();d.dropPending=!1},0)}}};a=b.$header_left.find(".pq-left-col");var g=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):b.$header_left.find(".pq-right-col");a=a.add(g);a.each(function(a,
c){var b=l(c);b.hasClass("ui-droppable")||b.droppable(f)})}})(jQuery);
(function(l){function p(a){var b=this;this.that=a;this.type="detail";this.refreshComplete=!0;this.detachView=!1;a.on("cellClick",function(a,e){return b.toggle(a,e)}).on("cellKeyDown",function(a,e){if(a.keyCode==l.ui.keyCode.ENTER)return b.toggle(a,e)}).on("refresh",function(a,e){return b.aftertable()}).on("beforeTableView",function(a,e){return b.beforeTableView(a,e)}).on("tableWidthChange",function(a,e){return b.tableWidthChange(a,e)})}l.paramquery.cHierarchy=p;var h=p.prototype=new l.paramquery.cClass;
h.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var a=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),b=0,c=a.length;b<c;b++)for(var e=l(a[b]).find(".pq-grid"),d=0,f=e.length;d<f;d++){var g=l(e[d]);g.is(":visible")&&g.pqGrid("onWindowResize")}this.refreshComplete=!0}};h.aftertable=function(a){var b=this.that,c=b.options.detailModel.init,e=b.pdata;if(this.refreshComplete){this.refreshComplete=!1;a=a?a:b.$tbl.children("tbody").children("tr.pq-detail-child");
for(var d=0,f=a.length;d<f;d++){var g=l(a[d]),h=g.attr("pq-row-indx"),n=e[h],h=!1,k=n.pq_detail.child;k||"function"!=typeof c||(h=!0,k=c.call(b.element[0],{rowData:n}),n.pq_detail.child=k,n.pq_detail.height=25);g=g.children("td.pq-detail-child");g.append(k);g=g.find(".pq-grid");k=0;for(n=g.length;k<n;k++){var m=l(g[k]);h?m.hasClass("pq-pending-refresh")&&m.is(":visible")&&(m.removeClass("pq-pending-refresh"),m.pqGrid("refresh")):m.is(":visible")&&m.pqGrid("onWindowResize")}}this.refreshComplete=!0;
this.detachView=!1}};h.beforeTableView=function(a,b){this.detachView||(this.detachInitView(),this.detachView=!0)};h.detachInitView=function(a){var b=this.that.$tbl;if(b&&b.length)for(a=a?a:b.children("tbody").children("tr.pq-detail-child"),b=0;b<a.length;b++)l(a[b]).children("td.pq-detail-child").children().detach()};h.toggle=function(a,b){var c=this.that,e=b.column,d=b.rowData,f=b.rowIndx,g=this.type;e&&e.type===g&&(e={rowIndx:f,focus:!0},null==d.pq_detail?c.rowExpand(e):!1===d.pq_detail.show?c.rowExpand(e):
this.rowCollapse(e))};h.rowExpand=function(a){this.normalize(a);var b=this.that,c=a.rowData,e=a.rowIndx,d=a.rowIndxPage,f=b.options.detailModel;if(null!=c){if(!1===b._trigger("beforeRowExpand",null,a))return!1;null==c.pq_detail?c.pq_detail={show:!0}:!1===c.pq_detail.show&&(c.pq_detail.show=!0);f.cache||this.rowInvalidate(a);b.refreshRow({rowIndx:e});f=[];b.iGenerateView._generateDetailRow(c,d,f,null,!1);c=b.getRow({rowIndxPage:d});c.after(f.join(""));this.aftertable(c.next());a.focus&&b.getCell({rowIndx:e,
dataIndx:"pq_detail"}).attr("tabindex","0").focus();a.scrollRow&&this.scrollRow({rowIndx:e})}};h.rowInvalidate=function(a){a=this.that.getRowData(a);var b=a.pq_detail;if(b=b?b.child:null)b.remove(),a.pq_detail.child=null,a.pq_detail.height=0};h.normalize=function(a){var b=this.that,c=a.rowIndx,e=a.rowIndxPage,d=b.rowIndxOffset;a.rowIndx=null==c?e+d:c;a.rowIndxPage=null==e?c-d:e;a.rowData=b.getRowData(a)};h.rowCollapse=function(a){this.normalize(a);var b=this.that,c=b.options,e=a.rowData,d=a.rowIndx,
f=a.rowIndxPage,g=c.detailModel;null!=e&&null!=e.pq_detail&&!0===e.pq_detail.show&&(g.cache||this.rowInvalidate(a),e.pq_detail.show=!1,c.virtualY?b.refresh():(c=b.getRow({rowIndxPage:f}).next("tr.pq-detail-child"),c.length&&(this.detachInitView(c),c.remove(),b.refreshRow({rowIndx:d})),a.focus&&b.getCell({rowIndx:d,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),a.scrollRow&&(d=a.rowIndx,this.scrollRow({rowIndx:d})))}})(jQuery);
(function(l){var p=function(h){this.that=h};l.paramquery.cRefresh=p;p=p.prototype;p._computeOuterWidths=function(){for(var h=this.that,a=h.options.numberCell,h=h.colModel,b=h.length,c=0;c<b;c++){var e=h[c];e.outerWidth=e._width+0}a.show&&(a.outerWidth=a.width)};p.autoFit=function(){var h=this.that,a=h.colModel,b=a.length,h=h.calcWidthCols(-1,b,!0),c=this.contWd-this.getSBWidth();if(h!==c){for(var h=h-c,e,c=[],d=0;d<b;d++){var f=a[d],g=f._percent,q=f._resized;f.hidden||g||q||(0>h?(g=f._maxWidth-f._width)&&
c.push({availWd:-1*g,colIndx:d}):(g=f._width-f._minWidth)&&c.push({availWd:g,colIndx:d}));q&&(e=f,delete f._resized)}c.sort(function(a,c){return a.availWd>c.availWd?1:a.availWd<c.availWd?-1:0});d=0;for(b=c.length;d<b;d++){var f=c[d],g=f.availWd,f=f.colIndx,q=Math.round(h/(b-d)),f=a[f],n;n=f._width;Math.abs(g)>Math.abs(q)?(n-=q,h-=q):(n-=g,h-=g);f.width=f._width=n}0!=h&&e&&(n=e._width-h,n>e._maxWidth?n=e._maxWidth:n<e._minWidth&&(n=e._minWidth),e.width=e._width=n)}};p.autoLastColumn=function(){var h=
this.that,a=h.colModel,b=a.length,c=h.options.freezeCols,e=this.contWd-this.getSBWidth(),d=h.calcWidthCols(-1,c,!0),e=e-d,d=!1,h=h.getLastVisibleCI();if(null!=h&&(h=a[h],!h._percent)){for(var f=h._width,g,q=h._minWidth,n=h._maxWidth,b=b-1;b>=c;b--){var k=a[b];if(!k.hidden&&(k=k._width+0,e-=k,0>e)){d=!0;g=f+e>=q?f+e:f+k+e;break}}d||(g=f+e);g>n?g=n:g<q&&(g=q);h.width=h._width=g}};p.numericVal=function(h,a){var b;b=-1<(h+"").indexOf("%")?parseInt(h)*a/100:parseInt(h);return Math.round(b)};p.refreshColumnWidths=
function(h){h=h||{};var a=this.that,b=a.options,c=b.numberCell,e="flex"===b.width,d=a.colModel,f=b.scrollModel,g=f.lastColumn,f=f.autoFit,q=this.contWd,n=d.length,k=this.getSBWidth(),m=b._minColWidth,l=b._maxColWidth,p=0;c.show&&(c.width<c.minWidth&&(c.width=c.minWidth),c.outerWidth=c.width+1,p=c.outerWidth);c=e?null:q-k-p;m=Math.floor(this.numericVal(m,c));l=Math.ceil(this.numericVal(l,c));q=0;if(!e&&5>c||isNaN(c)){if(b.debug)throw"availWidth N/A";}else{delete a.percentColumn;for(k=0;k<n;k++)if(p=
d[k],!p.hidden){var u=p.width,r=-1<(u+"").indexOf("%")?!0:null,v=p.minWidth,B=p.maxWidth,v=v?this.numericVal(v,c):m,B=B?this.numericVal(B,c):l;B<v&&(B=v);if(void 0!=u){var A=0;!e&&r?(a.percentColumn=!0,p.resizable=!1,p._percent=!0,u=this.numericVal(u,c)-0,A=Math.floor(u),q+=u-A,1<=q&&(A+=1,q-=1)):u&&(A=parseInt(u));A<v?A=v:!e&&A>B&&(A=B);p._width=A}else p._width=v;r||(p.width=p._width);p._minWidth=v;p._maxWidth=e?1E3:B}!1===e&&!1!==h.refreshWidth&&(f&&this.autoFit(),"auto"===g&&b.virtualX&&this.autoLastColumn());
this._computeOuterWidths()}};p.estRowsInViewPort=function(){var h=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=h};p._refreshFrozenLine=function(){var h=this.that,a=h.options,b=a.numberCell,c=h.$cont_o,e=a.freezeBorders,d=a.freezeCols,a=a.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();e&&(d&&(e=h.calcWidthCols(-1,d),isNaN(e)||0===e||0<e&&b.show&&e===b.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",
e,"px;' ></div>"].join("")).appendTo(c))),a&&(h=h.$tbl))&&(h=h.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(h.offsetTop+h.offsetHeight-1)+"px;' ></div>").appendTo(c))};p.setScrollVNumEles=function(h){var a=this.that;h=a.vscroll;var b=a.options;if(!b.maxHeight&&"flex"===b.height)return h.option("num_eles",0),0;var c=a.iHierarchy?!0:!1,e=parseInt(h.option("num_eles")),d=parseInt(h.option("cur_pos")),e=this.getEContHt(),
b=(b.groupModel?a.dataGM:a.pdata)?a.totalVisibleRows:0,f,g=0;a.$tbl&&0<a.$tbl.length&&(f=a.$tbl[a.$tbl.length-1],g=f.scrollHeight,f=l(f));if(0<g){f=f.children().children("tr");d=a=0;for(g=1;g<f.length;g++){var q=f[g],a=a+q.offsetHeight;if(a>=e){c&&l(q).hasClass("pq-detail-child")&&(d=1<d?d-1:1);break}else c?!1===l(q).hasClass("pq-detail-child")&&d++:d++}e=b-d+1}else e=d+1;e>b&&(e=b);h.option("num_eles",e);return e};p._setScrollVLength=function(h){h=this.that;var a=h.options;if("flex"!==a.height||
a.maxHeight){var a=this.getSBHeight(),b=this.contHt-a+this.headerHt-2;h.vscroll.widget().css("bottom",a);h.vscroll.option("length",b)}};p.setHeaderHeight=function(){var h=this.that,a=h.$header,b,c,e;if(a&&a.length){if(1<a.length){if(b=a[0].offsetHeight,c=a[1].offsetHeight,e=Math.max(b,c),b!==c){var d=l(a[0]).find(".pq-grid-header-search-row"),f=l(a[1]).find(".pq-grid-header-search-row");d.css("height","");f.css("height","");b=a[0].offsetHeight;c=a[1].offsetHeight;e=Math.max(b,c);b<e?d.height(f[0].offsetHeight):
f.height(d[0].offsetHeight)}}else e=b=a[0].offsetHeight;h.$header_o.height(e-2);this.headerHt=e}else h.$header_o.height(0),this.headerHt=0};p.initContHeight=function(){var h=this.that,a=h.options;if("flex"!=a.height||a.maxHeight)this.contHt=this.height-(a.showHeader?this.rowHt:0)-(a.showTop?h.$top[0].offsetHeight:0)-(a.showBottom?h.$bottom[0].offsetHeight:0)};p.initContWidth=function(){var h=this.that.options;if("flex"!==h.width||h.maxWidth)this.contWd=this.width};p.setContHeight=function(h){h=this.that;
var a=this.height-h.$header_o[0].offsetHeight-(h.options.showTop?h.$top[0].offsetHeight:0)-h.$bottom[0].offsetHeight,a=0<=a?a:"";h.$cont.height(a);this.contHt=a};p.setContAndGridHeightForFlex=function(){var h=this.that,a=h.hscroll.widget();if(this.vscroll)a.css("position","");else{a.css("position","relative");var a=h.$cont,b=h.options.cls,c=a.children("."+b.cont_inner_b);a.height("");c.length||(c=a.children("."+b.cont_inner));c.height("");h.element.height("");h.$grid_center.height("")}};p.setContAndGridWidthFromTable=
function(){var h=this.that,a=h.calcWidthCols(-1,h.colModel.length),h=h.element,b=this.getSBWidth();this.contWd=a+b;h.width(this.contWd+"px")};p.getTotalVisibleRows=function(h,a,b){var c=this.that,e=this.estRowsInViewPort(),d=0,f=b?b.length:0,g=a,q=0,n=0,k=null,m=!1,l=!1,p=c.iHierarchy?!0:!1,c=c.options,u=c.detailModel.offset,r=0,v=this.rowHt,B=p?this.contHt:void 0;if(null==b||0==f)return{initV:null,finalV:null,tvRows:d,lastFrozenRow:null};for(var A=0,t=f>a?a:f;A<t;A++){var w=b[A],x=w.pq_hidden;x||
(k=A,d++,p&&((w=w.pq_detail)&&w.show?(w=w.height||0,w>u&&(w=u),r+=w+v):r+=v))}if(f<a)return{initV:k,finalV:k,tvRows:d,lastFrozenRow:k};if(1E4<f&&null==c.groupModel)return q=h+e,g=h+a,g=g>=f?f-1:g,q=q>=f?f-1:q,{initV:g,finalV:q<g?g:q,tvRows:f,lastFrozenRow:k};e-=d;A=a;for(t=f;A<t;A++)w=b[A],x=w.pq_hidden,m?l||(x?q++:n===e?l=!0:(q++,n++)):x?g++:n===h?(m=!0,q=g,n=0):(g++,n++),x||(d++,p&&m&&((w=w.pq_detail)&&w.show?(w=w.height||0,w>u&&(w=u),r+=w+v):r+=v,r>B&&(l=!0)));g=g>=f?f-1:g;q=q>=f?f-1:q;q=q<g?g:
q;return{initV:g,finalV:q,tvRows:d,lastFrozenRow:k}};p.calcInitFinal=function(){var h=this.that,a=h.options,b=a.virtualY,c=a.freezeRows,e="flex"===a.height,d=a.groupModel?h.dataGM:h.pdata;if(null==d||0===d.length)b=this.getTotalVisibleRows(f,c,d),h.totalVisibleRows=b.tvRows,h.initV=b.initV,h.finalV=b.finalV,h.lastFrozenRow=b.lastFrozenRow;else if(b){var f=parseInt(h.vscroll.option("cur_pos"));if(isNaN(f)||0>f)throw"cur_pos NA";h.scrollCurPos=f;b=this.getTotalVisibleRows(f,c,d);h.totalVisibleRows=
b.tvRows;h.initV=b.initV;h.lastFrozenRow=b.lastFrozenRow;h.finalV=e&&!a.maxHeight?d.length-1:b.finalV}else b=this.getTotalVisibleRows(0,c,d),h.lastFrozenRow=b.lastFrozenRow,h.totalVisibleRows=b.tvRows,h.initV=0,h.finalV=d.length-1};p.calcInitFinalH=function(){var h=this.that,a=h.options,b=a.virtualX,c=h.colModel,e=c.length;if(b){for(var d=parseInt(h.hscroll.option("cur_pos")),f=parseInt(a.freezeCols),g="flex"===a.width,q=f,n=0,k=f;k<e;k++)if(c[k].hidden)q++;else if(n===d)break;else q++,n++;q>e-1&&
(q=e-1);h.initH=q;if(g||!b)h.finalH=e-1;else{b=h.calcWidthCols(-1,f);d=this.getEContWd();for(k=q;k<e;k++)if(q=c[k],!q.hidden){q=q.outerWidth;if(!q&&a.debug)throw"outerwidth N/A";b+=q;if(b>d)break}a=k;a>e-1&&(a=e-1);h.finalH=a}}else h.initH=0,h.finalH=e-1};p._calcOffset=function(h){return(h=/(-|\+)([0-9]+)/.exec(h))&&3===h.length?parseInt(h[1]+h[2]):0};p.setMax=function(h){var a=this.that,b=a.element;(a=a.options[h])?(a==parseInt(a)&&(a+="px"),b.css(h,a)):b.css(h,"")};p.refreshGridWidthAndHeight=function(){var h=
this.that,a=h.options,b,c,e=-1<(a.width+"").indexOf("%")?!0:!1,d=-1<(a.height+"").indexOf("%")?!0:!1,f=-1<(a.maxHeight+"").indexOf("%")?!0:!1,g="flex"==a.height,q=f&&g,n=-1<(a.maxWidth+"").indexOf("%")?!0:!1,k="flex"==a.width,m=n&&k,h=h.element;if(e||d||q||m){var p=h.parent();if(!p.length)return;var s;p[0]==document.body||"fixed"==h.css("position")?(s=l(window).width(),p=window.innerHeight?window.innerHeight:l(window).height()):(s=p.width(),p=p.height());var u=this._calcOffset,r=e?u(a.width):0,u=
d?u(a.height):0;m?b=parseInt(a.maxWidth)*s/100:e&&(b=parseInt(a.width)*s/100+r);q?c=parseInt(a.maxHeight)*p/100:d&&(c=parseInt(a.height)*p/100+u)}b||(k&&a.maxWidth?n||(b=a.maxWidth):e||(b=a.width));c||(g&&a.maxHeight?f||(c=a.maxHeight):d||(c=a.height));parseFloat(b)==b?(b=b<a.minWidth?a.minWidth:b,h.css("width",b)):"auto"===b&&h.width(b);parseFloat(c)==c&&(c=c<a.minHeight?a.minHeight:c,h.css("height",c));this.width=Math.round(h.width());this.height=Math.round(h.height())};p.decidePanes=function(){var h=
this.that,a=h.pqpanes={v:!1,h:!1,vH:!1},b=h.options,h=b.virtualX,c=b.virtualY,e="flex"==b.height&&!b.maxHeight,d="flex"==b.width&&!b.maxWidth,f=b.numberCell,g=b.freezeRows,b=b.freezeCols;!g||e||!b&&!f.show||d?g&&!e?c||(a.h=!0):!b&&!f.show||d||h||(a.v=!0,a.vH=!0):(c||(a.h=!0),h||(a.v=!0,a.vH=!0))};p._storeColumnWidths=function(h){for(var a=this.that,b=a.options,c=a.colModel,e=b.virtualX,b=b.freezeCols,d=a.initH,a=h?c.length-1:a.finalH,f=[],g=0;g<=a;g++)!h&&e&&g<d&&g>=b&&(g=d),f[g]={outerWidth:c[g].outerWidth};
return f};p._isColumnWidthChanged=function(h){for(var a=this.that,b=a.colModel,a=a.iGenerateView.colDef,c=0,e=a.length;c<e;c++){var d=a[c].colIndx;if(b[d].outerWidth!==h[d].outerWidth)return!0}return!1};p.softRefresh=function(){var h=this.that,a=h.options;this.refreshScrollbars();h.iGenerateView.setPanes();h._saveDims();h.iMouseSelection.syncScrollBarVert();"flex"==a.height&&this.setContAndGridHeightForFlex();"flex"==a.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine()};p.refreshScrollbars=
function(h){h=h||{};var a=this.that,b=a.options,c="flex"===b.height,e="flex"===b.width;if((c||this.contHt)&&(e||this.contWd)&&null!==a.totalVisibleRows){var d=this.setScrollVNumEles(h),d=1<d?!0:!1;if((!c||b.maxHeight)&&d!==this.vscroll)if(this.vscroll=d,b.scrollModel.autoFit||b.virtualX||e){if(b=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(b)||e)this.ignoreTResize=!0,this._refreshTableWidths(b,{table:!0,header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),
this.setContHeight(),a.iGenerateView.setPanes(),d=this.setScrollVNumEles(!0),this.vscroll=1<d?!0:!1}else a.iGenerateView.setPanes();d=this.setScrollHNumEles();this.hscroll=1<d?!0:!1;this._setScrollHLength();this._setScrollVLength(h);this._setScrollHVLength()}};p._setScrollHVLength=function(){var h=this.that;this.vscroll&&this.hscroll||h.$hvscroll.css("visibility","hidden")};p._setScrollHLength=function(){var h=this.that,a=h.hscroll.widget(),b=h.$hvscroll;if(h.options.scrollModel.horizontal){a.css("visibility",
"");b.css("visibility","");var b=this.contWd,c=this.getSBWidth();a.css("right",0===c?0:"");h.hscroll.option("length",b-c)}else a.css("visibility","hidden"),b.css("visibility","hidden")};p.estVscroll=function(){var h=this.that,a=!0;null==h.totalVisibleRows||null==this.contHt?a=!1:h.totalVisibleRows*this.rowHt<this.contHt&&(a=!1);this.vscroll=a};p.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:0};p.estHscroll=function(){var h=this.that;if(null==this.contWd)throw"failed";
var a=!1;1<this.calcColsOutsideCont(h.colModel)+1&&(a=!0);this.hscroll=a};p.getSBHeight=function(){if("flex"===this.that.options.width)return 0;null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};p.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};p.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};p.calcColsOutsideCont=function(h){var a=this.that.options,b=a.numberCell,a=a.freezeCols,c=
this.contWd-this.getSBWidth(),e=0;b.show&&(e+=b.outerWidth);for(b=0;b<h.length;b++){var d=h[b];d.hidden||(e+=d.outerWidth)}var f=0,g=0,d=Math.round(e);d>c&&g++;for(b=a;b<h.length;b++)if(d=h[b],!d.hidden)if(f+=d.outerWidth,d=e-f,d>c)g++;else break;return g};p.setScrollHNumEles=function(){var h=this.that,a=h.options,b=h.colModel,c=a.scrollModel,e=0;if("flex"!==a.width||a.maxWidth)e="fullScroll"===c.lastColumn?b.length-a.freezeCols-h._calcNumHiddenUnFrozens():this.calcColsOutsideCont(b)+1;h.hscroll.option("num_eles",
e);return e};p.init=function(){var h=this.that,a=h.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;h.initH=h.initV=h.finalH=h.finalV=null;h.totalVisibleRows=h.lastFrozenRow=null;this.rowHt=a.rowHeight;this.headerHt=0;this.height=null};p.refresh=function(h){h=h||{};var a=this.that,b=h.header,c=h.table,e=h.pager,d=a.iGenerateView,f=a.element;if(f[0].offsetWidth){a.iMouseSelection.resetMargins();this.init();f=a.options;this.decidePanes();f.collapsible._collapsed=!1;this.setMax("maxHeight");
this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===b||!1===c)var g=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();d.createColDefs();!1!==b?a._createHeader():this._isColumnWidthChanged(g)&&this._refreshTableWidths(g,{header:!0});a._refreshHeaderSortIcons();!1!==e&&a._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==c?d.generateView({source:h.source}):(this._refreshTableWidths(g,{table:!0}),d.setPanes());
a._saveDims();d.scrollView();this.refreshScrollbars();"flex"==f.height&&this.setContAndGridHeightForFlex();"flex"==f.width&&this.setContAndGridWidthFromTable();this._refreshFrozenLine();a._createCollapse();f.dataModel.postDataOnce=void 0}else f.addClass("pq-pending-refresh")};p.refreshVscroll=function(h){h=this.that;var a=h.iGenerateView,b=h.options;if(b.virtualY&&!b.scrollModel.smooth){h.scrollMode=!0;var c=h.initV,e=h.finalV;this.calcInitFinal();var d=c-h.initV;b.fullrefreshOnScroll||b.detailModel.init||
b.groupModel||h._mergeCells||1!=Math.abs(d)?c==h.initV&&e==h.finalV||a.generateView():-1==d?(a.removeTopRow(1),a.appendRow(h.finalV-e)):1==d&&(a.prependRow(),a.removeBottomRow(e-h.finalV));h._saveDims();a.scrollView();1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};p._refreshTableWidths=function(h,a){var b=this.that,c=b.$tbl_header,e=a.header&&c,d=b.$tbl,f=a.table&&d,c=e?c.children().children(".pq-row-hidden"):null,g=e?b.$header.find(".pq-grid-col-resize-handle"):null,d=f&&d?d.children().children(".pq-row-hidden"):
null,q,n=!1,k=0;f&&b.tables.length&&(f=b.tables[0].$tbl.children().children(".pq-row-hidden"),d=d?d.add(f):f);for(var f=b.iGenerateView.colDef,m=0,l=f.length;m<l;m++){var p=f[m],u=p.colIndx,r=h[u].outerWidth,p=p.column.outerWidth;p!==r&&(e&&(q=c.find("td[pq-col-indx="+u+"]"),q.width(p)),d&&(q=d.find("td[pq-col-indx="+u+"]"),q.length&&(n=!0,q.width(p))));k+=p-r;e&&0!==k&&(u=g.filter("[pq-col-indx="+u+"]"),r=parseInt(u.css("left")),u.css("left",r+k))}n&&b._trigger("tableWidthChange");b._saveDims()}})(jQuery);
(function(l){function p(a,c,b){for(var d=0,e=a.length;d<e;d++){for(var f=a[d],g={},h=0,q=c.length;h<q;h++){var l=c[h];g[l]=f[l]}b.push(g)}}var h=l.paramquery.cClass,a={options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",
bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{on:!1},realFocus:!0,sortModel:{on:!0,type:"local",number:!0,single:!0,cancel:!0,sorter:[]},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){l.extend(l.paramquery.cGenerateView.prototype,g);var a=l.paramquery,c=this.options;this.listeners={};this._queueATriggers={};this._queueBTriggers={};this.iHistory=new a.cHistory(this);this.iGroupView=new q(this);a.cMerge&&(this.iMerge=new a.cMerge(this));
this.iFilterData=new a.cFilterData(this);this.iSelection=new e.Selection(this);this.iHeaderSearch=new d(this);this.iUCData=new a.cUCData(this);this.iMouseSelection=new a.cMouseSelection(this);this._super();this.iGroupView.bindEvents();this.iDragColumns=new a.cDragColumns(this);this._createToolbar();"remote"===c.dataModel.location&&this.refresh({table:!0});this.__init();this.refreshDataAndView({header:!0})}},b;a.__init=function(){b||(b=l("<div style='position:fixed;bottom:0;right:20px;padding:0 2px;margin:0;opacity:0.5;z-index:10000;border:1px solid lightgray;border-radius:5px;'><a style='font-size:10px;text-decoration:none;' href='http://paramquery.com/pro'>ParamQuery Pro Eval</a></div>").appendTo(document.body))};
var c=l.paramquery;l.widget("paramquery.pqGrid",c._pqGrid,a);var e=window.pq=window.pq||{};e.grid=function(a,c){return l(a).pqGrid(c).data("paramqueryPqGrid")};c.pqGrid.regional={};a=c.pqGrid.prototype;a.focus=function(a){a=a||{};var c=a.$td,b=a.rowIndxPage;a=a.colIndx;if(c){if(null==b||null==a)b=c.closest(".pq-grid-row").attr("pq-row-indx"),a=c.closest(".pq-grid-cell").attr("pq-col-indx"),b=null!=b?parseInt(b):null,a=null!=a?parseInt(a):null}else{if(null==b||null==a){if((b=document.activeElement)&&
b!=document.body&&"pq-grid-excel"!=b.id&&"pq-grid-cont"!=b.className||!(c=this._focusElement))return;b=c.rowIndxPage,a=c.colIndx}c=this.getCell({rowIndxPage:b,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:c,rowIndxPage:b,colIndx:a};var d;c[0]&&(d=c[0])&&"TD"==d.nodeName.toUpperCase()?(d.setAttribute("tabindex",0),d.focus()):(b=this.options.dataModel.data)&&b.length||this.$cont.focus()}else{if(d=this._focusElement)this.removeClass({rowIndxPage:d.rowIndxPage,colIndx:d.colIndx,cls:"pq-focus",
refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");c&&(this.addClass({rowIndxPage:b,colIndx:a,cls:"pq-focus"}),this._focusElement={$ele:c,rowIndxPage:b,colIndx:a});b=this.$cont;document.activeElement!=b[0]&&b[0].focus()}};a.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rip,colIndx:a.ci,cls:"pq-focus"})}};a.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rip,colIndx:a.ci,
cls:"pq-focus"})}};a.range=function(a){return new e.Range(this,a)};a.rowExpand=function(a){this.iHierarchy.rowExpand(a)};a.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};a.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};a.saveState=function(a){a=a||{};var c=this.options,b=c.dataModel,d=this.element[0].id,c=JSON.stringify({colModel:c.colModel,height:c.height,width:c.width,groupModel:c.groupModel,pageModel:c.pageModel,sortModel:c.sortModel,freezeRows:c.freezeRows,freezeCols:c.freezeCols,
filter:b.dataUF&&b.dataUF.length?!0:!1});!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(d?d:""),c);return c};a.loadState=function(a){a=a||{};if("undefined"===typeof Storage)return!1;var c=this.element[0].id;if(c=a.state||localStorage.getItem("pq-grid"+(c?c:"")))"string"==typeof c&&(c=JSON.parse(c));else return!1;for(var b=this.columns,d=c.colModel,d=this.nestedCols(d).colModel,e=0,f=d.length;e<f;e++){var g=d[e],h=b[g.dataIndx];l.extend(!0,h,g);l.extend(!0,g,h)}this.option({colModel:d,
height:c.height,width:c.width,freezeRows:c.freezeRows,freezeCols:c.freezeCols,sortModel:c.sortModel,pageModel:c.pageModel,groupModel:c.groupModel});!1!==a.refresh&&this.refreshDataAndView();return!0};var d=function(a){function c(b,d,e){a.filter({data:[{dataIndx:b,value:d,value2:e}]})}this.that=a;var b=this;this.dataHS={};a.on("headerKeyDown",function(a,c){var d=l(a.originalEvent.target);return d.hasClass("pq-grid-hd-search-field")?b.onKeyDown(a,c,d):!0});a.on("createHeader",function(a,c){return b._onCreateHeader()});
this.changeListener={change:function(a,b){c(b.dataIndx,b.value,b.value2)}};this.keyupListener={keyup:function(a,b){c(b.dataIndx,b.value,b.value2)}};this.clickListener={click:function(a,b){c(b.dataIndx,b.value)}}},h=d.prototype=new h;h.get$Ele=function(a,c){var b=this.that,d=b.options.freezeCols,e=l(b.$tbl_header[0]),f=".pq-grid-hd-search-field[name='"+c+"']",b=l(b.$tbl_header[2==b.$tbl_header.length?1:0]);return a>=d?b.find(f):e.find(f)};h.onKeyDown=function(a,c,b){c=this.that;if(a.keyCode===l.ui.keyCode.TAB){var d=
b.attr("name"),e=c.getColIndx({dataIndx:d}),f=c.colModel,g,h=a.shiftKey,q=f[e];if("between"==q.filter.condition&&(c.scrollColumn({colIndx:e}),d=this.get$Ele(e,d),d[0]==b[0]?h||(g=d[1]):h&&(g=d[0]),g))return g.focus(),a.preventDefault(),!1;do{h?e--:e++;if(0>e||e>=f.length)break;q=f[e];b=q.filter;if(!q.hidden&&b){c.scrollColumn({colIndx:e});d=q.dataIndx;g=this.get$Ele(e,d);"between"==b.condition&&(g=h?l(g[1]):l(g[0]));if(g)return g.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};h._bindFocus=
function(){function a(d){d=l(d.target).closest(".pq-grid-hd-search-field").attr("name");if(c.scrollColumn({dataIndx:d})){var e=c.getColIndx({dataIndx:d});b.get$Ele(e,d).focus()}}for(var c=this.that,b=this,d=c.$header.find(".pq-grid-header-search-row"),e=0;e<d.length;e++)l(d[e]).on("focusin",a)};h._onCreateHeader=function(){var a=this.that,c=a.options;if(c.filterModel.header){this._bindFocus();var b=a.colModel,c=c.freezeCols,d=a.$tbl_header,e=l(d[0]),f=l(d[1]),g="input,select";if(1<d.length){e.find(g).css("visibility",
"hidden");for(var h=0;h<c;h++){var q=b[h],g="*[name='"+q.dataIndx+"']";e.find(g).css("visibility","visible");f.find(g).css("visibility","hidden")}}b=a.iGenerateView.colDef;h=0;for(g=b.length;h<g;h++){var p=b[h],t=p.colIndx,q=p.column,w=q.filter;if(w){var p=q.dataIndx,x=e;t>=c&&1<d.length&&(x=f);t=x.find("*[name='"+p+"']");if(0!=t.length){var x=w.type,y=w.value,z=w.value2;"checkbox"==x&&"triple"==w.subtype?t.pqval({val:y}):"select"==x&&null!=y&&t.val(y);(x=w.init)&&x.call(t,{dataIndx:p,column:q});
if(q=w.listeners)for(w=0;w<q.length;w++){x=q[w];"string"==typeof x&&(x=this[x+"Listener"]);for(var D in x)(function(c,b,d){c.bind(D,function(e){var k=a.getColumn({dataIndx:d}),f=k.filter;"checkbox"==f.type?y="triple"==f.subtype?c.pqval({incr:!0}):c.is(":checked")?!0:!1:"between"==f.condition?(y=l(c[0]).val(),z=l(c[1]).val()):y=c.val();return b.call(this,e,{column:k,dataIndx:d,value:y,value2:z})})})(t,x[D],p)}}}}}};var f=function(a,c){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",
c,"</div>"].join("")};h.createDOM=function(a,c){var b=this.that,d=b.options,e=d.bootstrap.on?" ":" ui-corner-all",d=d.numberCell;a.push("<tr class='pq-grid-header-search-row'>");d.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var d=b.iGenerateView.colDef,g=0,h=d.length;g<h;g++){var q=d[g].column,p=c,A=q.halign;A||(A=q.align);"right"==A?p+=" pq-align-right":"center"==A&&(p+=" pq-align-center");(A=q.cls)&&(p=p+" "+A);if(A=q.filter){var t=
q.dataIndx,w=A.type,x=A.value,y=A.condition,z=A.cls,z="pq-grid-hd-search-field "+(z?z:""),D=A.style,D=D?D:"",C=A.attr,C=C?C:"",E="";if("between"==y)var H=A.value2,H=null!=H?H:"";"textbox"===w?(x=x?x:"",z=z+" pq-search-txt"+e,E="between"==y?f(this._input(t,x,z+" pq-from",D,C),this._input(t,H,z+" pq-to",D,C)):this._input(t,x,z,D,C)):"textarea"===w?(x=x?x:"",z=z+" pq-search-txt"+e,E="between"==y?f(this._textarea(t,x,z+" pq-from",D,C),this._textarea(t,H,z+" pq-to",D,C)):this._textarea(t,x,z,D,C)):"select"===
w?A.cache?E=A.cache:(w=A.options,"function"===typeof w&&(w=w.call(b,{column:q,value:x,dataIndx:t,cls:z,style:D,attr:C})),z+=e,q=["name='",t,"' class='",z,"' style='",D,"' ",C].join(""),E=l.paramquery.select({options:w,attr:q,prepend:A.prepend,valueIndx:A.valueIndx,labelIndx:A.labelIndx,groupIndx:A.groupIndx}),A.cache=E):"checkbox"==w?E=["<input ",null==x||!1==x?"":"checked=checked"," name='",t,"' type=checkbox class='"+z+"' style='"+D+"' "+C+"/>"].join(""):"string"==typeof w?E=w:"function"==typeof w&&
(E=w.call(b,{width:q.outerWidth,value:x,value2:H,column:q,dataIndx:t,cls:z,attr:C,style:D}));a.push(["<td class='",p,"'><div class='pq-td-div' >",E,"</div></td>"].join(""))}else a.push(["<td class='",p,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};h._input=function(a,c,b,d,e){return['<input value="',c,"\" name='",a,"' type=text style='"+d+"' class='"+b+"' "+e+" />"].join("")};h._textarea=function(a,c,b,d,e){return["<textarea name='",a,"' style='"+d+"' class='"+b+"' "+e+
" >",c,"</textarea>"].join("")};var g={_generateTitleRow:function(a,c,b,d){var e=this.that.options.numberCell,f=c.groupTitle,g=c.level,h=c.GMRowIndx,q=a.title,l=a.icon,l=(l=l?l[g]:null)&&l.length&&2==l.length&&"function"===typeof l.push?l:["ui-icon-minus glyphicon glyphicon-minus","ui-icon-plus glyphicon glyphicon-plus"];if(q&&null!=q[g]){q=q[g];if(!1===q)return;"function"==typeof q?f=q(c):(f=q.replace("{0}",f),f=f.replace("{1}",c.items))}else f=f+" - "+c.items+" item(s)";d="pq-group-row pq-grid-row"+
(d?" pq-last-frozen-row":"");(a=a.titleCls)&&(a=a[g])&&(d+=" "+a);b.push(["<tr class='",d,"' title=\"",c.groupTitle,"\" level='",g,"' GMRowIndx='",h,"'>"].join(""));e.show&&b.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");e=l[0];c.collapsed&&(e=l[1]);b.push("<td class='pq-grid-cell' colSpan='100' >","<div class='pq-td-div' style='margin-left:",16*g,"px;'>","<span class='ui-icon ",e,"'></span>",f,"</div></td>");b.push("</tr>")},_generateSummaryRow:function(a,c,b,d){var e=c.level,
f=c.rowData,g="pq-summary-row pq-grid-row"+(d?" pq-last-frozen-row":"");(a=a.summaryCls)&&(a=a[e])&&(g+=" "+a);a=this.that;var h=a.options;d=h.freezeCols;var q=h.numberCell,h=h.columnBorders;b.push("<tr class='"+g+"'>");q.show&&b.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");for(var g=this.colDef,q=0,l=g.length;q<l;q++){var p=g[q],w=p.colIndx,p=p.column,x=p.dataIndx,y="pq-grid-cell ";"right"==p.align?y+=" pq-align-right":"center"==p.align&&(y+=" pq-align-center");w==d-1&&h&&
(y+=" pq-last-frozen-col");p.cls&&(y=y+" "+p.cls);var w=f[x],z;w&&(z=p.summary.title)&&(z=z[e])&&("function"==typeof z?(c.dataIndx=x,c.cellData=w,w=z.call(a,c)):w=z.replace("{0}",w));w=null==w?"&nbsp;":w;w=["<td class='",y,"' style='' >",w,"</td>"].join("");b.push(w)}b.push("</tr>");return b},_generateDetailRow:function(a,c,b,d,e){var f="pq-grid-row pq-detail-child";e&&(f+=" pq-last-frozen-row");var g=this.that,h=g.options;e=h.numberCell;var q="pq-grid-cell ";if(!h.wrap||d)q+="pq-wrap-text ";h.stripeRows&&
c/2==parseInt(c/2)&&(f+=" pq-grid-oddRow");a.pq_rowselect&&(f+=g.iRows.hclass);a=a.pq_rowcls;null!=a&&(f+=" "+a);b.push("<tr pq-row-indx='"+c+"' class='"+f+"' >");e.show&&b.push("<td class='pq-grid-number-cell ui-state-default'>&nbsp;</td>");b.push("<td class='"+q+" pq-detail-child' colSpan='20'></td>");b.push("</tr>");return b}},q=function(a){this.that=a},h=q.prototype;h.refreshDataFromDataModel=function(){this._groupData();this.initcollapsed()};h.bindEvents=function(){var a=this;this.that.$cont.on("click",
"tr.pq-group-row",function(c){return a.onClickGroupRow(c)})};h.showHideRows=function(a,c,b){for(var d=[],e=this.that.dataGM,f=e.length;a<f;a++){var g=e[a],h=g;if(h.groupSummary)if(g.level<c)break;else g.pq_hidden=b;else if(h.groupTitle)if(g.collapsed&&d.push({indx:a,level:g.level}),g.level<=c)break;else g.pq_hidden=b;else g.pq_hidden=b}return d};h.onClickGroupRow=function(a){var c=l(a.currentTarget);a=this.that;var b=parseInt(c.attr("level")),c=parseInt(c.attr("GMRowIndx")),d=!0,d=a.dataGM[c];d=d.collapsed?
d.collapsed=!1:d.collapsed=!0;if(d)this.showHideRows(c+1,b,!0);else for(c=this.showHideRows(c+1,b,!1),d=0;d<c.length;d++){var e=c[d].indx,b=c[d].level;this.showHideRows(e+1,b,!0)}a.refresh()};h.initcollapsed=function(){var a=this.that.dataGM;if(a)for(var c=0,b=a.length;c<b;c++){var d=a[c];if(void 0!==d.groupTitle){var e=d.level;d.collapsed&&this.showHideRows(c+1,e,!0)}}};h.max=function(a,c){var b;"integer"==c||"float"==c?(b=Math.max.apply(Math,a),"float"===c&&(b=b.toFixed(2))):(a="date"==c?a.sort(function(a,
c){a=Date.parse(a);c=Date.parse(c);return a-c}):a.sort(),b=a[a.length-1]);return b};h.min=function(a,c){var b;"integer"==c||"float"==c?(b=Math.min.apply(Math,a),"float"===c&&(b=b.toFixed(2))):(a="date"==c?a.sort(function(a,c){a=Date.parse(a);c=Date.parse(c);return a-c}):a.sort(),b=a[0]);return b};h.count=function(a){return a.length};h.sum=function(a,c){var b=0,d;d="float"===c?parseFloat:"integer"===c?parseInt:function(a){return a};for(var e=0,f=a.length;e<f;e++)b+=d(a[e]);"float"===c&&(b=b.toFixed(2));
return b};h._groupData=function(){for(var a=this.that,c=a.pdata,b=a.options,d=b.groupModel,e=b.pageModel,b=a.colModel,e=e.type?(e.curPage-1)*e.rPP:0,f=b.length,g=d.dataIndx,h=g.length,q=d.collapsed,p=[],t=0;t<h;t++){p[t]=!1;for(var w=0;w<f;w++){var x=b[w],y=x.summary;if(y&&(y=y.type)&&"function"==typeof y.push&&y[t]){p[t]=!0;break}}}if(d&&c&&0<c.length){for(var d=[],w=[],z=[],D=[],C=[],t=0;t<h;t++)D[t]=null,z[t]="",C[t]={};for(var E=0,H=c.length;E<=H;E++){for(var I=c[E],x=!1,J=null,t=0;t<h;t++)z[t]=
E<H?l.trim(I[g[t]]):"",D[t]!=z[t]&&(x=!0),x&&null==J&&(J=t);if(x){for(x=0;x<h;x++)D[x]=z[x];if(0<E){for(t=h-1;t>=J;t--)if(p[t]){for(var M=[],P=0;P<f;P++)if(x=b[P],y=(y=x.summary)?y.type?y.type[t]:null:null){var L=x.dataIndx,G="",G="function"==typeof y?y(C[t][L],x.dataType):this[y](C[t][L],x.dataType);M[L]=G}d.push({groupSummary:!0,level:t,prevRowData:c[E-1],rowData:M})}for(x=J;x<h;x++)d[w[x]].items=C[x][b[0].dataIndx].length}if(E==H)break;for(t=h-1;t>=J;t--)for(y=0;y<f;y++)x=b[y],C[t][x.dataIndx]=
[];for(x=J;x<h;x++)d.push({groupTitle:z[x],level:x,nextRowData:I,GMRowIndx:d.length,collapsed:q&&null!=q[x]?q[x]:!1}),w[x]=d.length-1}if(E==H)break;I.rowIndx=E+e;I.pq_hidden=!1;d.push(I);for(J=0;J<f;J++)for(x=b[J],L=x.dataIndx,t=0;t<h;t++)C[t][L].push(I[L])}a.dataGM=d}else a.dataGM=null};a._createToolbar=function(){var a=this.options,c=a.toolbar;if(c){var b=c.cls,d=c.style,e=c.attr,c=c.items,b=l("<div class='"+(b?b:"")+"' style='"+(d?d:"")+"' "+(e?e:"")+" ></div>").appendTo(l(".pq-grid-top",this.element));
b.pqToolbar({items:c,gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||b.css("display","none");this.$toolbar=b}};a.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};a.ovCreateHeader=function(a,c){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,c)};a.filter=function(a){var c=this,b=this.options,d=void 0===a.apply?!0:a.apply,e=void 0===a.sort?!0:a.sort,f=b.dataModel,b=b.filterModel;if(void 0!=a){var g="replace"==a.oper?!0:!1;a=a.data;for(var h=this.colModel,h=
d?h:l.extend(!0,[],h),q=0,p=h.length,t=a.length,w=0;w<p;w++){for(var x=h[w],y=!1,z=0;z<t&&q!=t;z++){var D=a[z];if(D.dataIndx==x.dataIndx){y=!0;q++;var z=x.filter,C=D.condition,E=D.value;z?z.on=!0:z=x.filter={on:!0};C&&(z.condition=C);C=z.condition;z.value=E;if("between"==C)z.value2=D.value2;else if("range"==C){D=[];if(E)if("string"==typeof E){var C=z.options,H=E.indexOf('"'),I=E.lastIndexOf('"'),E=E.substr(H,I+1),E=JSON.parse("["+E+"]");if(C)for(H=0,I=C.length;H<I;H++){var J=C[H];-1!=l.inArray(J,
E)&&D.push(J)}else D=E.split(",s*")}else"function"==typeof E.push&&(D=E);z.value=D}break}}g&&!y&&x.filter&&(x.filter.on=!1)}}var M={header:!1,apply:d,sort:e,CM:h};if("remote"==f.location&&"local"!=b.type)this.remoteRequest({apply:d,CM:h,callback:function(){return c._onDataAvailable(M)}});else return M.source="filter",c._onDataAvailable(M)};a._initTypeColumns=function(){for(var a=this.colModel,b=0,d=a.length;b<d;b++){var e=a[b],f=e.type;"checkBoxSelection"===f||"checkbox"==f?(e.type="checkbox",new c.cCheckBoxColumn(this,
e)):"detail"===f&&(e.dataIndx="pq_detail",this.iHierarchy=new c.cHierarchy(this))}};a.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};a._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};a.getLargestRowCol=function(a){for(var c=0;c<a.length;c++);};a.bringCellToView=function(a){this._bringCellToView(a)};a._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};a.pageData=function(){return this.pdata};
a.getData=function(a){a=a||{};var c=a.dataIndx,b=c?c.length:0,d=a.data;a=this.options.dataModel;var e=a.data,f=a.dataUF;a=[];if(b)d?p(d,c,a):(e&&p(e,c,a),f&&p(f,c,a));else return e.concat(f);d=[];for(e=0;e<b;e++){var f=c[e],g=this.getColumn({dataIndx:f});d.push({dataIndx:f,dir:"up",dataType:g.dataType,sortType:g.sortType})}a=this.iSort._sortLocalData(d,a);c=[];b=void 0;d=0;for(e=a.length;d<e;d++)f=a[d],g=JSON.stringify(f),g!==b&&(c.push(f),b=g);return c};a._onDataAvailable=function(a){a=a||{};var c=
this.options,b=null==a.apply?!0:a.apply,d=a.source,e=a.sort,f=[],f=c.filterModel,g=c.dataModel,c=c.sortModel,h=g.location;!1!==b&&this._trigger("dataAvailable",a.evt,{dataModel:g,source:d});f=f&&f.on&&("local"==h&&"remote"!=f.type||"remote"==h&&"local"==f.type)?this.iFilterData.filterLocalData(a).data:g.data;"local"==c.type&&!1!==e&&(b?this.sort({refresh:!1}):f=this.iSort.sortLocalData(f));if(!1===b)return f;g.data=f;this.refreshView(a)};a.sort=function(a){a=a||{};var c=this,b=this.options,d=b.dataModel.data,
e=b.sortModel.type;if(d&&d.length||"local"!=e){var f=b.editModel,b=this.iSort,g=b.getSorter(),h,q=a.evt,l=null==a.single?b.readSingle():a.single;h=b.readCancel();a.sorter?a.addon?(a.single=l,a.cancel=h,h=b.refreshSorter(a)):h=a.sorter:h=b.readSorter();if(h.length||g.length)f.indices&&c.blurEditor({force:!0}),f={dataIndx:h.length?h[0].dataIndx:null,oldSorter:g,sorter:h,source:a.source,single:l},!1===c._trigger("beforeSort",q,f)?b.cancelSort():(b.resumeSort(),"local"==e&&b.saveOrder(),b.setSorter(h),
b.setSingle(l),b.writeSorter(h),b.writeSingle(l),"local"==e?(b.sortLocalData(d),this._queueATriggers.sort={evt:q,ui:f},!1!==a.refresh&&this.refreshView()):"remote"==e&&(this._queueATriggers.sort={evt:q,ui:f},a.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){c._onDataAvailable()}})))}};a._trigger=c._trigger;a.on=c.on;a.one=c.one;a.off=c.off;a.pager=function(){return this.pagerW};a.vscrollbar=function(){return this.vscroll};a.hscrollbar=function(){return this.hscroll};a.toolbar=
function(){return this.$toolbar}})(jQuery);
(function(l){var p=l.paramquery._pqGrid.prototype;l.paramquery=l.paramquery||{};l.paramquery.pqgrid=l.paramquery.pqgrid||{};p.exportExcel=function(a){a.format="xls";return h.call(this,a)};p.exportCsv=function(a){a.format="csv";return h.call(this,a)};p.exportXml=function(a){a.format="xml";return h.call(this,a)};p.exportHtml=function(a){a.format="html";return h.call(this,a)};var h=function(a){var b=this,c=void 0===a.urlPost?a.url:a.urlPost,e=a.url,d=a.render,f={source:a.source||"export"},g=null==a.sheetName?
"pqGrid":a.sheetName,h=a.format,n=function(){for(var a=b.colModel,c=a.length,e=b.options.dataModel.data,g=e.length,h=[],n=[],q=[],l=0;l<c;l++){var p=a[l];if(!1!==p.copy){var t=p.title.replace(/\"/g,'""');n.push('"'+t+'"')}}h.push(n.join(","));for(l=0;l<g;l++){n=e[l];d&&(f.rowIndx=l,f.rowData=n);for(t=0;t<c;t++)if(p=a[t],!1!==p.copy){var w=p.dataIndx,x=n[w];d&&p.render&&(f.colIndx=t,f.column=p,f.dataIndx=w,f.cellData=x,p=p.render.call(b,f),x="string"==typeof p?p:p.text);p=x+"";p=p.replace(/\"/g,'""');
q.push('"'+p+'"')}h.push(q.join(","));q=[]}return h.join("\n")};a="xls"==h?function(){for(var a=b.colModel,c=a.length,e=b.options.dataModel.data,h=e.length,n,q=[],l=[],p=0;p<c;p++){var A=a[p];!1!==A.copy&&(n=A._width,n||(n=parseInt(A.width))||(n=100),l.push('<Column ss:AutoFitWidth="1"  ss:Width="'+n+'" />'))}l.push("<Row>");for(p=0;p<c;p++)A=a[p],!1!==A.copy&&l.push('<Cell><Data ss:Type="String">'+A.title+"</Data></Cell>");l.push("</Row>");l=l.join("\n");for(p=0;p<h;p++){n=e[p];d&&(f.rowIndx=p,f.rowData=
n);q.push("<Row>");for(var t=0;t<c;t++)if(A=a[t],!1!==A.copy){var w=A.dataIndx,x=n[w];d&&A.render&&(f.colIndx=t,f.column=A,f.dataIndx=w,f.cellData=x,A=A.render.call(b,f),x="string"==typeof A?A:A.text);q.push('<Cell><Data ss:Type="String"><![CDATA['+x+"]]\x3e</Data></Cell>")}q.push("</Row>")}q=q.join("\n");return['<?xml version="1.0"?>\n<?mso-application progid="Excel.Sheet"?>\n<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:o="urn:schemas-microsoft-com:office:office"\n xmlns:x="urn:schemas-microsoft-com:office:excel"\n xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"\n xmlns:html="http://www.w3.org/TR/REC-html40">\n<Worksheet ss:Name="',
g,'">\n<Table>',l,q,"</Table>\n</Worksheet>\n</Workbook>"].join("\n")}():"xml"==h?getXMLContent():"html"==h?getHTMLContent(a):n();l.ajax({url:c,type:"POST",cache:!1,data:{extension:"xls"==h?"xml":h,excel:a},success:function(a){a=e+((0<e.indexOf("?")?"&":"?")+"filename="+a);l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+a+'"></iframe>')}})}})(jQuery);
(function(l){var p=l.paramquery.pqGrid.prototype.options,h={on:!1,dirtyClass:"pq-cell-dirty"};p.trackModel=p.trackModel||h;p=(l.paramquery.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var b=this;a.on("dataAvailable",function(a,e){"filter"!=e.source&&(b.udata=[],b.ddata=[],b.adata=[])})}).prototype=new l.paramquery.cClass;p.add=function(a){var b=this.that,c=this.adata,e=this.ddata;a=a.rowData;for(var d=this.options.trackModel.dirtyClass,f=b.getRecId({rowData:a}),
g=0,h=c.length;g<h;g++){var n=c[g];if(null!=f&&n.recId==f)throw"primary key violation";if(n.rowData==a)throw"same data can't be added twice.";}g=0;for(h=e.length;g<h;g++)if(a==e[g].rowData){e.splice(g,1);return}var e=[],k;for(k in a)e.push(k);b.removeClass({rowData:a,dataIndx:e,cls:d});a={recId:f,rowData:a};c.push(a)};p.update=function(a){var b=this.that,c=this.options.trackModel.dirtyClass,e=a.rowData||b.getRowData(a),d=b.getRecId({rowData:e}),f=a.dataIndx,g=a.refresh,h=b.columns,n=b.getValueFromDataType;
a=a.row;var k=this.udata,m=k.slice(0),p=!1;if(null!=d){for(var s=0,u=k.length;s<u;s++){var r=k[s],v=r.oldRow;if(r.rowData==e){p=!0;for(f in a)k=h[f].dataType,u=a[f],u=n(u,k),r=v[f],r=n(r,k),v.hasOwnProperty(f)&&r===u?(k={rowData:e,dataIndx:f,refresh:g,cls:c},b.removeClass(k),delete v[f]):(k={rowData:e,dataIndx:f,refresh:g,cls:c},b.addClass(k),v.hasOwnProperty(f)||(v[f]=e[f]));l.isEmptyObject(v)&&m.splice(s,1);break}}if(!p){v={};for(f in a)v[f]=e[f],k={rowData:e,dataIndx:f,refresh:g,cls:c},b.addClass(k);
k={rowData:e,recId:d,oldRow:v};m.push(k)}this.udata=m}};p["delete"]=function(a){var b=this.that,c=a.rowIndx,e=a.rowIndxPage,d=b.rowIndxOffset,c=null==c?e+d:c,e="remote"==b.options.pageModel.type?null==e?c-d:e:c,d=this.adata,f=this.ddata;a=b.getRowData(a);for(var b=0,g=d.length;b<g;b++)if(d[b].rowData==a){d.splice(b,1);return}f.push({indx:e,rowData:a,rowIndx:c})};p.isDirty=function(a){var b=this.udata,c=this.adata,e=this.ddata,d=!1;if(a=this.that.getRowData(a))for(c=0;c<b.length;c++){if(a==b[c].rowData){d=
!0;break}}else if(b.length||c.length||e.length)d=!0;return d};p.getChangesValue=function(a){a=a||{};var b=this.that;a=a.all;for(var c=this.udata,e=this.adata,d=this.ddata,f=[],g=[],h=[],n=[],k=[],m=[],p=0,s=d.length;p<s;p++){var u=d[p],r=u.rowData,v={};k.push(r);for(var B in r)0!=B.indexOf("pq_")&&(v[B]=r[B]);m.push(v)}p=0;for(s=c.length;p<s;p++)if(u=c[p],d=u.oldRow,r=u.rowData,-1==l.inArray(r,k)&&-1==l.inArray(r,f)){v={};if(!1!==a)for(B in r)0!=B.indexOf("pq_")&&(v[B]=r[B]);else{for(B in d)v[B]=
r[B];v[b.options.dataModel.recIndx]=u.recId}f.push(r);g.push(v);h.push(d)}p=0;for(s=e.length;p<s;p++){u=e[p];r=u.rowData;v={};for(B in r)0!=B.indexOf("pq_")&&(v[B]=r[B]);n.push(v)}return{updateList:g,addList:n,deleteList:m,oldList:h}};p.getChanges=function(){for(var a=this.udata,b=this.adata,c=this.ddata,e=[],d=[],f=[],g=[],h=0,n=c.length;h<n;h++){var k=c[h],k=k.rowData;g.push(k)}h=0;for(n=a.length;h<n;h++)k=a[h],c=k.oldRow,k=k.rowData,-1==l.inArray(k,g)&&-1==l.inArray(k,e)&&(e.push(k),d.push(c));
h=0;for(n=b.length;h<n;h++)k=b[h],k=k.rowData,f.push(k);return{updateList:e,addList:f,deleteList:g,oldList:d}};p.getChangesRaw=function(){var a=this.adata,b=this.ddata,c={updateList:[],addList:[],deleteList:[]};c.updateList=this.udata;c.addList=a;c.deleteList=b;return c};p.commitAdd=function(a,b){for(var c=this.that,e=c.colModel,d=e.length,f=this.adata,g=l.inArray,h=f.length,n=c.getValueFromDataType,c=[],k=a.length,m=[],p=0;p<k;p++)for(var s=a[p],u=0;u<h;u++){var r=f[u].rowData,v=!0;if(-1==g(r,m)){for(var B=
0;B<d;B++){var A=e[B],t=A.dataType,w=A.dataIndx;if(!A.hidden&&w!=b&&(A=r[w],A=n(A,t),w=s[w],w=n(w,t),A!==w)){v=!1;break}}if(v){u={};v={};u[b]=s[b];v[b]=r[b];c.push({type:"update",rowData:r,oldRow:v,newRow:u});m.push(r);break}}}e=[];for(u=0;u<h;u++)r=f[u].rowData,-1==g(r,m)&&e.push(f[u]);this.adata=e;return c};p.commitUpdate=function(a,b){for(var c=this.that,e=this.options.trackModel.dirtyClass,d=c.colModel,f=d.length,g=this.udata,h=g.length,n=a.length,k=[],m=0;m<h;m++){var p=g[m],s=p.rowData,p=p.oldRow;
if(-1==l.inArray(s,k))for(var u=0;u<n;u++)if(s[b]==a[u][b]){k.push(s);for(var r=0;r<f;r++)var v=d[r].dataIndx;for(v in p)c.removeClass({rowData:s,dataIndx:v,cls:e})}}c=[];for(m=0;m<h;m++)s=g[m].rowData,-1==l.inArray(s,k)&&c.push(g[m]);this.udata=c;return[]};p.commitDelete=function(a,b){for(var c=this.ddata,e=c.length,d=a.length,f=[],g=0;g<e;g++)for(var h=c[g].rowData,n=0;n<d;n++)h[b]==a[n][b]&&f.push(h);d=[];for(g=0;g<e;g++)h=c[g].rowData,-1==l.inArray(h,f)&&d.push(c[g]);this.ddata=d};p.commitUpdateAll=
function(){for(var a=this.that,b=this.options.trackModel.dirtyClass,c=this.udata,e=0,d=c.length;e<d;e++){var f=c[e],g=f.oldRow,f=f.rowData,h;for(h in g)a.removeClass({rowData:f,dataIndx:h,cls:b})}this.udata=[]};p.commitAddAll=function(){this.adata=[]};p.commitDeleteAll=function(){this.ddata=[]};p.commit=function(a){var b=this.that,c=a?a.history:null,c=null==c?!1:c,e=[],e=[],d=[],f=b.options.dataModel.recIndx;if(null==a)this.commitAddAll(),this.commitUpdateAll(),this.commitDeleteAll();else{var g=a.type;
a=a.rows;"add"==g?a?e=this.commitAdd(a,f):this.commitAddAll():"update"==g?a?d=this.commitUpdate(a,f):this.commitUpdateAll():"delete"==g&&(a?this.commitDelete(a,f):this.commitDeleteAll())}e=e.concat(d);e.length&&(b._digestData({source:"commit",checkEditable:!1,track:!1,history:c,rowList:e}),b.refreshView())};p.rollbackAdd=function(a,b){for(var c=this.adata,e=[],d=0,f=c.length;d<f;d++)e.push({type:"delete",rowData:c[d].rowData});this.adata=[];return e};p.rollbackDelete=function(a,b){for(var c=this.ddata,
e=[],d=c.length-1;0<=d;d--){var f=c[d];e.push({type:"add",rowIndx:f.rowIndx,newRow:f.rowData})}this.ddata=[];return e};p.rollbackUpdate=function(a,b){for(var c=this.that,e=this.options.trackModel.dirtyClass,d=this.udata,f=[],g=0,h=d.length;g<h;g++){var n=d[g],k=n.rowData,m={},l=n.oldRow;if(null!=n.recId){var n=[],p;for(p in l)m[p]=k[p],n.push(p);c.removeClass({rowData:k,dataIndx:n,cls:e,refresh:!1});f.push({type:"update",rowData:k,newRow:l,oldRow:m})}}this.udata=[];return f};p.rollback=function(a){var b=
this.that,c=b.options.pageModel,e=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var d=[],d=[],f=[],g=[],h=b.options.dataModel.data;if(null==a||"update"==a)f=this.rollbackUpdate(c,h);if(null==a||"delete"==a)d=this.rollbackDelete(c,h);if(null==a||"add"==a)g=this.rollbackAdd(c,h);d=d.concat(g,f);b._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:d});e&&b.refreshView()};p=l.paramquery.pqGrid.prototype;p.getChanges=function(a){this.blurEditor({force:!0});
if(a){var b=a.format;if(b){if("byVal"==b)return this.iUCData.getChangesValue(a);if("raw"==b)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};p.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};p.isDirty=function(a){return this.iUCData.isDirty(a)};p.commit=function(a){this.iUCData.commit(a)};p._getRowIndx=function(){var a=this.selection({type:"row",method:"getSelection"});if(a&&0<a.length){var a=a[0].rowIndx,b=this.options.pageModel,c=a-this.rowIndxOffset,
e=b.rPP;if(b.type){if(0<=c&&c<e)return a}else return a}else return null};p.updateRow=function(a){for(var b=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],c=[],e=0,d=b.length;e<d;e++){var f=this.normalize(b[e]),g=f.newRow,h=f.rowData,n={};if(h){for(var k in g)n[k]=h[k];f.oldRow=n;f.type="update";c.push(f)}}if(!c.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,
rowList:c}))return!1;!1!==a.refresh&&(1<c.length?this.refresh():this.refreshRow({rowIndx:c[0].rowIndx}))};p.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==a?null:a};p.getCellData=function(a){var b=a.rowData||this.getRowData(a);a=a.dataIndx;return b?b[a]:null};p.getRowData=function(a){if(!a)return null;var b=a.rowData;if(null!=b)return b;var c=this.options,b=c.dataModel,c=c.pageModel.type,e=b.recIndx,d=a.recId,b=b.data;if(null!=d)for(a=0,c=b.length;a<
c;a++){var f=b[a];if(f[e]==d)return f}else return e=a.rowIndx,a=a.rowIndxPage,d=this.rowIndxOffset,e=null!=e?e:a+d,a="remote"==c?null!=a?a:e-d:e,f=b?b[a]:null;return null};p.deleteRow=function(a){for(var b=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],c=[],e=0,d=b.length;e<d;e++){var f=this.normalize(b[e]);f.oldRow=f.rowData;f.type="delete";c.push(f)}if(!c.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:c});!1!==a.refresh&&this.refreshView()};
p.addRow=function(a){var b=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],c=[],e=this.options.dataModel,d=e.data;null==d&&(e.data=[],d=e.data);for(var e=0,f=b.length;e<f;e++){var g=this.normalize(b[e]);g.type="add";c.push(g)}if(!c.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:c}))return!1;!1!==a.refresh&&this.refreshView();a=c[0].rowIndx;return null==a?d.length-1:a}})(jQuery);
(function(l){l.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null},_create:function(){var p=this.options,h=p.bootstrap,a=p.gridInstance,b=a.colModel,p=p.items,c=this.element;c.closest(".pq-grid");c.addClass("pq-toolbar");for(var e=0,d=p.length;e<d;e++){var f=p[e],g=f.type,q=f.icon,n=f.options,k=f.label,m=f.listener,F=m?[m]:f.listeners,m=f.cls,m="ui-corner-all "+(m?m:""),s=f.style,s=s?'style="'+s+'"':"",u=f.attr,u=u?u:"",r;"textbox"==g?r=l("<input type='text' class='"+m+"' "+u+" "+
s+">").appendTo(c):"checkbox"==g?r=l("<input type='checkbox' class='"+m+"' "+u+" "+s+">").appendTo(c):"separator"==g?l("<span class='pq-separator '"+m+"' "+u+" "+s+"></span>").appendTo(c):"button"==g?(g=h.on,r="",g&&(r=q?"<span class='glyphicon "+q+"'></span>":"",m="btn "+m),r=l("<button type='button' class='"+m+"' "+u+" "+s+">"+r+k+"</button>").appendTo(c),n=f.options?f.options:{},l.extend(n,{text:k?!0:!1,icons:{primary:g?"":q}}),r.button(n)):"select"==g?(n=f.options?f.options:[],"function"===typeof n&&
(n=n.call(a.element[0],{colModel:b})),r=l.paramquery.select({options:n,attr:" class='"+m+"' "+u+" "+s,prepend:f.prepend,groupIndx:f.groupIndx,valueIndx:f.valueIndx,labelIndx:f.labelIndx}),r=l(r).appendTo(c)):"string"==typeof g?r=l(g).appendTo(c):"function"==typeof g&&(r=g.call(a.element[0],{colModel:b,cls:m}),r=l(r).appendTo(c));if(F)for(f=0;f<F.length;f++){var m=F[f],v;for(v in m)r.bind(v,m[v])}}},_destroy:function(){this.element.empty().removeClass("pq-toolbar").enableSelection()},_disable:function(){null==
this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))},_enable:function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)},_setOption:function(l,h){"disabled"==l&&(!0==h?this._disable():this._enable())}})})(jQuery);
(function(l){var p=function(a){this.focusSelection=null};p.prototype.inViewRow=function(a){var c=this.that,e=c.options,d=c.rowIndxOffset,f=c.initV,g=c.finalV;if(a<e.freezeRows)return!0;if(e.groupModel){if((c=c.dataGM)&&c.length)for(;f<=g;f++)if(e=c[f].rowIndx-d,null!=e&&e==a)return!0;return!1}return a>=f&&a<=g};var h=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"active":"ui-state-highlight")};l.paramquery.cRows=h;var a=function(a){var c=
a.options;this.that=a;this.selection=[];this.hclass=" pq-state-select "+(c.bootstrap.on?"active":"ui-state-highlight")};l.paramquery.cCells=a;a=a.prototype=new p;p=h.prototype=new p;p.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};p._boundRow=function(a){a=this.that.getRow({rowIndxPage:a});if(null==a||0==a.length)return!1;a.addClass(this.hclass);return a};p.selectRange=function(a){var c=a.range,e=c.r1,c=c.r2;a=a.evt;var d=[];if(e>c)var f=e,e=c,c=f;for(;e<=
c;e++)d.push({rowIndx:e,evt:a});this.add({rows:d,evt:a})};a.removeAll=function(a){var c=this.that,e=c.options,d=e.groupModel?!0:!1;a=d?c.dataGM:e.dataModel.data;var f=c.pdata,g=c.iGenerateView.colDef,h=e.freezeRows,n=c.initV,k=c.finalV,m,l=this.hclass;if(a){for(var p=0;p<=k;p++)if(p>=h&&p<n)p=n-1;else{var u=d?a[p].rowIndx:p,r=f[u];if(null!=r&&(m=r.pq_cellselect))for(var v=0,r=g.length;v<r;v++){var B=g[v],A=B.colIndx;m[B.column.dataIndx]&&c.getCell({rowIndxPage:u,colIndx:A}).removeClass(l)}}a=e.dataModel.data;
p=0;for(r=a.length;p<r;p++)if(m=a[p])m.pq_cellselect=void 0}};p.removeAll=function(a){a=a||{};var c=this.that,e=c.initV,d=a.all,f=c.options,g=f.groupModel?!0:!1,h=f.freezeRows,n=c.finalV,k=c.pdata,m=this.hclass;if(a.refresh){a=g?c.dataGM:f.dataModel.data;for(var l=0;l<=n;l++)if(l>=h&&l<e)l=e-1;else{var p=g?a[l].rowIndx:l,u=k[p];u&&u.pq_rowselect&&c.getRow({rowIndxPage:p}).removeClass(m)}}a=d?f.dataModel.data:k;l=0;for(c=a.length;l<c;l++)if(e=a[l])e.pq_rowselect=void 0};a.isSelected=function(a){var c=
this.that,e=a.rowData||c.getRowData(a),d=a.dataIndx;a=a.colIndx;if(null==a&&null==d||null==e)return null;d=null==d?c.colModel[a].dataIndx:d;return!0==(e.pq_cellselect&&e.pq_cellselect[d])};p.getSelection=function(){for(var a=this.that,c=a.selection().address(),e=[],d=0,f=c.length;d<f;d++){var g=c[d];if("row"==g.type)for(var h=g.r2,g=g.r1;g<=h;g++){var n=a.getRowData({rowIndx:g});e.push({rowIndx:g,rowData:n})}}return e};a.getSelection=function(){for(var a=this.that,c=a.selection(),e=a.colModel,c=c.address(),
d=[],f=0,g=c.length;f<g;f++){var h=c[f],n=h.type;if("block"==n||"cell"==n||"column"==n)for(var n=h.r2,k=h.c1,m=h.c2,h=h.r1;h<=n;h++)for(var l=a.getRowData({rowIndx:h}),p=k;p<=m;p++)d.push({rowIndx:h,rowData:l,colIndx:p,dataIndx:e[p].dataIndx})}return d};a.inViewCell=function(a,c){var e=this.that,d=e.options.freezeCols;return this.inViewRow(a)?c<d||c>=e.initH&&c<=e.finalH:!1};a._add=function(a){var c=this.that;a=c.normalize(a);var e=a.rowIndxPage,d=a.rowData,f,g=a.colIndx,h=a.dataIndx,n=this.isSelected({rowData:d,
dataIndx:h});if(null==n)return!1;var k=this.inViewCell(e,g);!1===n&&(k&&(c=c.getCell({rowIndxPage:e,colIndx:g}))&&c.addClass(this.hclass),f=(d.pq_cellselect=d.pq_cellselect||{})[h]=!0);if(f)return a};p._add=function(a){var c=this.that.normalize(a),e;a=c.rowIndx;var d=c.rowIndxPage,f=c.rowData,g=this.isSelected({rowData:f});c.rowIndxPage=d;if(null==g)return!1;c=this.inViewRow(d);!1===g&&(c&&this._boundRow(d),e=f.pq_rowselect=!0);if(e)return{rowIndx:a,rowData:f}};a.add=function(a){this._add(a)};p.add=
function(a){var c=a.rows;if(c&&"function"==typeof c.push){a=0;for(var e=c.length;a<e;a++){var d=c[a];d.trigger=!1;this._add(d)}}else this._add(a)};p._remove=function(a){var c=this.that,e=c.normalize(a);a=e.rowIndx;var d=e.rowIndxPage,f=e.rowData,e=e.$tr;if(this.isSelected({rowData:f}))return this.inViewRow(d)&&(e=c.getRow({rowIndxPage:d}))&&(e.removeClass(this.hclass),e.removeAttr("tabindex")),f.pq_rowselect=!1,{rowIndx:a,rowData:f}};p.remove=function(a){var c=a.rows;if(c&&"function"==typeof c.push){a=
0;for(var e=c.length;a<e;a++){var d=c[a];d.trigger=!1;this._remove(d)}}else this._remove(a)};a.selectBlock=function(a){var c=this.that,e=this.hclass,d=a.range,f=d.r1,g=d.c1,h=d.r2,d=d.c2,n=c.initH,k=c.finalH,m=c.options.freezeCols,p=[],s=c.colModel,u=[];a=a.remove?!0:!1;for(var r=g;r<=d;r++)p[r]=s[r].dataIndx;for(;f<=h;f++)if(s=c.normalize({rowIndx:f}),r=s.rowData,s=s.rowIndxPage,r){var v=r.pq_cellselect=r.pq_cellselect||{};if(this.inViewRow(s))for(r=g;r<=d;r++){var B=p[r];if(a&&v[B]||!a&&!v[B]){if(r<
m||r>=n&&r<=k){var A=c.getCell({rowIndxPage:s,colIndx:r});A.length&&u.push(A[0])}v[B]=a?void 0:!0}}else for(r=g;r<=d;r++)B=p[r],v[B]=a?void 0:!0}if(u.length)l(u)[a?"removeClass":"addClass"](e)}})(jQuery);
(function(l){var p=!0;l(function(){var a=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);a[0].indeterminate=!0;a.on("change",function(){p=!1});a.click();a.remove()});var h=(l.paramquery.cCheckBoxColumn=function(a,b){var c=this;this.that=a;this.options=a.options;this.column=b;b.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},b.cb);this.dataIndx=b.dataIndx;var e=a.element,d=a.eventNamespace;a.on("dataAvailable",function(){a.one("dataReady",
function(){return c._onDataReady()})}).on("dataReady",function(){c.setValCBox()});e.on("change"+d,function(a){var b=a.target;if("checkbox"==b.type&&l(b).closest(".pq-grid")[0]==this)return c.onCheckBoxChange(a)});a.on("cellKeyDown",function(a,b){return c.onCellKeyDown(a,b)});a.on("refreshHeader",function(a,b){return c.refreshHeader(a,b)})}).prototype=new l.paramquery.cClass;h.hasHeaderChkBox=function(){return this.column.cb.header};h.setValCBox=function(){if(this.hasHeaderChkBox()){var a=this.that,
b=this.options,c=this.dataIndx,e=this.column.cb,d=e.all,f=a.rowIndxOffset,f="remote"!=b.pageModel.type&&d?0:f,b=d?b.dataModel.data:a.pdata,d=null,g=0,h=0;if(b){for(var n=0,k=0,m=b.length;k<m;k++){var l=b[k],p=k+f;a.isEditableRow({rowIndx:p})&&a.isEditableCell({rowIndx:p,dataIndx:c})&&(n++,l[c]===e.check?g++:h++)}g==n&&n?d=!0:h==n&&(d=!1);this.$inp&&this.$inp.pqval({val:d})}}};h.onHeaderChange=function(a){for(var b=l(a.target),c=this.that,e=this.column,d=e.dataIndx,f=c.options,g=e.cb,h=g.all,n=h?f.dataModel.data:
c.pdata,k=c.rowIndxOffset,k="remote"!=f.pageModel.type&&h?0:k,f=[],e={column:e,dataIndx:d,source:"header"},b=b[0].checked,h=0,m=n.length;h<m;h++){var p=h+k,s=n[h],u={},r={};u[d]=b?g.check:g.uncheck;r[d]=s[d];f.push({rowIndx:p,rowData:s,newRow:u,oldRow:r,type:"update"})}d={rowList:f,history:!g.select,source:"checkbox"};e.check=b;e.rows=f;if(!1===c._trigger("beforeCheck",a,e)||!1===c._digestData(d))return c.refreshHeader(),!1;c.refresh({header:!1});f=e.rows=d.rowList;c._trigger("check",a,e);g.select&&
c.selection({type:"row",method:b?"add":"remove",rows:f})};h.refreshHeader=function(a,b){var c=this;if(this.hasHeaderChkBox()){var e=this.that;if(e.pdata&&(e=e.getCellHeader({dataIndx:this.dataIndx}))){var d=this.$inp=e.find("input");this.setValCBox();if(p)d.on("click",function(a){null==d.data("pq_value")&&(d[0].checked=!0,d.data("pq_value",!0),c.onHeaderChange(a))});d.on("change",function(a){c.onHeaderChange(a)})}}};h._onDataReady=function(){var a=this.that,b=this.options,c=b.dataModel.data,b="remote"==
b.pageModel.type?a.rowIndxOffset:0,e=this.column,d=e.cb,f=e.dataIndx;if(null!=f&&c){for(var g=[],h=0,n=c.length;h<n;h++){var k=c[h];k[f]===d.check&&g.push({rowIndx:h+b,rowData:k})}if(!1!==a._trigger("check",null,{rows:g,column:e,dataIndx:f,source:"dataAvailable"})&&d.select)for(h=0;h<n;h++)k=c[h],k[f]===d.check&&(k.pq_rowselect=!0)}this.setValCBox()};h.rowSelect=function(a,b){var c=this.that,e=b.rows,d=b.rowData,f=this.dataIndx;if(e)for(var g=0,h=e.length;g<h;g++){var d=e[g],n=d.rowIndx,d=d.rowData;
d[f]=!0;c.refreshCell({rowIndx:n,dataIndx:f})}else d&&(d[f]=!0,n=b.rowIndx,c.refreshCell({rowIndx:n,dataIndx:f}));this.setValCBox()};h.rowUnSelect=function(a,b){var c=this.that,e=b.rows,d=b.rowData,f=this.dataIndx;if(e)for(var g=0,h=e.length;g<h;g++){var d=e[g],n=d.rowIndx,d=d.rowData;d[f]=!1;c.refreshCell({rowIndx:n,dataIndx:f})}else d&&(d[f]=!1,n=b.rowIndx,c.refreshCell({rowIndx:n,dataIndx:f}));this.setValCBox()};h.onCheckBoxChange=function(a){var b=this.that,c=this.column.cb,e=l(a.target),d=e.closest(".pq-grid-cell");
if(d.length){var d=b.getCellIndices({$td:d}),d=b.normalize(d),f=d.rowData,g=d.rowIndx,h=d.dataIndx;if(h==this.dataIndx){var e=e[0].checked,n={},k={};n[h]=e?c.check:c.uncheck;k[h]=f[h];f=[{rowData:f,rowIndx:g,oldRow:k,newRow:n,type:"update"}];d.check=e;d.rows=f;if(!1===b._trigger("beforeCheck",a,d))return b.refreshCell({rowIndx:g,dataIndx:h}),!1;f={source:"checkbox",history:!c.select,rowList:f};if(!1===b._digestData(f))return b.refreshCell({rowIndx:g,dataIndx:h}),!1;b.refreshRow({rowIndx:g});f=d.rows=
f.rowList;b._trigger("check",a,d);c.select&&b.selection({type:"row",method:e?"add":"remove",rows:f});this.setValCBox()}}};h.onCellKeyDown=function(a,b){if(b.dataIndx==this.dataIndx&&(13==a.keyCode||32==a.keyCode))return l(a.originalEvent.target).find("input").click(),!1}})(jQuery);
(function(){for(var l=0,p=["moz","webkit"],h=0;!window.requestAnimationFrame&&h<p.length;h++)window.requestAnimationFrame=window[p[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[h]+"CancelAnimationFrame"]||window[p[h]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),b=Math.max(0,16-(b-l));return window.setTimeout(function(){l=(new Date).getTime();a()},b)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();
(function(l){function p(a){this.that=a;var b=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=a.options.rowHeight;this.colwd=60;a.on("contMouseDown",function(a,e){return b._onContMouseDown(a,e)}).on("mouseDrag",function(a,e){return b._onMouseDrag(a,e)}).on("mouseStop",function(a,e){return b._onMouseStop(a,e)}).on("mousePQUp",function(a,
e){return b._onMousePQUp(a,e)}).on("rowMouseDown",function(a,e){return b._onRowMouseDown(a,e)}).on("cellMouseDown",function(a,e){return b._onCellMouseDown(a,e)}).on("refresh",function(c,b){setTimeout(function(){a.focus()},0)}).on("cellMouseEnter",function(a,e){return b._onCellMouseEnter(a,e)}).on("rowMouseEnter",function(a,e){return b._onRowMouseEnter(a,e)})}l.paramquery.cMouseSelection=p;var h=p.prototype=new l.paramquery.cClass;h.inViewPort=function(a){var b=this.that.iRefresh,c=b.getEContHt(),
b=b.getEContWd()+1;a=a[0];var e=this.scrollLeft;if(c>=a.offsetTop+a.offsetHeight+this.marginTop)if("TD"==a.nodeName.toUpperCase()){if(b>=a.offsetLeft+a.offsetWidth+e)return!0}else return!0};h._onCellMouseDown=function(a,b){var c=this.that,e=b.rowIndx,d=c.iSelection,f=b.colIndx,g=c.options.selectionModel,h=g.mode;if("cell"!=g.type)c.focus(b);else if(null!=f)return d=d.address()[0],a.shiftKey&&"single"!=h&&d?(h=d.firstR,d=d.firstC,c.range({r1:h,c1:d,r2:e,c2:f,firstR:h,firstC:d}).select()):(this.mousedown=
{r1:e,c1:f},c.range({r1:e,c1:f,firstR:e,firstC:f}).select()),c.focus(b),!0};h._onCellMouseEnter=function(a,b){var c=this.that,e=c.options.selectionModel,d=e.type,e=e.mode;if(this.mousedown&&"single"!=e){if("cell"==d){var d=this.mousedown,e=d.r1,f=d.c1,g=b.rowIndx,h=b.colIndx;if(e==g&&f==h||d.r2==g&&d.c2==h)return;this.mousedown.r2=g;this.mousedown.c2=h;c.scrollCell({rowIndx:g,colIndx:h});c.range({r1:e,c1:f,r2:g,c2:h,firstR:e,firstC:f}).select()}c.focus(b)}};h._onRowMouseEnter=function(a,b){var c=
this.that,e=c.options.selectionModel,d=e.mode;"row"==e.type&&this.mousedown&&"single"!=d&&(e=this.mousedown.r1,d=b.rowIndx,e==d?c.range({r1:e,firstR:e}).select():this.mousedown.r2!=d&&(this.mousedown.r2=d,c.scrollRow({rowIndx:d}),c.range({r1:e,r2:d,firstR:e}).select()))};h._onRowMouseDown=function(a,b){var c=this.that,e=b.rowIndx,d=c.iSelection,f=c.options.selectionModel,g=0<=a.originalEvent.target.className.indexOf("pq-grid-number-cell"),h=f.mode;if(("row"==f.type||f.row&&g)&&null!=e)return f=c.iSelection.address(),
a.shiftKey?((d=f.length)&&"row"==f[d-1].type&&(d=f[d-1],d.r1=d.firstR,d.r2=e,d.c1=d.c2=d.type=void 0),c.range(f).select()):(a.ctrlKey||a.metaKey)&&"single"!=h?d.add({r1:e,firstR:e}):(this.mousedown={r1:e,y1:a.pageY,x1:a.pageX},c.range({r1:e,firstR:e}).select()),g&&setTimeout(function(){c.focus({rowIndxPage:b.rowIndxPage,colIndx:c.getFirstVisibleCI(!0)})},0),!0};h._onContMouseDown=function(a,b){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:a.pageX,y:a.pageY});return!0};h._onMousePQUp=
function(a,b){this.mousedown=null};h._stopSwipe=function(a){a&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};h._onMouseStop=function(a,b){var c=this,e=this.that;if(this.swipedownPrev){var d=e.options.swipeModel,e=this.swipedownPrev,f=e.ts,g=(new Date).getTime()-f,h=a.pageX,n=a.pageY,k=h-e.x,m=n-e.y;if(Math.sqrt(k*k+m*m)/g>d.ratio){var l=0,p=d.repeat;c._stopSwipe();var u=function(){l+=d.speed;p--;c._onMouseDrag({pageX:h+
l*k/g,pageY:n+l*m/g});0<p?c.intID=window.requestAnimationFrame(u):c._stopSwipe(!0)};u()}else c.swipedown=null,c.swipedownPrev=null}};h._onMouseDrag=function(a,b){var c=this.that.options;if(this.swipedown){var e=this.swipedown,d=e.x,f=e.y,g=a.pageX,h=a.pageY;this.swipedownPrev={x:d,y:f,ts:(new Date).getTime()};var n=c.scrollModel.smooth;if(!c.virtualY||n)this.scrollVertSmooth(f,h),this.syncScrollBarVert();c.virtualX&&!n||"flex"===c.width||(this.scrollHorSmooth(d,g),this.syncScrollBarHor());e.x=g;e.y=
h}return!0};h.updateTableY=function(a){if(0==a)return!1;var b=this.that,c=this.getTableForVertScroll(),b=b.iRefresh.getEContHt();if(!c||!c.length)return!1;var e=c.data("offsetHeight")-1,d=this.scrollTop-a;this.setScrollTop(0>d?0:0>a&&0<b-e+d?e-b:d,c,b);return!0};h.setScrollTop=function(a,b,c){0<=a&&(this.scrollTop=a=Math.round(a),b.parent("div").scrollTop(a))};h.getScrollLeft=function(a){return this.scrollLeft};h.getScrollTop=function(a){return this.scrollTop};h.setScrollLeft=function(a,b,c,e){0<=
a&&(this.scrollLeft=a=Math.round(a),c=c?c.parent():l(),c=c.add(b?b.parent("div"):l()),c.scrollLeft(a))};h.scrollVertSmooth=function(a,b){a!=b&&this.updateTableY(b-a)};h.scrollHorSmooth=function(a,b){if(a!=b){var c=this.that,e=c.options,d=b-a,f=this.getTableForHorScroll(),g=this.getTableHeaderForHorScroll(),c=c.iRefresh.getEContWd();if(f||g){var h=f?f:g,e=e.virtualX?this.getScrollWidth(h):h.data("scrollWidth"),d=this.scrollLeft-d;this.setScrollLeft(0>d?0:0>e-c-d?e-c:d,f,g,c)}}};h.syncViewWithScrollBarVert=
function(a){if(null!=a){var b=this.that,c=this.getTableForVertScroll();if(c&&c.length){b.options.editModel.indices&&b.blurEditor({force:!0});var e=c.data("offsetHeight"),b=b.iRefresh.getEContHt();if((a*=e-b)||0===a)0>a&&(a=0),this.setScrollTop(a,c,b)}}};h.syncViewWithScrollBarHor=function(a){if(null!=a){var b=this.that,c=this.getTableForHorScroll(),e=this.getTableHeaderForHorScroll();if(c||e){var d=b.options;d.editModel.indices&&b.blurEditor({force:!0});var f=c?c:e,d=d.virtualX?this.getScrollWidth(f):
f.data("scrollWidth"),b=b.iRefresh.getEContWd();a*=d-b;d&&b&&(0>a&&(a=0),this.setScrollLeft(a,c,e,b))}}};h.resetMargins=function(){this.scrollTop=this.scrollLeft=0};h.syncHeaderViewWithScrollBarHor=function(a){if(null!=a){var b=this.that,c=this.getTableHeaderForHorScroll();if(c){var e=b.options,d=e.freezeCols;e.editModel.indices&&b.blurEditor({force:!0});var e=c.data("scrollWidth"),f=b.iRefresh.getEContWd();a=b.calcWidthCols(d,a+d);e&&f&&(0>a&&(a=0),c.css("marginLeft",-a))}}};h.syncScrollBarVert=
function(){var a=this.that,b=this.getTableForVertScroll();if(b&&b.length){var b=b.data("offsetHeight"),c=a.iRefresh.getEContHt(),b=this.scrollTop/(b-c);0<=b&&1>=b&&a.vscroll.widget().hasClass("pq-sb-vert")&&a.vscroll.option("ratio",b)}};h.syncScrollBarHor=function(){var a=this.that,b=a.options,c=this.getTableForHorScroll(),e=this.getTableHeaderForHorScroll();if(c||e)c=c?c:e,b=b.virtualX?this.getScrollWidth(c):c.data("scrollWidth"),c=a.iRefresh.getEContWd(),b=this.scrollLeft/(b-c),0<=b&&1>=b&&a.hscroll.widget().hasClass("pq-sb-horiz")&&
a.hscroll.option("ratio",b)};h.getTableForVertScroll=function(){var a=this.that,b=a.pqpanes;if((a=a.$tbl)&&a.length)return b.h&&b.v?a=l([a[2],a[3]]):b.v?a=l([a[0],a[1]]):b.h&&(a=l(a[1])),a};h.getTableForHorScroll=function(){var a=this.that,b=a.pqpanes,c=[],e=a.$tbl;if(e&&e.length)return b.h&&b.v?c.push(e[1],e[3]):b.v?c.push(e[1]):b.h?c.push(e[0],e[1]):c.push(e[0]),a.tables.length&&(a=a.tables[0].$tbl,b.v?c.push(a[1]):c.push(a[0])),l(c)};h.getTableHeaderForHorScroll=function(){var a=this.that,b=a.pqpanes;
if((a=a.$tbl_header)&&a.length)return a=b.vH?l(a[1]):l(a[0]),a.parent()};h.scrollRowNonVirtual=function(a){var b=this.that,c=b.options,e=a.rowIndxPage,d=a.rowIndx;a=b.iRefresh.getEContHt();e=null==e?d-b.rowIndxOffset:e;c=parseInt(c.freezeRows);if(!(e<c)){var c=b.get$Tbl(e),f=b.getRow({rowIndxPage:e})[0];f&&(b=c[0].offsetTop+1,e=f.offsetHeight,d=this.getScrollTop(),f=f.offsetTop,0>b+f-d?(b=b+f+-1,this.setScrollTop(0>b?0:b,c,a),this.syncScrollBarVert()):f+e-d>a&&(this.setScrollTop(e+f-a,c,a),this.syncScrollBarVert()))}};
h.scrollColumnNonVirtual=function(a){var b=this.that,c=a.colIndx,c=null==c?b.getColIndx({dataIndx:a.dataIndx}):c,e=b.options.freezeCols;if(!(c<e)){a=b._calcRightEdgeCol(c).width;var c=b._calcRightEdgeCol(c-1).width,e=b._calcRightEdgeCol(e-1).width,d=this.getTableForHorScroll(),f=this.getTableHeaderForHorScroll(),b=b.iRefresh.getEContWd(),g=this.scrollLeft;a-g>b?(this.setScrollLeft(a-b,d,f,b),this.syncScrollBarHor()):c-e<g&&(this.setScrollLeft(c-e,d,f,b),this.syncScrollBarHor())}}})(jQuery);
(function(l){var p=null,h=!1,a="",b=l.paramquery.pqGrid.prototype,c=b.options,e={on:!0,header:!0,zIndex:1E4},d={on:!0},f={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};c.pasteModel=c.pasteModel||f;c.copyModel=c.copyModel||e;c.cutModel=c.cutModel||d;b._setGlobalStr=function(c){a=c};b.copy=function(){p=new g(this);p.copy();p=null};b.paste=function(a){p=new g(this);p.paste(a);p=null};b.cut=function(){p=new g(this);p.copy({cut:!0,source:"cut"});p=null};b.clear=function(){this.iSelection.clear()};
var g=function(a,c){this.that=a},b=g.prototype;b.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,c=l("#pq-grid-excel");0==c.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),c=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),c.css({opacity:0}));
c.select()};b.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,c=l(window).scrollTop(),b=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),d=l(window).scrollLeft();c==a&&b==d||window.scrollTo(b,c)};b.clearClipBoard=function(){l("#pq-grid-excel").val("")};b.copy=function(a){return this.that.iSelection.copy(a)};b.paste=function(c){c=c||{};var b=this.that,d=c.dest,e=c.clip,f=e?e.length?e.val():"":a,f=f.replace(/\n$/,""),e=f.split("\n"),g=e.length,h,p=b.colModel,q=b.readCell,
A=b.options.pasteModel,t="row",w=!1,x=p.length;if(A.on&&0!=f.length&&0!=g){f={rows:e};if(!1===b._trigger("beforePaste",null,f))return!1;var y=A.type,z,D,C,t=(d?b.range(d):b.selection())._areas;t.length?(C=t[0],t="row"==C.type?"row":"cell",z=C.r1,D=C.r2,d=C.c1,C=C.c2):(t="cell",C=d=D=z=0);var E,H;"replace"==y?(E=z,H=D-z+1<g?"extend":"repeat"):"append"==y?(E=D+1,H="extend"):"prepend"==y&&(E=z,H="extend");var I,g="extend"==H?g:D-z+1,J;z=0;c=c.rowList||[];for(var M=D=0;M<g;M++){var P=e[z],L=M+E,G="replace"==
y?b.getRowData({rowIndx:L}):null,K=G?{}:null,O={};void 0===P&&"repeat"===H&&(z=0,P=e[z]);z++;var N=P.split("\t");if(!h)if("cell"==t){h=N.length;I=C-d+1<N.length?"extend":"repeat";h="extend"==I?h:C-d+1;if(isNaN(h))throw"lenH NaN. assert failed.";h+d>x&&(h=x-d)}else h=x,d=0;var T=0,Q=0,P=0;J=h;for(Q=0;Q<J;Q++){var V=p[Q+d],R=N[T],W=V.dataIndx;V.hidden?"extend"==I&&J+d<x&&J++:(void 0===R&&"repeat"===I&&(T=0,R=N[T]),T++,O[W]=R,K&&(K[W]=q(G,V)))}!1==l.isEmptyObject(O)&&(N="update",null==G&&(w=!0,N="add"),
c.push({newRow:O,rowIndx:L,rowData:G,oldRow:K,type:N}),D++)}b._digestData({rowList:c,source:"paste",allowInvalid:A.allowInvalid,validate:A.validate});b[w?"refreshView":"refresh"]();A.select&&("cell"==t?b.range({r1:E,c1:d,r2:E+D-1,c2:"extend"==I?d+h-1+P:C}).select():b.range({r1:E,r2:E+D-1}).select());b._trigger("paste",null,f)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var c=l(a.target);if(c.hasClass("pq-grid-row")||c.hasClass("pq-grid-cell")||c.is("#pq-grid-excel")||
c.hasClass("pq-grid-cont")){var b=c.closest(".pq-grid");if(p||c.length&&b.length){if(!p){try{var d=b.pqGrid("getInstance").grid;if(d.option("selectionModel.native"))return!0}catch(e){return!0}p=new g(d,c);p.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?p.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?p.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(h=!0,p.clearClipBoard(),window.setTimeout(function(){p&&(p.paste({clip:l("#pq-grid-excel")}),p.destroyClipBoard(),p=
null);h=!1},0)):(c=l("#pq-grid-excel"),c.length&&document.activeElement==c[0]&&p.that._onKeyPressDown(a))}}}else if(c=a.keyCode,b=l.ui.keyCode,c==b.UP||c==b.DOWN||c==b.LEFT||c==b.RIGHT||c==b.PAGE_UP||c==b.PAGE_DOWN){if(q)return!1;c=l(a.target);if(c.hasClass("pq-grid-row")||c.hasClass("pq-grid-cell"))q=!0}}).bind("keyup.pqExcel",function(a){var c=a.keyCode;h||!p||a.ctrlKey||a.metaKey||-1==l.inArray(c,[17,91,93,224])||(p.destroyClipBoard(),p=null);q&&(a=l(a.target),a.hasClass("pq-grid-row")||a.hasClass("pq-grid-cell")||
(q=!1))});var q=!1})(jQuery);
(function(l){var p=l.paramquery.pqGrid.prototype.options,h={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};p.historyModel=p.historyModel||h;p=(l.paramquery.cHistory=function(a){var b=this;this.that=a;this.options=a.options;this.records=[];this.id=this.counter=0;a.on("keyDown",function(a,e){return b._onKeyDown(a,e)}).on("dataAvailable",function(a,e){"filter"!=e.source&&b.reset()})}).prototype=new l.paramquery.cClass;p._onKeyDown=function(a,b){var c=a.ctrlKey||a.metaKey;if(c&&"90"==a.keyCode)return this.undo(),
!1;if(c&&"89"==a.keyCode)return this.redo(),!1};p.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};p.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};p.increment=function(){var a=this.records,b=a.length;
this.id=b?a[b-1].id+1:0};p.push=function(a){var b=this.canRedo(),c=this.records,e=this.counter;c.length>e&&c.splice(e,c.length-e);c[e]=l.extend({id:this.id},a);this.counter++;a=this.that;var d,f;1==this.counter&&(d=!0);b&&this.counter==c.length&&(f=!1);a._trigger("history",null,{type:"add",canUndo:d,canRedo:f,num_undo:this.counter,num_redo:0})};p.canUndo=function(){return 0<this.counter?!0:!1};p.canRedo=function(){return this.counter<this.records.length?!0:!1};p.undo=function(){var a=this.canRedo(),
b=this.that,c=!1,e=this.options.historyModel,d=this.records;if(0<this.counter)this.counter--;else return!1;for(var d=d[this.counter].rowList,f=[],g=0,h=d.length;g<h;g++){var n=d[g],k=n.newRow,m=n.rowData,l=n.type,p=n.oldRow,n=n.rowIndx;"update"==l?(n=b.getRowIndx({rowData:m}).rowIndx,f.push({type:l,rowIndx:n,rowData:m,oldRow:k,newRow:p})):"add"==l?(c=!0,f.push({type:"delete",rowData:k})):"delete"==l&&(c=!0,f.push({type:"add",rowIndx:n,newRow:m}))}b._digestData({history:!1,source:"undo",checkEditable:e.checkEditable,
checkEditableAdd:e.checkEditableAdd,allowInvalid:e.allowInvalid,rowList:f});b[c?"refreshView":"refresh"]({source:"undo"});var u,r;!1===a&&(u=!0);0==this.counter&&(r=!1);b._trigger("history",null,{canUndo:r,canRedo:u,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};p.redo=function(){var a=this.canUndo(),b=this.that,c=this.options.historyModel,e=this.counter,d=this.records;if(e==d.length)return!1;for(var f=!1,e=d[e].rowList,g=[],h=0,n=e.length;h<n;h++){var k=e[h],
m=k.newRow,l=k.rowData,p=k.type,u=k.oldRow,k=k.rowIndx;"update"==p?(k=b.getRowIndx({rowData:l}).rowIndx,g.push({type:p,rowIndx:k,rowData:l,oldRow:u,newRow:m})):"add"==p?(f=!0,g.push({type:"add",rowIndx:k,newRow:m})):"delete"==p&&(f=!0,g.push({type:"delete",rowData:l}))}b._digestData({history:!1,source:"redo",checkEditable:c.checkEditable,checkEditableAdd:c.checkEditableAdd,allowInvalid:c.allowInvalid,rowList:g});b[f?"refreshView":"refresh"]({source:"redo"});this.counter<d.length&&this.counter++;var r,
v;!1==a&&(r=!0);this.counter==this.records.length&&(v=!1);b._trigger("history",null,{canUndo:r,canRedo:v,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=function(a){return this.iHistory[a.method](a)}})(jQuery);
(function(l){l.paramquery.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},end:{text:"Ends With",
TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var b=[],c;for(c in a)b.push(c);return b}(),getConditions:function(b){var c=[],e;for(e in a)a[e][b]&&
c.push(e);return c},getTRConditions:function(){var b=[],c;for(c in a)a[c].TR&&b.push(c);return b}(),getWTRConditions:function(){var b=[],c;for(c in a)a[c].TR||b.push(c);return b}()}}();l.paramquery.filter.rules={};l.paramquery.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",lte:"Less than or equal",
great:"Great Than",gte:"Greater than or equal"};var p=function(a){this.that=a};l.paramquery.cFilterData=p;var h=p.prototype;p.conditions={equal:function(a,b){if(a==b)return!0},contain:function(a,b){if(-1!=a.indexOf(b))return!0},notcontain:function(a,b){if(-1==a.indexOf(b))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,b){if(0==(a+"").indexOf(b))return!0},notbegin:function(a,b){if(0!=a.indexOf(b))return!0},end:function(a,b){var c=
a.lastIndexOf(b);if(-1!=c&&c+b.length==a.length)return!0},notend:function(a,b){var c=a.lastIndexOf(b);if(-1==c||c+b.length!=a.length)return!0},regexp:function(a,b){if(b.test(a))return b.lastIndex=0,!0},notequal:function(a,b){if(a!=b)return!0},great:function(a,b){if(a>b)return!0},gte:function(a,b){if(a>=b)return!0},between:function(a,b,c){if(a>=b&&a<=c)return!0},range:function(a,b){if(-1!=l.inArray(a,b))return!0},less:function(a,b){if(a<b)return!0},lte:function(a,b){if(a<=b)return!0}};p.convert=function(a,
b){a=null==a?"":a;"string"==b?a=l.trim(a).toUpperCase():"date"==b?a=Date.parse(a):"integer"==b?a=parseInt(a):"float"==b?a=parseFloat(a):"bool"==b&&(a=String(a).toLowerCase());return a};h.isMatchCellSingle=function(a,b){var c=a.dataType,e=a.value,d=a.value2,f=a.cbFn,g=b[a.dataIndx],g="regexp"==a.condition?null==g?"":g:p.convert(g,c);return f(g,e,d)?!0:!1};h.isMatchRow=function(a,b,c){if(0==b.length)return!0;for(var e=0;e<b.length;e++){var d=this.isMatchCell(b[e],a);if("OR"==c&&d)return!0;if("AND"==
c&&!d)return!1}if("AND"==c)return!0;if("OR"==c)return!1};h.getQueryStringFilter=function(){var a=this.that,b=a.options,c=b.stringify,b=b.filterModel,e=b.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),d="";b&&b.on&&a&&(a.length?(b={mode:e,data:a},d=!1===c?b:JSON.stringify(b)):d="");return d};h.filterLocalData=function(a){a=a||{};var b=this.that,c=a.apply;a=this.getFilterData({CM:!1===c?a.CM:b.colModel});var e=b.options,d=e.dataModel,f=b.iSort,g=d.data,h=d.dataUF,n=e.filterModel,k=n.multiple,
e=n?n.mode:null;g||(g=d.data=[]);h||(h=d.dataUF=[]);!1===c&&(g=g.slice());if(h.length)g.push.apply(g,h),0==f.readSorter().length&&f.sortLocalData(g),h=d.dataUF=[];else if(a.length)f.saveOrder();else return{data:g,dataUF:h};this.isMatchCell=k?this.isMatchCellMultiple:this.isMatchCellSingle;if(n.on&&e&&a&&a.length&&g.length)for(d=g.length-1;0<=d;d--)this.isMatchRow(g[d],a,e)||h.push(g.splice(d,1)[0]);!1!==c&&(b._queueATriggers.filter={ui:{type:"local",filter:a}});return{data:g,dataUF:h}};h.getFilterData=
function(a){var b=a.CM;if(!b)throw"CM N/A";var c=b.length,e=a.location;a=this.that.options.filterModel.multiple;for(var d=l.paramquery.filter.getAllConditions,f=l.paramquery.filter.getTRConditions,g=[],h=l.paramquery.cFilterData,n=function(a,c,b){return"function"==typeof a?!0:"between"==a?null!=c&&""!==c||null!=b&&""!==b?!0:!1:-1!=l.inArray(a,d)?null!=c&&""!==c||-1==l.inArray(a,f)?!0:!1:!0},k=function(a,c){return"remote"==e?(null==a?"":a).toString():h.convert(a,c)},m=0;m<c;m++){var p=b[m],s=p.dataIndx,
u=p.dataType,u=u&&"function"!=typeof u?u:"string",r=p.filter;if(a){if((r=p.filterModel)&&r.on){for(var v=[],B=r.mode,A=r.filters,p=0;p<A.length;p++){var r=A[p],t=r.value,w=r.condition;n(w,t)&&(t=k(t,u),v.push({value:t,condition:w}))}g.push({dataIndx:s,mode:B,dataType:u,filters:v})}}else if(r&&r.on&&(t=r.value,v=r.value2,w=r.condition,n(w,t,v))){if("between"==w)""===t||null==t?(w="lte",t=k(v,u)):""===v||null==v?(w="gte",t=k(t,u)):(t=k(t,u),v=k(v,u));else if("regexp"==w)if("remote"==e)t=t.toString();
else{if("string"==typeof t)try{var x=r.modifiers,x=x?x:"gi",t=new RegExp(t,x)}catch(y){t=/.*/}}else if("range"==w)if(null==t)continue;else if("string"==typeof t)t=k(t,u),t=t.split(/\s*,\s*/);else{if(t&&"function"==typeof t.push){if(0==t.length)continue;t=t.slice();p=0;for(r=t.length;p<r;p++)t[p]=k(t[p],u)}}else t=k(t,u);g.push({dataIndx:s,value:t,value2:v,condition:w,dataType:u,cbFn:"remote"==e?"":"function"==typeof w?w:h.conditions[w]})}}return g}})(jQuery);
(function(l){l=(l.paramquery.cSort=function(l){this.that=l;this.sorters=[];this.cancel=!1}).prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var l=this.that.options,h=l.groupModel,a=h?h.dataIndx:null,b=h?h.dir:null,c=[];if(h&&a)for(h=0;h<a.length;h++)c.push({dataIndx:a[h],dir:b&&b[h]?b[h]:"up"});a=l.sortModel;l=a.sorter;a=a.single;l&&l.length&&(a&&(l=[l[0]]),c=c.concat(l));return c};l.setSingle=function(l){this.single=l};l.getSingle=
function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(l){this.that.options.sortModel.single=l};l.setCancel=function(l){this.cancel=l};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(l){this.that.options.sortModel.cancel=l};l.writeSorter=function(l){var h=this.that.options,a=h.sortModel,b=h.groupModel,h=b?b.dataIndx:null,c=b?b.dir:null;if(h){c||(b.dir=
[]);for(b=0;b<h.length;b++){var e=l[b];if(h[b]!=e.dataIndx)throw"gDataIndx!=sorter.dataIndx";c[b]=e.dir}l.splice(0,h.length)}a.sorter=l};l.refreshSorter=function(l){l=l||{};var h=l.sorter,a=h[0].dataIndx,b=h[0].dir,c=l.single,h=l.cancel,e=this.that.options.groupModel,d=e?e.dataIndx:null,f=d?d.length:0,g=-1;l=this.readSorter();if(null==c)throw"sort single N/A";if(e)for(e=0;e<d.length;e++)d[e]==a&&(g=e);-1<g?l[g].dir="up"===l[g].dir?"down":"up":null!=a&&(c?l[f]&&l[f].dataIndx==a?(a=l[f].dir,a="up"===
a?"down":h&&"down"===a?"":"up",""===a?l.length--:l[f].dir=a):l[f]={dataIndx:a,dir:b?b:"up"}:(f=this.inSorters(l,a),-1<f?(a=l[f].dir,"up"==a?l[f].dir="down":h&&"down"==a?l.splice(f,1):1==l.length?l[f].dir="up":l.splice(f,1)):l.push({dataIndx:a,dir:"up"})));return l};l.saveOrder=function(l){var h=this.that.options.dataModel;l=h.data;if(!(!l||!l.length||h.dataUF&&h.dataUF.length||this.getSorter().length&&null!=l[0].pq_order))for(var h=0,a=l.length;h<a;h++)l[h].pq_order=h};l.getQueryStringSort=function(){if(this.cancel)return"";
var l=this.sorters,h=this.that.options.stringify;return l.length?!1===h?l:JSON.stringify(l):""};l.getSorter=function(){return this.sorters};l.setSorter=function(l){this.sorters=l.slice(0)};l.inSorters=function(l,h){for(var a=-1,b=0;b<l.length;b++)if(l[b].dataIndx==h){a=b;break}return a};l.sortLocalData=function(l){for(var h=this.that,a=h.colModel,b=this.sorters,c=0;c<b.length;c++){var e=b[c],d=h.getColIndx({dataIndx:e.dataIndx}),d=a[d],f=d.sortType;e.dataType=d.dataType;e.sortType=f}b.length||(b=
[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(b,l)};l._sortLocalData=function(l,h){function a(a,c,b,d){a=a[b];c=c[b];a=a?parseInt(a,10):0;c=c?parseInt(c,10):0;return(a-c)*d}function b(a,c,b,d){a=a[b];c=c[b];a=a?Date.parse(a):0;c=c?Date.parse(c):0;return(a-c)*d}function c(a,c,b,d){a=(a[b]+"").replace(/,/g,"");c=(c[b]+"").replace(/,/g,"");a=a?parseFloat(a):0;c=c?parseFloat(c):0;return(a-c)*d}function e(a,c,b,d){a=a[b];c=c[b];a=a?a:"";c=c?c:"";b=0;a>c?b=1:a<c&&(b=-1);
return b*d}function d(a,c,b,d){a=a[b];c=c[b];a=a?a.toUpperCase():"";c=c?c.toUpperCase():"";b=0;a>c?b=1:a<c&&(b=-1);return b*d}function f(a,c,b,d){a=a[b];c=c[b];b=0;if(a&&!c||!1===a&&null===c)b=1;else if(c&&!a||!1===c&&null===a)b=-1;return b*d}if(null==h||0==h.length)return[];if(!l||!l.length)return h;var g=this.that,q=g.columns,n=g.readCell;(function(){for(var g=[],m=[],F=[],s=l.length,u=0;u<s;u++){var r=l[u],v=r.dataIndx,B="up"==r.dir?1:-1,A=r.sortType,r=r.dataType;m[u]=v;F[u]=B;g[u]="integer"==
r?a:"float"==r?c:"function"==typeof r?function(a){return function(c,b,d,e){return a(c[d],b[d])*e}}(r):A?function(a){return function(c,b,d,e){return a(c,b,d)*e}}(A):"date"==r?b:"stringi"==r?d:"bool"==r?f:e;if((B=q[v])&&B.nested)for(u=0,A=h.length;u<A;u++)r=h[u],r[v]=n(r,B)}h=h.sort(function(a,c){for(var b=0,d=0;d<s&&(b=g[d](a,c,m[d],F[d]),0==b);d++);return b})})();return h}})(jQuery);
(function(l){function p(a){this.that=a;this.mc=null;var b=this,d=a.options;this.DM=d.dataModel;if(d.mergeCells)a.on("dataReady columnOrder",function(a,c){d.mergeCells&&"pager"!==c.source&&b.initMergeCells(d.mergeCells)})}function h(a,b,d){var f=0,g=a.length;for(d=d>g?g:d;b<d;b++)!0!==a[b].hidden&&f++;return f}function a(a,b,d){var f=0,g=a.length;for(d=d>g?g:d;b<d;b++)!0!==a[b].pq_hidden&&f++;return f}l.paramquery.cMerge=p;var b=p.prototype=new l.paramquery.cClass;b.initMergeCells=function(c){for(var b=
this.that,d=b.colModel,f=this.DM.data,g=[],l=[],n=0,k=c.length;n<k;n++){var m=c[n],p=m.r1,s=f[p],u=m.c1,r=d[u],v=m.rc,B=m.cc;if(r&&s){if(r.hidden){a:{for(r=u;r<u+B;r++){var A=d[r];if(!A){r=-1;break a}if(!A.hidden)break a}r=void 0}B-=r-u;u=r}r=h(d,u,u+B);if(s.pq_hidden){a:{for(s=p;s<p+v;s++){A=f[s];if(!A){s=-1;break a}if(!A.pq_hidden)break a}s=void 0}v-=s-p;p=s}s=a(f,p,p+v);if(1<r&&1<=s||1<=r&&1<s)for(g[n]={r1:p,c1:u,rc:v,cc:B},l[p]=l[p]||[],l[p][u]={show:!0,rowspan:s,colspan:r,o_rowspan:v,o_colspan:B,
style:m.style,cls:m.cls,attr:m.attr,r1:p,c1:u},m=0;m<v;m++)for(l[p+m]=l[p+m]||[],s=0;s<B;s++)if(0!=m||0!=s)l[p+m][u+s]={show:!1,r1:p,c1:u}}}b._mergeCells=0<l.length;this.mc=l;this.mc2=g};b.isHidden=function(a,b){var d,f=this.mc;return f&&f[a]&&(d=f[a][b])&&!d.show?!0:!1};b.setData=function(a,b,d){var f,g=this.mc;g[a]&&(f=g[a][b])&&(f.data=d)};b.getData=function(a,b,d){var f,g=this.mc;if(g[a]&&(f=g[a][b]))return(a=f.data)?a[d]:null};b.removeData=function(a,b,d){var f,g=this.mc;g&&g[a]&&(f=g[a][b])&&
(a=f.data)&&(a[d]=null)};b.ismergedCell=function(a,b){var d=this.mc,f;return d&&d[a]&&(f=d[a][b])?f.show?{rowspan:f.o_rowspan,colspan:f.o_colspan}:!0:!1};b.isRootCell=function(a,b,d){var f=this.mc,g;if(f&&f[a]&&(g=f[a][b])){var h=g.r1;g=g.c1;if(d){if(d=f[h][g],d.a_r1==a&&d.a_c1==b)return!0}else if(h==a&&g==b)return!0}return!1};b.getRootCell=function(a,b,d){var f=this.that,g=this.mc,h;if(g&&g[a]&&(h=g[a][b])){a=h.r1;b=h.c1;d&&(b=g[a][b],a=b.a_r1,b=b.a_c1);d=f.colModel[b];var g=f.rowIndxOffset,l=a-
g;0>l&&(l=0,a=g);return{rowIndxPage:l,colIndx:b,column:d,dataIndx:d.dataIndx,rowData:f.pdata[l],rowIndx:a,rowspan:h.rowspan,colspan:h.colspan}}};b.inflateRange=function(a,b,d,f){var g=this.that,h=!1,l=g.options.dataModel.data.length-1,g=g.colModel.length-1,k=this.mc2;if(!k)return[a,b,d,f];var m=0,p=k.length;a:for(;m<p;m++){var s=k[m],u=s.r1,r=s.c1,v=u+s.rc-1,s=r+s.cc-1,v=v>l?l:v,s=s>g?g:s,B=u<=d&&v>d,A=r<b&&s>=b,t=r<=f&&s>f;if((u<a&&v>=a||B)&&s>=b&&r<=f||(A||t)&&v>=a&&u<=d){h=!0;a=u<a?u:a;b=r<b?r:
b;d=v>d?v:d;f=s>f?s:f;break a}}return h?this.inflateRange(a,b,d,f):[a,b,d,f]};l.paramquery.pqGrid.prototype.calcVisibleRows=a;b.renderCell=function(c){var b=this.that,d=c.rowIndx,f=c.rowIndxPage,g=c.colIndx,l,n=this.mc,k;if(n[d]&&(k=n[d][g])){var m=k.r1,p=k.c1;l=b.options;var s=b.colModel,u=l.freezeCols,r=l.freezeRows,v=b.initH,B=b.initV;if(k.show||g==p&&f==B&&m>=r||g==p&&d==B&&m>=r||d==m&&g==v&&p>=u||d==B&&g==v&&p>=u&&m>=r){l=m-b.rowIndxOffset;var b=b.pdata,f=this.DM.data,A=h(s,0,u);k=a(b,0,r);l=
{rowData:f[m],rowIndx:m,colIndx:p,column:s[p],rowIndxPage:l};var n=n[m][p],t=n.colspan,w=n.rowspan;u&&g<u&&g+t>A?(p=t-h(s,u,v),s=h(s,g,u),t=Math.max(p,s)):t-=h(s,p,g);r&&d<r&&d+w>k?(m=w-a(b,r,B),r=a(b,d,r),w=Math.max(m,r)):w-=a(f,m,d);n.a_r1=d;n.a_c1=g;l.rowspan=w;l.colspan=t;l.style=n.style;l.attr=n.attr;l.cls=n.cls}else return null}return l?l:c}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,b,d){var f=function(){};f.prototype=a.prototype;var f=b.prototype=new f,g=a.prototype,h;for(h in d){var l=g[h],k=d[h];f[h]=l?function(a,c){return function(){this._super=function(){return a.apply(this,arguments)};var b=c.apply(this,arguments);this._super=void 0;return b}}(l,k):k}f.constructor=b;f._base=a;f._bp=function(a){var c=arguments;Array.prototype.shift.call(c);return g[a].apply(this,c)}};var p=l.Range=function(a,b,d){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof p)return new p(a,b,d);this._type=d?d:"range";this.init(b)},h=p.prototype;h._areas=[];h.init=function(a){if(a)if("function"==typeof a.push)for(var b=0,d=a.length;b<d;b++)this.init(a[b]);else if(a=this._normal(a,!0))b=this._areas,b.length?b.push(a):this._areas=[a]};h.address=function(){this.dirty&&this.refresh();return this._areas};h.areas=function(a){this.dirty&&this.refresh();var b=this.that,d=this._areas,d=null==a?d:d[a];return l.Range(b,d,"area")};h.select=function(){var a=
this.that,b=a.iSelection,d=b._areas[0],f=this._areas,g=f[0];if(!g)return this;var h=g.r1,l=g.c1;if(b.dirty||1!=f.length||"block"!=f[0].type||!d||"cell"!=d.type&&"block"!=d.type||h!=d.r1||l!=d.c1)for(b.removeAll({trigger:!1}),h=0,l=f.length;h<l;h++)b.add(f[h],!1);else{var k=d.r1,m=d.c1,p=d.r2,d=d.c2,s=g.r2,g=g.c2,a=a.iCells;if(s==p&&g==d)return this;g>d?a.selectBlock({range:{r1:h,c1:d+1,r2:s,c2:g}}):g<d&&a.selectBlock({range:{r1:Math.max(h,k),c1:g+1,r2:Math.max(s,p),c2:d},remove:!0});s>p?a.selectBlock({range:{r1:p+
1,c1:l,r2:s,c2:g}}):s<p&&a.selectBlock({range:{r1:s+1,c1:Math.max(l,m),r2:p,c2:Math.max(g,d)},remove:!0});b._areas=f}b._trigger();return this};h.resize=function(a,b){var d=this._areas[0];return p(this.that,{r1:d.r1,c1:d.c1,rc:a,cc:b})};h.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};h.copy=function(a){a=a||{};this.dirty&&this.refresh();var b=this.that,d=a.dest,f=a.cut?!0:!1,g=null==a.copy?!0:a.copy,h=a.source||(f?"cut":"copy"),l=null==a.history?!0:a.history,k=null==a.allowInvalid?!0:a.allowInvalid,
m=[],p=[],s=b.colModel,u=b.readCell,r=b.iMerge,v=this._areas;if(v.length){var B=this._areas[0],A=B.type,t=B.r1,w=B.c1,x=B.r2,B=B.c2,y=0;do{for(;t<=x;t++){for(var z=[],D=b.getRowData({rowIndx:t}),C={},E={},H=w;H<=B;H++){var I=s[H];if(!1===I.copy)break;var J=u(D,I,r,t,H);g&&z.push(J);f&&(I=I.dataIndx,C[I]=void 0,E[I]=J)}f&&m.push({rowIndx:t,rowData:D,oldRow:E,newRow:C,type:"update"});z=z.join("\t");p.push(z)}y++;B=v[y];if("row"==A&&B&&"row"==B.type)t=B.r1,w=B.c1,x=B.r2,B=B.c2;else break}while(1);g&&
(z=p.join("\n"),a.clip?(a=a.clip,a.val(z),a.select()):b._setGlobalStr(z));d?b.paste({dest:d,rowList:m,history:l,allowInvalid:k}):f&&!1!==b._digestData({rowList:m,source:h,history:l,allowInvalid:k})&&b.refresh({source:"cut"})}};h.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};h.add=function(a){this.init(a)};h._countArea=function(a){var b=a.r1,d=a.c1,f=a.r2,g=a.c2;return"cell"==a.type?1:(f-b+1)*(g-d+1)};h.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
b=this._areas,d=0,f=b.length,g=0;g<f;g++)d+=a?this._countArea(b[g]):1;return d};h.rows=function(a){this.dirty&&this.refresh();var b=this.that,d=[],f=this._areas[0];if(f){var g=f.r1,h=f.c1,n=f.r2,k=f.c2,f=f.type,n=null==a?n:g+a;for(a=null==a?g:g+a;a<=n;a++)d.push({r1:a,c1:h,r2:a,c2:k,type:f})}return l.Range(b,d,"row")};h.columns=function(a){this.dirty&&this.refresh();var b=this.that,d=[],f=this._areas[0];if(f){var g=f.r1,h=f.c1,n=f.r2,k=f.c2,f=f.type,k=null==a?k:h+a;for(a=null==a?h:h+a;a<=k;a++)d.push({r1:g,
c1:a,r2:n,c2:a,type:f})}return l.Range(b,d,"column")};h.cell=function(a,b){this.dirty&&this.refresh();var d=this.that,f=[],g=this._areas[0];g&&(f=g.r1+a,g=g.c1+b,f=[f,g,f,g]);return l.Range(d,f,"cell")};h.item=function(a){this.dirty&&this.refresh();for(var b=0,d=!1,f=this._areas,g=0,h=f.length;g<h;g++){var l=f[g],k=this._countArea(l);if(b+k>a){d=!0;a-=b;break}else b+=k}if(d){if(l)var m=l.r1,p=l.c1,b=l.c2-p+1,m=m+Math.floor(a/b),p=p+a%b;return{r1:m,c1:p}}};h._normal=function(a,b){if(a.type)return a;
if("function"==a.push){for(var d=0,f=a.length;d<f;d++)this._normal(a[d],b);return a}var d=this.that,g=d.options,f=g.dataModel.data,g=g.pageModel,h="remote"==g.type?g.totalRecords:f.length-1,l=d.colModel.length-1,f=a.r1,g=a.c1,f=f>h?h:f,g=g>l?l:g,k=a.rc,m=a.cc,p=a.r2,s=a.c2,p=k?f+k-1:p>h?h:p,s=m?g+m-1:s>l?l:s;f>p&&(k=f,f=p,p=k);g>s&&(k=g,g=s,s=k);if(null!=f||null!=g)return null==f?(f=0,p=h,s=null==s?g:s,h="column"):null==g?(g=0,p=null==p?f:p,s=l,h="row"):null==p?(h="cell",p=f,s=g):h="block",b&&(d=
d.iMerge.inflateRange(f,g,p,s),f=d[0],g=d[1],p=d[2],s=d[3]),a.r1=f,a.c1=g,a.r2=p,a.c2=s,a.type=a.type||h,a};h.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var b=this.that,d=b.colModel,f=[],g=this._areas;if(void 0===a&&g.length){var h=g[0],l=h.r1,k=h.c1;return b.getCellData({rowIndx:l,colIndx:k})}for(var m=0;m<g.length;m++)for(var h=g[m],l=h.r1,k=h.c1,p=h.r2,h=h.c2;l<=p;l++){for(var s=b.normalize({rowIndx:l}),u=s.rowData,s=s.rowIndx,r={},v={},B=k;B<=h;B++){var A=d[B].dataIndx;v[A]=
a;r[A]=u[A]}f.push({rowData:u,rowIndx:s,type:"update",newRow:v,oldRow:r})}f.length&&(b._digestData({rowList:f,source:"range"}),b.refresh())};var a=l.Selection=function(c,b){if(null==c)throw"invalid param";if(!1==this instanceof a)return new a(c,b);this.that=c;var d=this;c.on("dataReady columnOrder",function(a,c){"pager"!=c.source&&(d.dirty=!0)});this._base(c,b)},b={isDirty:function(){return this.dirty},_trigger:function(){this.dirty&&this.refresh();this.that._trigger("selectChange",null,{selection:this})},
removeAll:function(a){a=a||{};var b=this.that;b.iCells.removeAll({refresh:!0});b.iRows.removeAll({refresh:!0,all:!0});this._areas=[];!1!==a.trigger&&this._trigger()}};h.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var b=a.type,d=a.r1,f=a.c1,g=a.r2;a=a.c2;for(var h=this._areas,l=0,k=h.length;l<k;l++){var m=h[l],p=m;if(b==m.type&&d>=p.r1&&g<=p.r2&&f==p.c1&&a==p.c2)return l}return-1};b.add=function(a,b){var d=this.that,f=this._normal(a,!0),g=d.iCells,d=d.iRows,h=f.r1,l=f.c1,k=f.r2,
m=f.type;0<=this.indexOf(f)||("row"==m?(g=this._areas,g.length&&(g=g[g.length-1],m=g.type,"row"==m&&h<=g.r2&&(this.dirty=!0)),k>h?d.selectRange({range:f}):d.add({rowIndx:h})):"column"==m||"block"==m?g.selectBlock({range:f}):"cell"==m&&g.add({rowIndx:h,colIndx:l}),this._super(f),!1!==b&&this._trigger())};h.removeRow=function(a,b){var d=a.r1,f=a.r2,g=this._areas,h=this._areas[b],l=h.r1,k=h.r2;d==l&&f==k?g.splice(b,1):d>l?(h.r2=d-1,f<k&&(d=this._normal({r1:f+1,r2:k}),g.splice(b+1,0,d))):f<k&&(d>l&&(d=
this._normal({r1:f+1,r2:k}),g.splice(b,0,d)),h.r1=f+1)};b.removeRow=function(a,b){var d=this.that,f=this._normal(a),g=this.indexOf(f);-1<g&&"row"==f.type&&f.r1==f.r2&&(d.iRows.remove({rowIndx:f.r1}),this._super(a,g),!1!==b&&this._trigger())};b.selectAll=function(a){a=a||{};var b=this.that,d=a.all,f=d?0:b.rowIndxOffset,g=b.colModel.length-1,h=f+(d?b.options.dataModel.data.length-1:b.pdata.length-1);"cell"==a.type?(a={r1:f,c1:0},a.r2=h,a.c2=g,b.range(a).select()):(a={r1:f},a.r2=h,d||this.removeRows({all:!1,
trigger:!1}),b.iRows.selectRange({range:a}),b=d?[]:this._areas,b.push({r1:f,c1:0,r2:h,c2:g,type:"row"}),this._areas=b,this._trigger());return this};b.removeRows=function(a){a=a||{};var b=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});b?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};b.refresh=function(){for(var a=this.that,b=[],d=a.colModel.length-1,a=a.options.dataModel.data,f=0,g=a.length;f<g;f++){var h=a[f],l;h&&(h.pq_cellselect=void 0,h.pq_rowselect?l?l.r2=f:l={r1:f,r2:f,
c1:0,c2:d,type:"row"}:l&&(b.push(l),l=null))}l&&b.push(l);this.dirty=!1;this._areas=b};l.extend(p,a,b)})();
